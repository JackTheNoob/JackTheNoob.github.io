<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="None">
<meta name="keywords" content="iOS,swift,react-native,javascript,å¾®ä¿¡å¼€å‘,å¾®ä¿¡å°ç¨‹åº,C,Cè¯­è¨€,ç¨‹åºçŒ¿,åšå®¢,Lyddwn,ç å†œ">
<meta property="og:type" content="website">
<meta property="og:title" content="Lyddwn">
<meta property="og:url" content="http://jackthenoob.github.io/index.html">
<meta property="og:site_name" content="Lyddwn">
<meta property="og:description" content="None">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Lyddwn">
<meta name="twitter:description" content="None">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://jackthenoob.github.io/">





  <title>Lyddwn</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Lyddwn</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">ç”Ÿæ´»ä¸åªæ˜¯ä»£ç </p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br>
            
            Commonweal 404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jackthenoob.github.io/2019/05/22/ä½¿ç”¨-è®¿é—®å®ä¾‹å¯¹è±¡æˆå‘˜å˜é‡Crashé—®é¢˜/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="å‚æ¨å°æ¢³é›¨">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lyddwn">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/22/ä½¿ç”¨-è®¿é—®å®ä¾‹å¯¹è±¡æˆå‘˜å˜é‡Crashé—®é¢˜/" itemprop="url">ä½¿ç”¨->è®¿é—®å®ä¾‹å¯¹è±¡æˆå‘˜å˜é‡Crashé—®é¢˜</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-22T21:10:05+08:00">
                2019-05-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><h6 id="æœ€è¿‘çº¿ä¸Šå‘ç”Ÿäº†ä¸€ä¸ªCrashã€‚æ ¹æ®æ ˆä¿¡æ¯å®šä½åˆ°å¦‚ä¸‹ä»£ç "><a href="#æœ€è¿‘çº¿ä¸Šå‘ç”Ÿäº†ä¸€ä¸ªCrashã€‚æ ¹æ®æ ˆä¿¡æ¯å®šä½åˆ°å¦‚ä¸‹ä»£ç " class="headerlink" title="æœ€è¿‘çº¿ä¸Šå‘ç”Ÿäº†ä¸€ä¸ªCrashã€‚æ ¹æ®æ ˆä¿¡æ¯å®šä½åˆ°å¦‚ä¸‹ä»£ç "></a>æœ€è¿‘çº¿ä¸Šå‘ç”Ÿäº†ä¸€ä¸ªCrashã€‚æ ¹æ®æ ˆä¿¡æ¯å®šä½åˆ°å¦‚ä¸‹ä»£ç </h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">EXC_BAD_ACCESS (SIGBUS)</span><br><span class="line">Attempted to dereference garbage pointer 0x10. Originated at or <span class="keyword">in</span> a subcall of WebViewJavascriptBridge_js</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (instance-&gt;ivar) &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="å°±æ˜¯è®¿é—®æˆå‘˜å˜é‡æ—¶Crashã€‚"><a href="#å°±æ˜¯è®¿é—®æˆå‘˜å˜é‡æ—¶Crashã€‚" class="headerlink" title="å°±æ˜¯è®¿é—®æˆå‘˜å˜é‡æ—¶Crashã€‚"></a>å°±æ˜¯è®¿é—®æˆå‘˜å˜é‡æ—¶Crashã€‚</h6><h6 id="éš¾é“instanceå¯èƒ½ä¸ºç©ºï¼Œä½†æ˜¯ä¸ºç©ºåº”è¯¥ä¹Ÿä¸ä¼šCrashå§ï¼Ÿå› ä¸ºåœ¨æˆ‘çš„å›ºæœ‰çš„æ€ç»´é‡Œé¢ï¼Œå¯¹nilå‘é€æ¶ˆæ¯å¹¶ä¸ä¼šcrashã€‚"><a href="#éš¾é“instanceå¯èƒ½ä¸ºç©ºï¼Œä½†æ˜¯ä¸ºç©ºåº”è¯¥ä¹Ÿä¸ä¼šCrashå§ï¼Ÿå› ä¸ºåœ¨æˆ‘çš„å›ºæœ‰çš„æ€ç»´é‡Œé¢ï¼Œå¯¹nilå‘é€æ¶ˆæ¯å¹¶ä¸ä¼šcrashã€‚" class="headerlink" title="éš¾é“instanceå¯èƒ½ä¸ºç©ºï¼Œä½†æ˜¯ä¸ºç©ºåº”è¯¥ä¹Ÿä¸ä¼šCrashå§ï¼Ÿå› ä¸ºåœ¨æˆ‘çš„å›ºæœ‰çš„æ€ç»´é‡Œé¢ï¼Œå¯¹nilå‘é€æ¶ˆæ¯å¹¶ä¸ä¼šcrashã€‚"></a>éš¾é“instanceå¯èƒ½ä¸ºç©ºï¼Œä½†æ˜¯ä¸ºç©ºåº”è¯¥ä¹Ÿä¸ä¼šCrashå§ï¼Ÿå› ä¸ºåœ¨æˆ‘çš„å›ºæœ‰çš„æ€ç»´é‡Œé¢ï¼Œå¯¹nilå‘é€æ¶ˆæ¯å¹¶ä¸ä¼šcrashã€‚</h6><h5 id="ä½†æ˜¯åˆä»”ç»†æƒ³äº†æƒ³ï¼Œè®¿é—®æˆå‘˜å˜é‡æ—¶ï¼Œæ˜¯é€šè¿‡å½“å‰ç±»çš„å®ä¾‹å¯¹è±¡åç§»é‡å†åŠ ä¸Šæ­¤å˜é‡åœ¨ç±»ä¸­çš„åç§»é‡è·å–çš„ã€‚ä¸å‘é€æ¶ˆæ¯æ— å…³ï¼ˆä¸æ˜¯å±æ€§ï¼Œæ²¡æœ‰å†™getæ–¹æ³•ï¼‰ã€‚å¦‚æœå½“å‰å®ä¾‹å¯¹è±¡å¦‚æœä¸ºç©ºï¼ˆobjçš„offet-0ï¼‰ï¼Œä¸ºä»€ä¹ˆè¿˜ä¼šç»§ç»­å‘¢ï¼Ÿç™¾æ€ä¸å¾—è§£ã€‚"><a href="#ä½†æ˜¯åˆä»”ç»†æƒ³äº†æƒ³ï¼Œè®¿é—®æˆå‘˜å˜é‡æ—¶ï¼Œæ˜¯é€šè¿‡å½“å‰ç±»çš„å®ä¾‹å¯¹è±¡åç§»é‡å†åŠ ä¸Šæ­¤å˜é‡åœ¨ç±»ä¸­çš„åç§»é‡è·å–çš„ã€‚ä¸å‘é€æ¶ˆæ¯æ— å…³ï¼ˆä¸æ˜¯å±æ€§ï¼Œæ²¡æœ‰å†™getæ–¹æ³•ï¼‰ã€‚å¦‚æœå½“å‰å®ä¾‹å¯¹è±¡å¦‚æœä¸ºç©ºï¼ˆobjçš„offet-0ï¼‰ï¼Œä¸ºä»€ä¹ˆè¿˜ä¼šç»§ç»­å‘¢ï¼Ÿç™¾æ€ä¸å¾—è§£ã€‚" class="headerlink" title="ä½†æ˜¯åˆä»”ç»†æƒ³äº†æƒ³ï¼Œè®¿é—®æˆå‘˜å˜é‡æ—¶ï¼Œæ˜¯é€šè¿‡å½“å‰ç±»çš„å®ä¾‹å¯¹è±¡åç§»é‡å†åŠ ä¸Šæ­¤å˜é‡åœ¨ç±»ä¸­çš„åç§»é‡è·å–çš„ã€‚ä¸å‘é€æ¶ˆæ¯æ— å…³ï¼ˆä¸æ˜¯å±æ€§ï¼Œæ²¡æœ‰å†™getæ–¹æ³•ï¼‰ã€‚å¦‚æœå½“å‰å®ä¾‹å¯¹è±¡å¦‚æœä¸ºç©ºï¼ˆobjçš„offet=0ï¼‰ï¼Œä¸ºä»€ä¹ˆè¿˜ä¼šç»§ç»­å‘¢ï¼Ÿç™¾æ€ä¸å¾—è§£ã€‚"></a>ä½†æ˜¯åˆä»”ç»†æƒ³äº†æƒ³ï¼Œè®¿é—®æˆå‘˜å˜é‡æ—¶ï¼Œæ˜¯é€šè¿‡å½“å‰ç±»çš„å®ä¾‹å¯¹è±¡åç§»é‡å†åŠ ä¸Šæ­¤å˜é‡åœ¨ç±»ä¸­çš„åç§»é‡è·å–çš„ã€‚ä¸å‘é€æ¶ˆæ¯æ— å…³ï¼ˆä¸æ˜¯å±æ€§ï¼Œæ²¡æœ‰å†™getæ–¹æ³•ï¼‰ã€‚å¦‚æœå½“å‰å®ä¾‹å¯¹è±¡å¦‚æœä¸ºç©ºï¼ˆobjçš„offet=0ï¼‰ï¼Œä¸ºä»€ä¹ˆè¿˜ä¼šç»§ç»­å‘¢ï¼Ÿç™¾æ€ä¸å¾—è§£ã€‚</h5><h5 id="å†™äº†ä¸€ä¸ªdemoï¼Œä½¿ç”¨clangå‘½ä»¤è½¬æ¢ä¸ºcppæ–‡ä»¶åï¼Œæ‰çŸ¥é“ç¼˜ç”±ã€‚"><a href="#å†™äº†ä¸€ä¸ªdemoï¼Œä½¿ç”¨clangå‘½ä»¤è½¬æ¢ä¸ºcppæ–‡ä»¶åï¼Œæ‰çŸ¥é“ç¼˜ç”±ã€‚" class="headerlink" title="å†™äº†ä¸€ä¸ªdemoï¼Œä½¿ç”¨clangå‘½ä»¤è½¬æ¢ä¸ºcppæ–‡ä»¶åï¼Œæ‰çŸ¥é“ç¼˜ç”±ã€‚"></a>å†™äº†ä¸€ä¸ªdemoï¼Œä½¿ç”¨clangå‘½ä»¤è½¬æ¢ä¸ºcppæ–‡ä»¶åï¼Œæ‰çŸ¥é“ç¼˜ç”±ã€‚</h5><h5 id="å¤§ä½“ä»£ç å¦‚ä¸‹ï¼š"><a href="#å¤§ä½“ä»£ç å¦‚ä¸‹ï¼š" class="headerlink" title="å¤§ä½“ä»£ç å¦‚ä¸‹ï¼š"></a>å¤§ä½“ä»£ç å¦‚ä¸‹ï¼š</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//MyObject.h</span><br><span class="line">@interface MyObject : NSObject &#123;</span><br><span class="line">    @public</span><br><span class="line">    NSString    *_strObject;</span><br><span class="line">    NSArray     *_arrList;</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//Test.h</span><br><span class="line">@implementation Test</span><br><span class="line"></span><br><span class="line">- (void)helloworld &#123;</span><br><span class="line">    MyObject *obj = nil;</span><br><span class="line">    <span class="keyword">if</span> (condition) &#123;</span><br><span class="line">        obj = [MyObject new];</span><br><span class="line">    &#125;</span><br><span class="line">    NSString *str = obj-&gt;_strObject;</span><br><span class="line">    NSLog(@<span class="string">"%@"</span>, str);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clang -rewrite-objc Test.m</span><br></pre></td></tr></table></figure>
<h6 id="é€šè¿‡clangå‘½ä»¤è·å–Test-cppæ–‡ä»¶ï¼ˆ10ä¸‡è¡Œå·¦å³ï¼‰"><a href="#é€šè¿‡clangå‘½ä»¤è·å–Test-cppæ–‡ä»¶ï¼ˆ10ä¸‡è¡Œå·¦å³ï¼‰" class="headerlink" title="é€šè¿‡clangå‘½ä»¤è·å–Test.cppæ–‡ä»¶ï¼ˆ10ä¸‡è¡Œå·¦å³ï¼‰"></a>é€šè¿‡clangå‘½ä»¤è·å–Test.cppæ–‡ä»¶ï¼ˆ10ä¸‡è¡Œå·¦å³ï¼‰</h6><h6 id="åœ¨åé¢çœ‹åˆ°å¦‚ä¸‹ç‰‡æ®µ"><a href="#åœ¨åé¢çœ‹åˆ°å¦‚ä¸‹ç‰‡æ®µ" class="headerlink" title="åœ¨åé¢çœ‹åˆ°å¦‚ä¸‹ç‰‡æ®µ"></a>åœ¨åé¢çœ‹åˆ°å¦‚ä¸‹ç‰‡æ®µ</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#pragma clang assume_nonnull end</span></span><br><span class="line">// @implementation Test</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">static void _I_Test_helloworld(Test * self, SEL _cmd) &#123;</span><br><span class="line">    MyObject *obj = __null;</span><br><span class="line">    <span class="keyword">if</span> (condition) &#123;</span><br><span class="line">        obj = ((MyObject *(*)(id, SEL))(void *)objc_msgSend)((id)objc_getClass(<span class="string">"MyObject"</span>), sel_registerName(<span class="string">"new"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    NSString *str = (*(NSString **)((char *)obj + OBJC_IVAR_<span class="variable">$_MyObject</span><span class="variable">$_strObject</span>));</span><br><span class="line">    NSLog((NSString *)&amp;__NSConstantStringImpl__var_folders_hs_pl2pwmlj27g9xt0wlb9mbdbh0000gn_T_Test_2546e4_mi_0, str);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// @end</span><br></pre></td></tr></table></figure>
<h5 id="ä¸»è¦ä¸‹è¿™è¡Œä»£ç "><a href="#ä¸»è¦ä¸‹è¿™è¡Œä»£ç " class="headerlink" title="ä¸»è¦ä¸‹è¿™è¡Œä»£ç "></a>ä¸»è¦ä¸‹è¿™è¡Œä»£ç </h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NSString *str = (*(NSString **)((char *)obj + OBJC_IVAR_<span class="variable">$_MyObject</span><span class="variable">$_strObject</span>));</span><br></pre></td></tr></table></figure>
<p>#######    è¿™æ®µä»£ç å°±æ˜¯è·å–_strObjectåç§»é‡ï¼ŒOBJC_IVAR_$_MyObject$_strObjectæ˜¯ä¸€ä¸ªåœ¨ç¼–è¯‘å™¨å·²ç»å†³å®šäº†çš„å›ºå®šçš„åç§»é‡ã€‚objå°±æ˜¯å®ä¾‹å¯¹è±¡çš„é¦–åœ°å€ã€‚é€šè¿‡2ä¸ªå€¼è·å–åˆ°_strObjectåœ°å€ã€‚å¦‚æœobj==nil;è¿™ä¸ªåç§»åœ°å€å°±æ˜¯ä¸€ä¸ªå›ºå®šçš„å€¼0ï¼Œç±»ä¼¼0x10(è¿™ä¹Ÿå’Œcrashä¿¡æ¯é‡Œç›¸åŒ¹é…)ã€‚</p>
<hr>
<h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><blockquote>
<p>é€šè¿‡-&gt;è®¿é—®æˆå‘˜å˜é‡è¦åˆ¤æ–­å½“å‰å˜é‡æ˜¯å¦ä¸ºç©ºã€‚é€šè¿‡offsetå¯»å€æˆå‘˜å˜é‡æ—¶å¹¶ä¸ä¼šå¤šä¸€å±‚ä¸ºç©ºåˆ¤æ–­é€»è¾‘ã€‚</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jackthenoob.github.io/2019/05/21/Swiftå­¦ä¹ ç¬”è®°-ä¸€/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="å‚æ¨å°æ¢³é›¨">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lyddwn">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/21/Swiftå­¦ä¹ ç¬”è®°-ä¸€/" itemprop="url">Swiftå­¦ä¹ ç¬”è®°(ä¸€)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-21T11:21:00+08:00">
                2019-05-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ç®€è¿°"><a href="#ç®€è¿°" class="headerlink" title="ç®€è¿°"></a>ç®€è¿°</h1><h5 id="Swiftæ˜¯ä¸€ç§æ”¯æŒå¤šç¼–ç¨‹èŒƒå¼ã€å®‰å…¨ã€å¿«é€Ÿå’Œäº’åŠ¨çš„è·¨å¹³å°ç¼–è¯‘å¼ç¼–ç¨‹è¯­è¨€ã€‚ä¸”ç¼–è¯‘å™¨å¯¹æ€§èƒ½è¿›è¡Œäº†ä¼˜åŒ–ï¼Œç¼–ç¨‹è¯­è¨€å¯¹å¼€å‘è¿›è¡Œäº†ä¼˜åŒ–ï¼Œä¸¤è€…äº’ä¸å¹²æ‰°ï¼Œé±¼ä¸ç†ŠæŒå…¼å¾—ã€‚å®ƒæ”¯æŒä»£ç é¢„è§ˆï¼ˆplaygroundsï¼‰ï¼Œè¿™ä¸ªé©å‘½æ€§çš„ç‰¹æ€§å¯ä»¥å…è®¸ç¨‹åºå‘˜åœ¨ä¸ç¼–è¯‘å’Œè¿è¡Œåº”ç”¨ç¨‹åºçš„å‰æä¸‹è¿è¡Œ-Swift-ä»£ç å¹¶å®æ—¶æŸ¥çœ‹ç»“æœã€‚"><a href="#Swiftæ˜¯ä¸€ç§æ”¯æŒå¤šç¼–ç¨‹èŒƒå¼ã€å®‰å…¨ã€å¿«é€Ÿå’Œäº’åŠ¨çš„è·¨å¹³å°ç¼–è¯‘å¼ç¼–ç¨‹è¯­è¨€ã€‚ä¸”ç¼–è¯‘å™¨å¯¹æ€§èƒ½è¿›è¡Œäº†ä¼˜åŒ–ï¼Œç¼–ç¨‹è¯­è¨€å¯¹å¼€å‘è¿›è¡Œäº†ä¼˜åŒ–ï¼Œä¸¤è€…äº’ä¸å¹²æ‰°ï¼Œé±¼ä¸ç†ŠæŒå…¼å¾—ã€‚å®ƒæ”¯æŒä»£ç é¢„è§ˆï¼ˆplaygroundsï¼‰ï¼Œè¿™ä¸ªé©å‘½æ€§çš„ç‰¹æ€§å¯ä»¥å…è®¸ç¨‹åºå‘˜åœ¨ä¸ç¼–è¯‘å’Œè¿è¡Œåº”ç”¨ç¨‹åºçš„å‰æä¸‹è¿è¡Œ-Swift-ä»£ç å¹¶å®æ—¶æŸ¥çœ‹ç»“æœã€‚" class="headerlink" title="Swiftæ˜¯ä¸€ç§æ”¯æŒå¤šç¼–ç¨‹èŒƒå¼ã€å®‰å…¨ã€å¿«é€Ÿå’Œäº’åŠ¨çš„è·¨å¹³å°ç¼–è¯‘å¼ç¼–ç¨‹è¯­è¨€ã€‚ä¸”ç¼–è¯‘å™¨å¯¹æ€§èƒ½è¿›è¡Œäº†ä¼˜åŒ–ï¼Œç¼–ç¨‹è¯­è¨€å¯¹å¼€å‘è¿›è¡Œäº†ä¼˜åŒ–ï¼Œä¸¤è€…äº’ä¸å¹²æ‰°ï¼Œé±¼ä¸ç†ŠæŒå…¼å¾—ã€‚å®ƒæ”¯æŒä»£ç é¢„è§ˆï¼ˆplaygroundsï¼‰ï¼Œè¿™ä¸ªé©å‘½æ€§çš„ç‰¹æ€§å¯ä»¥å…è®¸ç¨‹åºå‘˜åœ¨ä¸ç¼–è¯‘å’Œè¿è¡Œåº”ç”¨ç¨‹åºçš„å‰æä¸‹è¿è¡Œ Swift ä»£ç å¹¶å®æ—¶æŸ¥çœ‹ç»“æœã€‚"></a>Swiftæ˜¯ä¸€ç§æ”¯æŒå¤šç¼–ç¨‹èŒƒå¼ã€å®‰å…¨ã€å¿«é€Ÿå’Œäº’åŠ¨çš„è·¨å¹³å°ç¼–è¯‘å¼ç¼–ç¨‹è¯­è¨€ã€‚ä¸”ç¼–è¯‘å™¨å¯¹æ€§èƒ½è¿›è¡Œäº†ä¼˜åŒ–ï¼Œç¼–ç¨‹è¯­è¨€å¯¹å¼€å‘è¿›è¡Œäº†ä¼˜åŒ–ï¼Œä¸¤è€…äº’ä¸å¹²æ‰°ï¼Œé±¼ä¸ç†ŠæŒå…¼å¾—ã€‚å®ƒæ”¯æŒä»£ç é¢„è§ˆï¼ˆplaygroundsï¼‰ï¼Œè¿™ä¸ªé©å‘½æ€§çš„ç‰¹æ€§å¯ä»¥å…è®¸ç¨‹åºå‘˜åœ¨ä¸ç¼–è¯‘å’Œè¿è¡Œåº”ç”¨ç¨‹åºçš„å‰æä¸‹è¿è¡Œ Swift ä»£ç å¹¶å®æ—¶æŸ¥çœ‹ç»“æœã€‚</h5><h4 id="å†å²"><a href="#å†å²" class="headerlink" title="å†å²"></a>å†å²</h4><ul>
<li>2010å¹´7æœˆï¼Œè‹¹æœå¼€å‘è€…å·¥å…·éƒ¨é—¨æ€»ç›‘å…‹é‡Œæ–¯Â·æ‹‰ç‰¹çº³å¼€å§‹ç€æ‰‹ Swift ç¼–ç¨‹è¯­è¨€çš„è®¾è®¡å·¥ä½œï¼Œä»¥ä¸€å¹´æ—¶é—´ï¼Œå®ŒæˆåŸºæœ¬æ¶æ„åï¼Œä»–é¢†å¯¼äº†ä¸€ä¸ªè®¾è®¡å›¢é˜Ÿå¤§åŠ›å‚ä¸å…¶ä¸­ã€‚</li>
<li>2014å¹´6æœˆå‘è¡¨ï¼Œ Swiftå¤§çº¦å†ç»4å¹´çš„å¼€å‘æœŸã€‚è‹¹æœå®£ç§°Swiftçš„ç‰¹ç‚¹æ˜¯ï¼šå¿«é€Ÿã€ç°ä»£ã€å®‰å…¨ã€äº’åŠ¨ï¼Œè€Œä¸”æ˜æ˜¾ä¼˜äºObjective-Cè¯­è¨€ã€‚Swiftä»¥LLVMç¼–è¯‘ï¼Œå¯ä»¥ä½¿ç”¨ç°æœ‰çš„Cocoaå’ŒCocoa Touchæ¡†æ¶ã€‚Xcode PlaygroundsåŠŸèƒ½æ˜¯Swiftä¸ºè‹¹æœå¼€å‘å·¥å…·å¸¦æ¥çš„æœ€å¤§åˆ›æ–°ï¼Œè¯¥åŠŸèƒ½æä¾›å¼ºå¤§çš„äº’åŠ¨æ•ˆæœï¼Œèƒ½è®©Swiftæºä»£ç åœ¨æ’°å†™è¿‡ç¨‹ä¸­èƒ½å³æ—¶æ˜¾ç¤ºå‡ºå…¶è¿è¡Œç»“æœã€‚æ‹‰ç‰¹çº³æœ¬äººå¼ºè°ƒï¼ŒPlaygroundså¾ˆå¤§ç¨‹åº¦æ˜¯å—åˆ°å¸ƒé›·ç‰¹Â·ç»´å…‹å¤šç†å¿µçš„å¯å‘ã€‚</li>
<li>2015å¹´6æœˆ8æ—¥ï¼Œè‹¹æœäºWWDC2015ä¸Šå®£å¸ƒï¼ŒSwiftå°†å¼€æ”¾æºä»£ç ï¼ŒåŒ…æ‹¬ç¼–è¯‘å™¨å’Œæ ‡å‡†åº“ã€‚</li>
<li>2015å¹´12æœˆ3æ—¥ï¼Œè‹¹æœå®£å¸ƒå¼€æºswiftï¼Œå¹¶æ”¯æŒLinuxï¼Œè‹¹æœåœ¨æ–°ç½‘ç«™swift.orgå’Œæ‰˜ç®¡ç½‘ç«™Githubä¸Šå¼€æºäº†swiftï¼Œä½†è‹¹æœçš„app storeå¹¶ä¸æ”¯æŒå¼€æºçš„swiftï¼Œåªæ”¯æŒè‹¹æœå®˜æ–¹çš„swiftç‰ˆæœ¬ï¼Œå®˜æ–¹ç‰ˆæœ¬ä¼šåœ¨æ–°ç½‘ç«™swift.orgä¸Šå®šæœŸä¸å¼€æºç‰ˆæœ¬åŒæ­¥ã€‚</li>
</ul>
<p><a href="https://swiftgg.gitbook.io/swift/huan-ying-shi-yong-swift/04_revision_history" target="_blank" rel="noopener">Swiftå†å²ç‰ˆæœ¬</a></p>
<ul>
<li>2019-01-24 Swift 5.0 æ›´æ–°</li>
<li>2018-09-17 Swift 4.2 æ›´æ–°</li>
<li>2018-03-29 Swift 4.1 æ›´æ–°</li>
<li>2017-12-04 Swift 4.0.3 æ›´æ–°</li>
<li>2017-09-19 Swift 4.0 æ›´æ–°</li>
<li>2017-03-27 Swift 3.1 æ›´æ–°</li>
<li>2016-10-27 Swift 3.0.1 æ›´æ–°</li>
<li>2016-09-13 Swift 3.0 æ›´æ–°</li>
<li>2016-03-21 Swift 2.2 æ›´æ–°</li>
<li>2015-10-20 Swift 2.1 æ›´æ–°</li>
<li>2015-09-16 Swift 2.0 æ›´æ–°</li>
<li>2015-4-8 Swift 1.2 æ›´æ–°</li>
<li>2014-10-16 Swift 1.1 æ›´æ–°</li>
<li>2014-08-18 Swift 1.0 æ›´æ–° </li>
</ul>
<h2 id="Swift-æ˜¯ä¸€é—¨å¼€å‘-iOS-macOS-watchOS-å’Œ-tvOS-åº”ç”¨çš„æ–°è¯­è¨€ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æœ‰-C-æˆ–è€…-Objective-C-å¼€å‘ç»éªŒçš„è¯ï¼Œä½ ä¼šå‘ç°-Swift-çš„å¾ˆå¤šå†…å®¹éƒ½æ˜¯ä½ ç†Ÿæ‚‰çš„ã€‚"><a href="#Swift-æ˜¯ä¸€é—¨å¼€å‘-iOS-macOS-watchOS-å’Œ-tvOS-åº”ç”¨çš„æ–°è¯­è¨€ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æœ‰-C-æˆ–è€…-Objective-C-å¼€å‘ç»éªŒçš„è¯ï¼Œä½ ä¼šå‘ç°-Swift-çš„å¾ˆå¤šå†…å®¹éƒ½æ˜¯ä½ ç†Ÿæ‚‰çš„ã€‚" class="headerlink" title="Swift æ˜¯ä¸€é—¨å¼€å‘ iOS, macOS, watchOS å’Œ tvOS åº”ç”¨çš„æ–°è¯­è¨€ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æœ‰ C æˆ–è€… Objective-C å¼€å‘ç»éªŒçš„è¯ï¼Œä½ ä¼šå‘ç° Swift çš„å¾ˆå¤šå†…å®¹éƒ½æ˜¯ä½ ç†Ÿæ‚‰çš„ã€‚"></a>Swift æ˜¯ä¸€é—¨å¼€å‘ iOS, macOS, watchOS å’Œ tvOS åº”ç”¨çš„æ–°è¯­è¨€ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æœ‰ C æˆ–è€… Objective-C å¼€å‘ç»éªŒçš„è¯ï¼Œä½ ä¼šå‘ç° Swift çš„å¾ˆå¤šå†…å®¹éƒ½æ˜¯ä½ ç†Ÿæ‚‰çš„ã€‚</h2><h3 id="ä¸‹é¢é€šè¿‡Swiftä¸Objective-C-Cå¯¹æ¯”æ¥ä»‹ç»è¿™é—¨è¯­è¨€"><a href="#ä¸‹é¢é€šè¿‡Swiftä¸Objective-C-Cå¯¹æ¯”æ¥ä»‹ç»è¿™é—¨è¯­è¨€" class="headerlink" title="ä¸‹é¢é€šè¿‡Swiftä¸Objective-C/Cå¯¹æ¯”æ¥ä»‹ç»è¿™é—¨è¯­è¨€"></a>ä¸‹é¢é€šè¿‡Swiftä¸Objective-C/Cå¯¹æ¯”æ¥ä»‹ç»è¿™é—¨è¯­è¨€</h3><h2 id="åŸºç¡€éƒ¨åˆ†"><a href="#åŸºç¡€éƒ¨åˆ†" class="headerlink" title="åŸºç¡€éƒ¨åˆ†"></a>åŸºç¡€éƒ¨åˆ†</h2><h4 id="åŸºæœ¬æ•°å€¼ç±»å‹ï¼ˆnumeric-typesï¼‰"><a href="#åŸºæœ¬æ•°å€¼ç±»å‹ï¼ˆnumeric-typesï¼‰" class="headerlink" title="åŸºæœ¬æ•°å€¼ç±»å‹ï¼ˆnumeric typesï¼‰"></a>åŸºæœ¬æ•°å€¼ç±»å‹ï¼ˆnumeric typesï¼‰</h4><h6 id="Swift-åŒ…å«äº†-C-å’Œ-Objective-C-ä¸Šæ‰€æœ‰åŸºç¡€æ•°æ®ç±»å‹ï¼ŒInt-è¡¨ç¤ºæ•´å‹å€¼ï¼›-Double-å’Œ-Float-è¡¨ç¤ºæµ®ç‚¹å‹å€¼ï¼›-Bool-æ˜¯å¸ƒå°”å‹å€¼ï¼›String-æ˜¯æ–‡æœ¬å‹æ•°æ®ã€‚-Swift-è¿˜æä¾›äº†ä¸‰ä¸ªåŸºæœ¬çš„é›†åˆç±»å‹ï¼ŒArrayã€Set-å’Œ-Dictionaryã€‚ç±»ä¼¼OCä¸­NSArrayã€NSMutableArrayã€NSSetã€NSMutableSetã€NSDictionaryã€NSMutableDictionaryã€‚"><a href="#Swift-åŒ…å«äº†-C-å’Œ-Objective-C-ä¸Šæ‰€æœ‰åŸºç¡€æ•°æ®ç±»å‹ï¼ŒInt-è¡¨ç¤ºæ•´å‹å€¼ï¼›-Double-å’Œ-Float-è¡¨ç¤ºæµ®ç‚¹å‹å€¼ï¼›-Bool-æ˜¯å¸ƒå°”å‹å€¼ï¼›String-æ˜¯æ–‡æœ¬å‹æ•°æ®ã€‚-Swift-è¿˜æä¾›äº†ä¸‰ä¸ªåŸºæœ¬çš„é›†åˆç±»å‹ï¼ŒArrayã€Set-å’Œ-Dictionaryã€‚ç±»ä¼¼OCä¸­NSArrayã€NSMutableArrayã€NSSetã€NSMutableSetã€NSDictionaryã€NSMutableDictionaryã€‚" class="headerlink" title="Swift åŒ…å«äº† C å’Œ Objective-C ä¸Šæ‰€æœ‰åŸºç¡€æ•°æ®ç±»å‹ï¼ŒInt è¡¨ç¤ºæ•´å‹å€¼ï¼› Double å’Œ Float è¡¨ç¤ºæµ®ç‚¹å‹å€¼ï¼› Bool æ˜¯å¸ƒå°”å‹å€¼ï¼›String æ˜¯æ–‡æœ¬å‹æ•°æ®ã€‚ Swift è¿˜æä¾›äº†ä¸‰ä¸ªåŸºæœ¬çš„é›†åˆç±»å‹ï¼ŒArrayã€Set å’Œ Dictionaryã€‚ç±»ä¼¼OCä¸­NSArrayã€NSMutableArrayã€NSSetã€NSMutableSetã€NSDictionaryã€NSMutableDictionaryã€‚"></a>Swift åŒ…å«äº† C å’Œ Objective-C ä¸Šæ‰€æœ‰åŸºç¡€æ•°æ®ç±»å‹ï¼ŒInt è¡¨ç¤ºæ•´å‹å€¼ï¼› Double å’Œ Float è¡¨ç¤ºæµ®ç‚¹å‹å€¼ï¼› Bool æ˜¯å¸ƒå°”å‹å€¼ï¼›String æ˜¯æ–‡æœ¬å‹æ•°æ®ã€‚ Swift è¿˜æä¾›äº†ä¸‰ä¸ªåŸºæœ¬çš„é›†åˆç±»å‹ï¼ŒArrayã€Set å’Œ Dictionaryã€‚ç±»ä¼¼OCä¸­NSArrayã€NSMutableArrayã€NSSetã€NSMutableSetã€NSDictionaryã€NSMutableDictionaryã€‚</h6><blockquote>
<p>å€¼ç±»å‹(Value Type)&amp;å¼•ç”¨ç±»å‹(Reference Type)  </p>
<p>å†…å­˜ï¼ˆRAMï¼‰ä¸­æœ‰ä¸¤ä¸ªåŒºåŸŸï¼Œæ ˆåŒºï¼ˆstackï¼‰å’Œå †åŒºï¼ˆheapï¼‰ã€‚åœ¨ Swift ä¸­ï¼Œå€¼ç±»å‹ï¼Œå­˜æ”¾åœ¨æ ˆåŒºï¼›å¼•ç”¨ç±»å‹ï¼Œå­˜æ”¾åœ¨å †åŒºã€‚<br> åœ¨ Swift ä¸­ï¼Œå…¸å‹çš„æœ‰ structï¼Œenumï¼Œä»¥åŠ tuples(å…ƒç»„) éƒ½æ˜¯å€¼ç±»å‹ã€‚è€Œå¹³æ—¶ä½¿ç”¨çš„ Intï¼Œ Doubleï¼ŒFloatï¼ŒStringï¼ŒArrayï¼ŒDictionaryï¼ŒSet å…¶å®éƒ½æ˜¯ç”¨ç»“æ„ä½“å®ç°çš„ï¼Œä¹Ÿæ˜¯å€¼ç±»å‹ã€‚è¯¦è§ä¸‹é¢ä»£ç </p>
<p>åœ¨ Swift ä¸­ï¼Œclass å’Œé—­åŒ…æ˜¯å¼•ç”¨ç±»å‹ã€‚  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public struct Int : FixedWidthInteger, SignedInteger &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å…ƒç»„-tuples"><a href="#å…ƒç»„-tuples" class="headerlink" title="å…ƒç»„(tuples)"></a>å…ƒç»„(tuples)</h4><h6 id="å…ƒç»„ï¼ˆtuplesï¼‰æŠŠå¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªå¤åˆå€¼ã€‚å…ƒç»„å†…çš„å€¼å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œå¹¶ä¸è¦æ±‚æ˜¯ç›¸åŒç±»å‹ã€‚"><a href="#å…ƒç»„ï¼ˆtuplesï¼‰æŠŠå¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªå¤åˆå€¼ã€‚å…ƒç»„å†…çš„å€¼å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œå¹¶ä¸è¦æ±‚æ˜¯ç›¸åŒç±»å‹ã€‚" class="headerlink" title="å…ƒç»„ï¼ˆtuplesï¼‰æŠŠå¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªå¤åˆå€¼ã€‚å…ƒç»„å†…çš„å€¼å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œå¹¶ä¸è¦æ±‚æ˜¯ç›¸åŒç±»å‹ã€‚"></a>å…ƒç»„ï¼ˆtuplesï¼‰æŠŠå¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªå¤åˆå€¼ã€‚å…ƒç»„å†…çš„å€¼å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œå¹¶ä¸è¦æ±‚æ˜¯ç›¸åŒç±»å‹ã€‚</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> http404Error = (404, <span class="string">"Not Found"</span>)</span><br><span class="line">// http404Error çš„ç±»å‹æ˜¯ (Int, String)ï¼Œå€¼æ˜¯ (404, <span class="string">"Not Found"</span>)</span><br><span class="line"><span class="built_in">let</span> (statusCode, statusMessage) = http404Error</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"The status code is \(statusCode)"</span>)</span><br><span class="line">// è¾“å‡ºâ€œThe status code is 404â€</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"The status message is \(statusMessage)"</span>)</span><br><span class="line">// è¾“å‡ºâ€œThe status message is Not Foundâ€</span><br></pre></td></tr></table></figure>
<h6 id="404-â€œNot-Foundâ€-å…ƒç»„æŠŠä¸€ä¸ª-Int-å€¼å’Œä¸€ä¸ª-String-å€¼ç»„åˆèµ·æ¥è¡¨ç¤º-HTTP-çŠ¶æ€ç çš„ä¸¤ä¸ªéƒ¨åˆ†ï¼šä¸€ä¸ªæ•°å­—å’Œä¸€ä¸ªäººç±»å¯è¯»çš„æè¿°ã€‚è¿™ä¸ªå…ƒç»„å¯ä»¥è¢«æè¿°ä¸ºâ€œä¸€ä¸ªç±»å‹ä¸º-Int-String-çš„å…ƒç»„â€ã€‚"><a href="#404-â€œNot-Foundâ€-å…ƒç»„æŠŠä¸€ä¸ª-Int-å€¼å’Œä¸€ä¸ª-String-å€¼ç»„åˆèµ·æ¥è¡¨ç¤º-HTTP-çŠ¶æ€ç çš„ä¸¤ä¸ªéƒ¨åˆ†ï¼šä¸€ä¸ªæ•°å­—å’Œä¸€ä¸ªäººç±»å¯è¯»çš„æè¿°ã€‚è¿™ä¸ªå…ƒç»„å¯ä»¥è¢«æè¿°ä¸ºâ€œä¸€ä¸ªç±»å‹ä¸º-Int-String-çš„å…ƒç»„â€ã€‚" class="headerlink" title="(404, â€œNot Foundâ€) å…ƒç»„æŠŠä¸€ä¸ª Int å€¼å’Œä¸€ä¸ª String å€¼ç»„åˆèµ·æ¥è¡¨ç¤º HTTP çŠ¶æ€ç çš„ä¸¤ä¸ªéƒ¨åˆ†ï¼šä¸€ä¸ªæ•°å­—å’Œä¸€ä¸ªäººç±»å¯è¯»çš„æè¿°ã€‚è¿™ä¸ªå…ƒç»„å¯ä»¥è¢«æè¿°ä¸ºâ€œä¸€ä¸ªç±»å‹ä¸º (Int, String) çš„å…ƒç»„â€ã€‚"></a>(404, â€œNot Foundâ€) å…ƒç»„æŠŠä¸€ä¸ª Int å€¼å’Œä¸€ä¸ª String å€¼ç»„åˆèµ·æ¥è¡¨ç¤º HTTP çŠ¶æ€ç çš„ä¸¤ä¸ªéƒ¨åˆ†ï¼šä¸€ä¸ªæ•°å­—å’Œä¸€ä¸ªäººç±»å¯è¯»çš„æè¿°ã€‚è¿™ä¸ªå…ƒç»„å¯ä»¥è¢«æè¿°ä¸ºâ€œä¸€ä¸ªç±»å‹ä¸º (Int, String) çš„å…ƒç»„â€ã€‚</h6><h4 id="ç±»å‹å®‰å…¨"><a href="#ç±»å‹å®‰å…¨" class="headerlink" title="ç±»å‹å®‰å…¨"></a>ç±»å‹å®‰å…¨</h4><h6 id="Swift-æ˜¯ä¸€é—¨ç±»å‹å®‰å…¨çš„è¯­è¨€ï¼Œè¿™æ„å‘³ç€-Swift-å¯ä»¥è®©ä½ æ¸…æ¥šåœ°çŸ¥é“å€¼çš„ç±»å‹ã€‚å¦‚æœä½ çš„ä»£ç éœ€è¦ä¸€ä¸ª-String-ï¼Œç±»å‹å®‰å…¨ä¼šé˜»æ­¢ä½ ä¸å°å¿ƒä¼ å…¥ä¸€ä¸ª-Int-ã€‚è€Œåœ¨OCä¸­åˆ™ä¸ç„¶ã€‚"><a href="#Swift-æ˜¯ä¸€é—¨ç±»å‹å®‰å…¨çš„è¯­è¨€ï¼Œè¿™æ„å‘³ç€-Swift-å¯ä»¥è®©ä½ æ¸…æ¥šåœ°çŸ¥é“å€¼çš„ç±»å‹ã€‚å¦‚æœä½ çš„ä»£ç éœ€è¦ä¸€ä¸ª-String-ï¼Œç±»å‹å®‰å…¨ä¼šé˜»æ­¢ä½ ä¸å°å¿ƒä¼ å…¥ä¸€ä¸ª-Int-ã€‚è€Œåœ¨OCä¸­åˆ™ä¸ç„¶ã€‚" class="headerlink" title="Swift æ˜¯ä¸€é—¨ç±»å‹å®‰å…¨çš„è¯­è¨€ï¼Œè¿™æ„å‘³ç€ Swift å¯ä»¥è®©ä½ æ¸…æ¥šåœ°çŸ¥é“å€¼çš„ç±»å‹ã€‚å¦‚æœä½ çš„ä»£ç éœ€è¦ä¸€ä¸ª String ï¼Œç±»å‹å®‰å…¨ä¼šé˜»æ­¢ä½ ä¸å°å¿ƒä¼ å…¥ä¸€ä¸ª Int ã€‚è€Œåœ¨OCä¸­åˆ™ä¸ç„¶ã€‚"></a>Swift æ˜¯ä¸€é—¨ç±»å‹å®‰å…¨çš„è¯­è¨€ï¼Œè¿™æ„å‘³ç€ Swift å¯ä»¥è®©ä½ æ¸…æ¥šåœ°çŸ¥é“å€¼çš„ç±»å‹ã€‚å¦‚æœä½ çš„ä»£ç éœ€è¦ä¸€ä¸ª String ï¼Œç±»å‹å®‰å…¨ä¼šé˜»æ­¢ä½ ä¸å°å¿ƒä¼ å…¥ä¸€ä¸ª Int ã€‚è€Œåœ¨OCä¸­åˆ™ä¸ç„¶ã€‚</h6><h4 id="å¸¸é‡-amp-å˜é‡"><a href="#å¸¸é‡-amp-å˜é‡" class="headerlink" title="å¸¸é‡&amp;å˜é‡"></a>å¸¸é‡&amp;å˜é‡</h4><blockquote>
<p>   var - å£°æ˜å˜é‡ã€‚<br>   let - å£°æ˜å˜é‡ã€‚  </p>
</blockquote>
<h4 id="ç±»å‹æ ‡æ³¨"><a href="#ç±»å‹æ ‡æ³¨" class="headerlink" title="ç±»å‹æ ‡æ³¨"></a>ç±»å‹æ ‡æ³¨</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var welcomeMessage: String = <span class="string">"hello world!"</span>;</span><br><span class="line">var welcomeMessage = <span class="string">"hello world!"</span>;</span><br></pre></td></tr></table></figure>
<h6 id="å£°æ˜ä¸€ä¸ªç±»å‹ä¸º-String-ï¼Œåå­—ä¸º-welcomeMessage-çš„å˜é‡ã€‚"><a href="#å£°æ˜ä¸€ä¸ªç±»å‹ä¸º-String-ï¼Œåå­—ä¸º-welcomeMessage-çš„å˜é‡ã€‚" class="headerlink" title="å£°æ˜ä¸€ä¸ªç±»å‹ä¸º String ï¼Œåå­—ä¸º welcomeMessage çš„å˜é‡ã€‚"></a>å£°æ˜ä¸€ä¸ªç±»å‹ä¸º String ï¼Œåå­—ä¸º welcomeMessage çš„å˜é‡ã€‚</h6><blockquote>
<p>å¦‚æœä½ åœ¨å£°æ˜å¸¸é‡æˆ–è€…å˜é‡çš„æ—¶å€™èµ‹äº†ä¸€ä¸ªåˆå§‹å€¼ï¼ŒSwift å¯ä»¥æ¨æ–­å‡ºè¿™ä¸ªå¸¸é‡æˆ–è€…å˜é‡çš„ç±»å‹ã€‚  </p>
</blockquote>
<h4 id="å¸¸é‡å’Œå˜é‡çš„å‘½å"><a href="#å¸¸é‡å’Œå˜é‡çš„å‘½å" class="headerlink" title="å¸¸é‡å’Œå˜é‡çš„å‘½å"></a>å¸¸é‡å’Œå˜é‡çš„å‘½å</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var x = 0.0, y = 0.0;</span><br><span class="line"><span class="built_in">let</span> z = 0.0;</span><br><span class="line"><span class="built_in">let</span> ä½ å¥½ = <span class="string">"hello"</span>;</span><br><span class="line"><span class="built_in">let</span> ğŸ¶ğŸ® = <span class="string">"emoj-dog&amp;cat"</span>;</span><br></pre></td></tr></table></figure>
<h6 id="ä¸Šé¢ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œå¸¸é‡å’Œå˜é‡åå¯ä»¥åŒ…å«ä»»ä½•å­—ç¬¦ï¼ŒåŒ…æ‹¬-Unicode-å­—ç¬¦ã€‚"><a href="#ä¸Šé¢ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œå¸¸é‡å’Œå˜é‡åå¯ä»¥åŒ…å«ä»»ä½•å­—ç¬¦ï¼ŒåŒ…æ‹¬-Unicode-å­—ç¬¦ã€‚" class="headerlink" title="ä¸Šé¢ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œå¸¸é‡å’Œå˜é‡åå¯ä»¥åŒ…å«ä»»ä½•å­—ç¬¦ï¼ŒåŒ…æ‹¬ Unicode å­—ç¬¦ã€‚"></a>ä¸Šé¢ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œå¸¸é‡å’Œå˜é‡åå¯ä»¥åŒ…å«ä»»ä½•å­—ç¬¦ï¼ŒåŒ…æ‹¬ Unicode å­—ç¬¦ã€‚</h6><h4 id="è¾“å‡ºå¸¸é‡å’Œå˜é‡"><a href="#è¾“å‡ºå¸¸é‡å’Œå˜é‡" class="headerlink" title="è¾“å‡ºå¸¸é‡å’Œå˜é‡"></a>è¾“å‡ºå¸¸é‡å’Œå˜é‡</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//swift</span><br><span class="line">// è¾“å‡ºâ€œThe current value of friendlyWelcome is hello world!â€</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"The current value of welcomeMessage is \(welcomeMessage)"</span>)</span><br><span class="line">//iOS</span><br><span class="line">NSLog(<span class="string">"%@"</span>, welcomeMessage);</span><br></pre></td></tr></table></figure>
<h4 id="å¯é€‰ç±»å‹-nil-å¼ºåˆ¶è§£æ"><a href="#å¯é€‰ç±»å‹-nil-å¼ºåˆ¶è§£æ" class="headerlink" title="å¯é€‰ç±»å‹ | nil | å¼ºåˆ¶è§£æ"></a>å¯é€‰ç±»å‹ | nil | å¼ºåˆ¶è§£æ</h4><h6 id="ä½¿ç”¨å¯é€‰ç±»å‹ï¼ˆoptionalsï¼‰æ¥å¤„ç†å€¼å¯èƒ½ç¼ºå¤±çš„æƒ…å†µã€‚å¯é€‰ç±»å‹è¡¨ç¤ºä¸¤ç§å¯èƒ½ï¼š-æˆ–è€…æœ‰å€¼ï¼Œ-ä½ å¯ä»¥è§£æå¯é€‰ç±»å‹è®¿é—®è¿™ä¸ªå€¼ï¼Œ-æˆ–è€…æ ¹æœ¬æ²¡æœ‰å€¼ã€‚"><a href="#ä½¿ç”¨å¯é€‰ç±»å‹ï¼ˆoptionalsï¼‰æ¥å¤„ç†å€¼å¯èƒ½ç¼ºå¤±çš„æƒ…å†µã€‚å¯é€‰ç±»å‹è¡¨ç¤ºä¸¤ç§å¯èƒ½ï¼š-æˆ–è€…æœ‰å€¼ï¼Œ-ä½ å¯ä»¥è§£æå¯é€‰ç±»å‹è®¿é—®è¿™ä¸ªå€¼ï¼Œ-æˆ–è€…æ ¹æœ¬æ²¡æœ‰å€¼ã€‚" class="headerlink" title="ä½¿ç”¨å¯é€‰ç±»å‹ï¼ˆoptionalsï¼‰æ¥å¤„ç†å€¼å¯èƒ½ç¼ºå¤±çš„æƒ…å†µã€‚å¯é€‰ç±»å‹è¡¨ç¤ºä¸¤ç§å¯èƒ½ï¼š æˆ–è€…æœ‰å€¼ï¼Œ ä½ å¯ä»¥è§£æå¯é€‰ç±»å‹è®¿é—®è¿™ä¸ªå€¼ï¼Œ æˆ–è€…æ ¹æœ¬æ²¡æœ‰å€¼ã€‚"></a>ä½¿ç”¨å¯é€‰ç±»å‹ï¼ˆoptionalsï¼‰æ¥å¤„ç†å€¼å¯èƒ½ç¼ºå¤±çš„æƒ…å†µã€‚å¯é€‰ç±»å‹è¡¨ç¤ºä¸¤ç§å¯èƒ½ï¼š æˆ–è€…æœ‰å€¼ï¼Œ ä½ å¯ä»¥è§£æå¯é€‰ç±»å‹è®¿é—®è¿™ä¸ªå€¼ï¼Œ æˆ–è€…æ ¹æœ¬æ²¡æœ‰å€¼ã€‚</h6><blockquote>
<p>æ³¨æ„  </p>
<p>C å’Œ Objective-C ä¸­å¹¶æ²¡æœ‰å¯é€‰ç±»å‹è¿™ä¸ªæ¦‚å¿µã€‚æœ€æ¥è¿‘çš„æ˜¯ Objective-C ä¸­çš„ä¸€ä¸ªç‰¹æ€§ï¼Œä¸€ä¸ªæ–¹æ³•è¦ä¸è¿”å›ä¸€ä¸ªå¯¹è±¡è¦ä¸è¿”å› nilï¼Œnil è¡¨ç¤ºâ€œç¼ºå°‘ä¸€ä¸ªåˆæ³•çš„å¯¹è±¡â€ã€‚ç„¶è€Œï¼Œè¿™åªå¯¹å¯¹è±¡èµ·ä½œç”¨â€”â€”å¯¹äºç»“æ„ä½“ï¼ŒåŸºæœ¬çš„ C ç±»å‹æˆ–è€…æšä¸¾ç±»å‹ä¸èµ·ä½œç”¨ã€‚å¯¹äºè¿™äº›ç±»å‹ï¼ŒObjective-C æ–¹æ³•ä¸€èˆ¬ä¼šè¿”å›ä¸€ä¸ªç‰¹æ®Šå€¼ï¼ˆæ¯”å¦‚ NSNotFoundï¼‰æ¥æš—ç¤ºå€¼ç¼ºå¤±ã€‚è¿™ç§æ–¹æ³•å‡è®¾æ–¹æ³•çš„è°ƒç”¨è€…çŸ¥é“å¹¶è®°å¾—å¯¹ç‰¹æ®Šå€¼è¿›è¡Œåˆ¤æ–­ã€‚ç„¶è€Œï¼ŒSwift çš„å¯é€‰ç±»å‹å¯ä»¥è®©ä½ æš—ç¤ºä»»æ„ç±»å‹çš„å€¼ç¼ºå¤±ï¼Œå¹¶ä¸éœ€è¦ä¸€ä¸ªç‰¹æ®Šå€¼ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> possibleNumber = <span class="string">"123"</span></span><br><span class="line"><span class="built_in">let</span> convertedNumber = Int(possibleNumber)</span><br><span class="line">// convertedNumber è¢«æ¨æµ‹ä¸ºç±»å‹ <span class="string">"Int?"</span>ï¼Œ æˆ–è€…ç±»å‹ <span class="string">"optional Int"</span></span><br></pre></td></tr></table></figure>
<h6 id="å› ä¸ºè¯¥æ„é€ å™¨å¯èƒ½ä¼šå¤±è´¥ï¼Œæ‰€ä»¥å®ƒè¿”å›ä¸€ä¸ªå¯é€‰ç±»å‹ï¼ˆoptionalï¼‰Intï¼Œè€Œä¸æ˜¯ä¸€ä¸ª-Intã€‚"><a href="#å› ä¸ºè¯¥æ„é€ å™¨å¯èƒ½ä¼šå¤±è´¥ï¼Œæ‰€ä»¥å®ƒè¿”å›ä¸€ä¸ªå¯é€‰ç±»å‹ï¼ˆoptionalï¼‰Intï¼Œè€Œä¸æ˜¯ä¸€ä¸ª-Intã€‚" class="headerlink" title="å› ä¸ºè¯¥æ„é€ å™¨å¯èƒ½ä¼šå¤±è´¥ï¼Œæ‰€ä»¥å®ƒè¿”å›ä¸€ä¸ªå¯é€‰ç±»å‹ï¼ˆoptionalï¼‰Intï¼Œè€Œä¸æ˜¯ä¸€ä¸ª Intã€‚"></a>å› ä¸ºè¯¥æ„é€ å™¨å¯èƒ½ä¼šå¤±è´¥ï¼Œæ‰€ä»¥å®ƒè¿”å›ä¸€ä¸ªå¯é€‰ç±»å‹ï¼ˆoptionalï¼‰Intï¼Œè€Œä¸æ˜¯ä¸€ä¸ª Intã€‚</h6><h6 id="ä½ å¯ä»¥ç»™å¯é€‰å˜é‡èµ‹å€¼ä¸º-nil-æ¥è¡¨ç¤ºå®ƒæ²¡æœ‰å€¼ï¼š"><a href="#ä½ å¯ä»¥ç»™å¯é€‰å˜é‡èµ‹å€¼ä¸º-nil-æ¥è¡¨ç¤ºå®ƒæ²¡æœ‰å€¼ï¼š" class="headerlink" title="ä½ å¯ä»¥ç»™å¯é€‰å˜é‡èµ‹å€¼ä¸º nil æ¥è¡¨ç¤ºå®ƒæ²¡æœ‰å€¼ï¼š"></a>ä½ å¯ä»¥ç»™å¯é€‰å˜é‡èµ‹å€¼ä¸º nil æ¥è¡¨ç¤ºå®ƒæ²¡æœ‰å€¼ï¼š</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var serverResponseCode: Int? = 404</span><br><span class="line">// serverResponseCode åŒ…å«ä¸€ä¸ªå¯é€‰çš„ Int å€¼ 404</span><br><span class="line">serverResponseCode = nil</span><br><span class="line">// serverResponseCode ç°åœ¨ä¸åŒ…å«å€¼</span><br><span class="line">var surveyAnswer: String?</span><br><span class="line">// surveyAnswer è¢«è‡ªåŠ¨è®¾ç½®ä¸º nil</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„  </p>
<p>nil ä¸èƒ½ç”¨äºéå¯é€‰çš„å¸¸é‡å’Œå˜é‡ã€‚å¦‚æœä½ çš„ä»£ç ä¸­æœ‰å¸¸é‡æˆ–è€…å˜é‡éœ€è¦å¤„ç†å€¼ç¼ºå¤±çš„æƒ…å†µï¼Œè¯·æŠŠå®ƒä»¬å£°æ˜æˆå¯¹åº”çš„å¯é€‰ç±»å‹ã€‚</p>
<p>Swift çš„ nil å’Œ Objective-C ä¸­çš„ nil å¹¶ä¸ä¸€æ ·ã€‚åœ¨ Objective-C ä¸­ï¼Œnil æ˜¯ä¸€ä¸ªæŒ‡å‘ä¸å­˜åœ¨å¯¹è±¡çš„æŒ‡é’ˆã€‚åœ¨ Swift ä¸­ï¼Œnil ä¸æ˜¯æŒ‡é’ˆâ€”â€”å®ƒæ˜¯ä¸€ä¸ªç¡®å®šçš„å€¼ï¼Œç”¨æ¥è¡¨ç¤ºå€¼ç¼ºå¤±ã€‚ä»»ä½•ç±»å‹çš„å¯é€‰çŠ¶æ€éƒ½å¯ä»¥è¢«è®¾ç½®ä¸º nilï¼Œä¸åªæ˜¯å¯¹è±¡ç±»å‹ã€‚</p>
</blockquote>
<p><img src="/2019/05/21/Swiftå­¦ä¹ ç¬”è®°-ä¸€/nonoptionalvalueError.jpg" alt></p>
<h5 id="å¯é€‰ç»‘å®š"><a href="#å¯é€‰ç»‘å®š" class="headerlink" title="å¯é€‰ç»‘å®š"></a>å¯é€‰ç»‘å®š</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//å¦‚æœ Int(possibleNumber) è¿”å›çš„å¯é€‰ Int åŒ…å«ä¸€ä¸ªå€¼ï¼Œåˆ›å»ºä¸€ä¸ªå«åš actualNumber çš„æ–°å¸¸é‡å¹¶å°†å¯é€‰åŒ…å«çš„å€¼èµ‹ç»™å®ƒã€‚</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">let</span> actualNumber = Int(possibleNumber) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\'\(possibleNumber)\' has an integer value of \(actualNumber)"</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\'\(possibleNumber)\' could not be converted to an integer"</span>)</span><br><span class="line">&#125;</span><br><span class="line">// è¾“å‡ºâ€œ<span class="string">'123'</span> has an <span class="built_in">integer</span> value of 123â€</span><br></pre></td></tr></table></figure>
<h5 id="å¼ºåˆ¶è§£æ"><a href="#å¼ºåˆ¶è§£æ" class="headerlink" title="å¼ºåˆ¶è§£æ"></a>å¼ºåˆ¶è§£æ</h5><h6 id="æœ‰æ—¶å€™åœ¨ç¨‹åºæ¶æ„ä¸­ï¼Œç¬¬ä¸€æ¬¡è¢«èµ‹å€¼ä¹‹åï¼Œå¯ä»¥ç¡®å®šä¸€ä¸ªå¯é€‰ç±»å‹æ€»ä¼šæœ‰å€¼ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¯æ¬¡éƒ½è¦åˆ¤æ–­å’Œè§£æå¯é€‰å€¼æ˜¯éå¸¸ä½æ•ˆçš„ï¼Œå› ä¸ºå¯ä»¥ç¡®å®šå®ƒæ€»ä¼šæœ‰å€¼ã€‚"><a href="#æœ‰æ—¶å€™åœ¨ç¨‹åºæ¶æ„ä¸­ï¼Œç¬¬ä¸€æ¬¡è¢«èµ‹å€¼ä¹‹åï¼Œå¯ä»¥ç¡®å®šä¸€ä¸ªå¯é€‰ç±»å‹æ€»ä¼šæœ‰å€¼ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¯æ¬¡éƒ½è¦åˆ¤æ–­å’Œè§£æå¯é€‰å€¼æ˜¯éå¸¸ä½æ•ˆçš„ï¼Œå› ä¸ºå¯ä»¥ç¡®å®šå®ƒæ€»ä¼šæœ‰å€¼ã€‚" class="headerlink" title="æœ‰æ—¶å€™åœ¨ç¨‹åºæ¶æ„ä¸­ï¼Œç¬¬ä¸€æ¬¡è¢«èµ‹å€¼ä¹‹åï¼Œå¯ä»¥ç¡®å®šä¸€ä¸ªå¯é€‰ç±»å‹æ€»ä¼šæœ‰å€¼ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¯æ¬¡éƒ½è¦åˆ¤æ–­å’Œè§£æå¯é€‰å€¼æ˜¯éå¸¸ä½æ•ˆçš„ï¼Œå› ä¸ºå¯ä»¥ç¡®å®šå®ƒæ€»ä¼šæœ‰å€¼ã€‚"></a>æœ‰æ—¶å€™åœ¨ç¨‹åºæ¶æ„ä¸­ï¼Œç¬¬ä¸€æ¬¡è¢«èµ‹å€¼ä¹‹åï¼Œå¯ä»¥ç¡®å®šä¸€ä¸ªå¯é€‰ç±»å‹æ€»ä¼šæœ‰å€¼ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¯æ¬¡éƒ½è¦åˆ¤æ–­å’Œè§£æå¯é€‰å€¼æ˜¯éå¸¸ä½æ•ˆçš„ï¼Œå› ä¸ºå¯ä»¥ç¡®å®šå®ƒæ€»ä¼šæœ‰å€¼ã€‚</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> possibleString: String? = <span class="string">"An optional string."</span></span><br><span class="line"><span class="built_in">let</span> forcedString: String = possibleString! // éœ€è¦æ„Ÿå¹å·æ¥è·å–å€¼</span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> assumedString: String! = <span class="string">"An implicitly unwrapped optional string."</span></span><br><span class="line"><span class="built_in">let</span> implicitString: String = assumedString  // ä¸éœ€è¦æ„Ÿå¹å·</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„  </p>
<p>å¦‚æœä½ åœ¨éšå¼è§£æå¯é€‰ç±»å‹æ²¡æœ‰å€¼çš„æ—¶å€™å°è¯•å–å€¼ï¼Œä¼šè§¦å‘è¿è¡Œæ—¶é”™è¯¯ã€‚å’Œä½ åœ¨æ²¡æœ‰å€¼çš„æ™®é€šå¯é€‰ç±»å‹åé¢åŠ ä¸€ä¸ªæƒŠå¹å·ä¸€æ ·ã€‚</p>
</blockquote>
<hr>
<h2 id="åŸºæœ¬è¿ç®—ç¬¦"><a href="#åŸºæœ¬è¿ç®—ç¬¦" class="headerlink" title="åŸºæœ¬è¿ç®—ç¬¦"></a>åŸºæœ¬è¿ç®—ç¬¦</h2><blockquote>
<p>è¿™é‡Œåªä»‹ç»OCä¸­æ²¡æœ‰çš„è¿ç®—ç¬¦</p>
</blockquote>
<h4 id="åŒºé—´è¿ç®—ç¬¦"><a href="#åŒºé—´è¿ç®—ç¬¦" class="headerlink" title="åŒºé—´è¿ç®—ç¬¦"></a>åŒºé—´è¿ç®—ç¬¦</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//[a,b] a&lt; b</span><br><span class="line">(a...b)</span><br><span class="line">//[a,b) a&lt;b</span><br><span class="line">(a..&lt;b)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> 1...5 &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\(index) * 5 = \(index * 5)"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="è¿ç®—ç¬¦é‡è½½ï¼ˆç•¥ï¼‰"><a href="#è¿ç®—ç¬¦é‡è½½ï¼ˆç•¥ï¼‰" class="headerlink" title="è¿ç®—ç¬¦é‡è½½ï¼ˆç•¥ï¼‰"></a>è¿ç®—ç¬¦é‡è½½ï¼ˆç•¥ï¼‰</h4><p>##å­—ç¬¦ä¸²å’Œå­—ç¬¦</p>
<h5 id="Swift-çš„-String-ç±»å‹ä¸-Foundation-NSString-ç±»è¿›è¡Œäº†æ— ç¼æ¡¥æ¥ã€‚Foundation-è¿˜å¯¹-String-è¿›è¡Œæ‰©å±•ä½¿å…¶å¯ä»¥è®¿é—®-NSString-ç±»å‹ä¸­å®šä¹‰çš„æ–¹æ³•ã€‚è¿™æ„å‘³ç€è°ƒç”¨é‚£äº›-NSString-çš„æ–¹æ³•ï¼Œä½ æ— éœ€è¿›è¡Œä»»ä½•ç±»å‹è½¬æ¢ã€‚"><a href="#Swift-çš„-String-ç±»å‹ä¸-Foundation-NSString-ç±»è¿›è¡Œäº†æ— ç¼æ¡¥æ¥ã€‚Foundation-è¿˜å¯¹-String-è¿›è¡Œæ‰©å±•ä½¿å…¶å¯ä»¥è®¿é—®-NSString-ç±»å‹ä¸­å®šä¹‰çš„æ–¹æ³•ã€‚è¿™æ„å‘³ç€è°ƒç”¨é‚£äº›-NSString-çš„æ–¹æ³•ï¼Œä½ æ— éœ€è¿›è¡Œä»»ä½•ç±»å‹è½¬æ¢ã€‚" class="headerlink" title="Swift çš„ String ç±»å‹ä¸ Foundation NSString ç±»è¿›è¡Œäº†æ— ç¼æ¡¥æ¥ã€‚Foundation è¿˜å¯¹ String è¿›è¡Œæ‰©å±•ä½¿å…¶å¯ä»¥è®¿é—® NSString ç±»å‹ä¸­å®šä¹‰çš„æ–¹æ³•ã€‚è¿™æ„å‘³ç€è°ƒç”¨é‚£äº› NSString çš„æ–¹æ³•ï¼Œä½ æ— éœ€è¿›è¡Œä»»ä½•ç±»å‹è½¬æ¢ã€‚"></a>Swift çš„ String ç±»å‹ä¸ Foundation NSString ç±»è¿›è¡Œäº†æ— ç¼æ¡¥æ¥ã€‚Foundation è¿˜å¯¹ String è¿›è¡Œæ‰©å±•ä½¿å…¶å¯ä»¥è®¿é—® NSString ç±»å‹ä¸­å®šä¹‰çš„æ–¹æ³•ã€‚è¿™æ„å‘³ç€è°ƒç”¨é‚£äº› NSString çš„æ–¹æ³•ï¼Œä½ æ— éœ€è¿›è¡Œä»»ä½•ç±»å‹è½¬æ¢ã€‚</h5><h4 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h4><h6 id="å¢åˆ æ”¹ã€ä¸‹æ ‡è®¿é—®ç­‰"><a href="#å¢åˆ æ”¹ã€ä¸‹æ ‡è®¿é—®ç­‰" class="headerlink" title="å¢åˆ æ”¹ã€ä¸‹æ ‡è®¿é—®ç­‰"></a>å¢åˆ æ”¹ã€ä¸‹æ ‡è®¿é—®ç­‰</h6><h4 id="ç¼–ç æ–¹å¼"><a href="#ç¼–ç æ–¹å¼" class="headerlink" title="ç¼–ç æ–¹å¼"></a>ç¼–ç æ–¹å¼</h4><h5 id="Objective-Cï¼ˆNSStringï¼‰"><a href="#Objective-Cï¼ˆNSStringï¼‰" class="headerlink" title="Objective-Cï¼ˆNSStringï¼‰"></a>Objective-Cï¼ˆNSStringï¼‰</h5><h6 id="NSStringå¯¹è±¡æ˜¯ç”¨-UTF-16-ç¼–ç çš„ç å…ƒç»„æˆçš„æ•°ç»„ã€‚ç›¸åº”åœ°ï¼Œlength-æ–¹æ³•çš„è¿”å›å€¼ä¹Ÿæ˜¯å­—ç¬¦ä¸²åŒ…å«çš„ç å…ƒä¸ªæ•°ï¼ˆè€Œä¸æ˜¯å­—ç¬¦ä¸ªæ•°ï¼‰ã€‚"><a href="#NSStringå¯¹è±¡æ˜¯ç”¨-UTF-16-ç¼–ç çš„ç å…ƒç»„æˆçš„æ•°ç»„ã€‚ç›¸åº”åœ°ï¼Œlength-æ–¹æ³•çš„è¿”å›å€¼ä¹Ÿæ˜¯å­—ç¬¦ä¸²åŒ…å«çš„ç å…ƒä¸ªæ•°ï¼ˆè€Œä¸æ˜¯å­—ç¬¦ä¸ªæ•°ï¼‰ã€‚" class="headerlink" title="NSStringå¯¹è±¡æ˜¯ç”¨ UTF-16 ç¼–ç çš„ç å…ƒç»„æˆçš„æ•°ç»„ã€‚ç›¸åº”åœ°ï¼Œlength æ–¹æ³•çš„è¿”å›å€¼ä¹Ÿæ˜¯å­—ç¬¦ä¸²åŒ…å«çš„ç å…ƒä¸ªæ•°ï¼ˆè€Œä¸æ˜¯å­—ç¬¦ä¸ªæ•°ï¼‰ã€‚"></a>NSStringå¯¹è±¡æ˜¯ç”¨ UTF-16 ç¼–ç çš„ç å…ƒç»„æˆçš„æ•°ç»„ã€‚ç›¸åº”åœ°ï¼Œlength æ–¹æ³•çš„è¿”å›å€¼ä¹Ÿæ˜¯å­—ç¬¦ä¸²åŒ…å«çš„ç å…ƒä¸ªæ•°ï¼ˆè€Œä¸æ˜¯å­—ç¬¦ä¸ªæ•°ï¼‰ã€‚</h6><h5 id="Swiftï¼ˆStringï¼‰"><a href="#Swiftï¼ˆStringï¼‰" class="headerlink" title="Swiftï¼ˆStringï¼‰"></a>Swiftï¼ˆStringï¼‰</h5><h6 id="æ¯ä¸€ä¸ªå­—ç¬¦ä¸²éƒ½æ˜¯ç”±ç¼–ç æ— å…³çš„-Unicode-å­—ç¬¦ç»„æˆã€‚Swift-ä¸­é€šè¿‡å¤šç§-â€œViewâ€-æ¥åŒºåˆ†å¤„ç†å­—ç¬¦ä¸²çš„æ–¹å¼ï¼ŒUTF8View-è®©ä½ ä»¥-UTF-8-ç¼–ç çš„æ–¹å¼æ¥å¤„ç†å­—ç¬¦ä¸²ï¼Œè€Œ-CharacterView-åˆ™è®©ä½ ä»¥å­—ç¬¦ä¸ºå•ä½å¤„ç†å­—ç¬¦ä¸²è€Œä¸å¿…è€ƒè™‘ç¼–ç çš„é—®é¢˜ã€‚"><a href="#æ¯ä¸€ä¸ªå­—ç¬¦ä¸²éƒ½æ˜¯ç”±ç¼–ç æ— å…³çš„-Unicode-å­—ç¬¦ç»„æˆã€‚Swift-ä¸­é€šè¿‡å¤šç§-â€œViewâ€-æ¥åŒºåˆ†å¤„ç†å­—ç¬¦ä¸²çš„æ–¹å¼ï¼ŒUTF8View-è®©ä½ ä»¥-UTF-8-ç¼–ç çš„æ–¹å¼æ¥å¤„ç†å­—ç¬¦ä¸²ï¼Œè€Œ-CharacterView-åˆ™è®©ä½ ä»¥å­—ç¬¦ä¸ºå•ä½å¤„ç†å­—ç¬¦ä¸²è€Œä¸å¿…è€ƒè™‘ç¼–ç çš„é—®é¢˜ã€‚" class="headerlink" title="æ¯ä¸€ä¸ªå­—ç¬¦ä¸²éƒ½æ˜¯ç”±ç¼–ç æ— å…³çš„ Unicode å­—ç¬¦ç»„æˆã€‚Swift ä¸­é€šè¿‡å¤šç§ â€œViewâ€ æ¥åŒºåˆ†å¤„ç†å­—ç¬¦ä¸²çš„æ–¹å¼ï¼ŒUTF8View è®©ä½ ä»¥ UTF-8 ç¼–ç çš„æ–¹å¼æ¥å¤„ç†å­—ç¬¦ä¸²ï¼Œè€Œ CharacterView åˆ™è®©ä½ ä»¥å­—ç¬¦ä¸ºå•ä½å¤„ç†å­—ç¬¦ä¸²è€Œä¸å¿…è€ƒè™‘ç¼–ç çš„é—®é¢˜ã€‚"></a>æ¯ä¸€ä¸ªå­—ç¬¦ä¸²éƒ½æ˜¯ç”±ç¼–ç æ— å…³çš„ Unicode å­—ç¬¦ç»„æˆã€‚Swift ä¸­é€šè¿‡å¤šç§ â€œViewâ€ æ¥åŒºåˆ†å¤„ç†å­—ç¬¦ä¸²çš„æ–¹å¼ï¼ŒUTF8View è®©ä½ ä»¥ UTF-8 ç¼–ç çš„æ–¹å¼æ¥å¤„ç†å­—ç¬¦ä¸²ï¼Œè€Œ CharacterView åˆ™è®©ä½ ä»¥å­—ç¬¦ä¸ºå•ä½å¤„ç†å­—ç¬¦ä¸²è€Œä¸å¿…è€ƒè™‘ç¼–ç çš„é—®é¢˜ã€‚</h6><p><img src="/2019/05/21/Swiftå­¦ä¹ ç¬”è®°-ä¸€/uft-8_print.jpg" alt></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> codeUnit <span class="keyword">in</span> dogString.utf8 &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\(codeUnit) "</span>, terminator: <span class="string">""</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">""</span>)</span><br><span class="line">// 68 111 103 226 128 188 240 159 144 182</span><br></pre></td></tr></table></figure>
<p><img src="/2019/05/21/Swiftå­¦ä¹ ç¬”è®°-ä¸€/uft-16_print.jpg" alt></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> codeUnit <span class="keyword">in</span> dogString.utf16 &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\(codeUnit) "</span>, terminator: <span class="string">""</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">""</span>)</span><br><span class="line">// 68 111 103 8252 55357 56374</span><br></pre></td></tr></table></figure>
<h2 id="é›†åˆ"><a href="#é›†åˆ" class="headerlink" title="é›†åˆ"></a>é›†åˆ</h2><h4 id="Swift-è¯­è¨€ä¸­çš„-Arraysã€Sets-å’Œ-Dictionaries-ä¸­å­˜å‚¨çš„æ•°æ®å€¼ç±»å‹å¿…é¡»æ˜ç¡®ï¼Œå³è¢«ç°å®ä¸ºæ³›å‹é›†åˆã€‚"><a href="#Swift-è¯­è¨€ä¸­çš„-Arraysã€Sets-å’Œ-Dictionaries-ä¸­å­˜å‚¨çš„æ•°æ®å€¼ç±»å‹å¿…é¡»æ˜ç¡®ï¼Œå³è¢«ç°å®ä¸ºæ³›å‹é›†åˆã€‚" class="headerlink" title="Swift è¯­è¨€ä¸­çš„ Arraysã€Sets å’Œ Dictionaries ä¸­å­˜å‚¨çš„æ•°æ®å€¼ç±»å‹å¿…é¡»æ˜ç¡®ï¼Œå³è¢«ç°å®ä¸ºæ³›å‹é›†åˆã€‚"></a>Swift è¯­è¨€ä¸­çš„ Arraysã€Sets å’Œ Dictionaries ä¸­å­˜å‚¨çš„æ•°æ®å€¼ç±»å‹å¿…é¡»æ˜ç¡®ï¼Œå³è¢«ç°å®ä¸ºæ³›å‹é›†åˆã€‚</h4><h3 id="æ•°ç»„-Arrays"><a href="#æ•°ç»„-Arrays" class="headerlink" title="æ•°ç»„(Arrays)"></a>æ•°ç»„(Arrays)</h3><h5 id="åˆ›å»ºæ•°ç»„"><a href="#åˆ›å»ºæ•°ç»„" class="headerlink" title="åˆ›å»ºæ•°ç»„"></a>åˆ›å»ºæ•°ç»„</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//swift </span><br><span class="line">var shoppingList = [String]()</span><br><span class="line">var shoppingList: [String] = [<span class="string">"Eggs"</span>, <span class="string">"Milk"</span>]</span><br><span class="line">//...å…¶ä»–æ–¹æ³•</span><br><span class="line">//OC</span><br><span class="line">NSArray &lt;NSString *&gt; *shoppingList = @[@<span class="string">"Eggs"</span>, @<span class="string">"Milk"</span>];</span><br></pre></td></tr></table></figure>
<h5 id="ä¿®æ”¹æ•°ç»„"><a href="#ä¿®æ”¹æ•°ç»„" class="headerlink" title="ä¿®æ”¹æ•°ç»„"></a>ä¿®æ”¹æ•°ç»„</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//æ·»åŠ å…ƒç´ </span><br><span class="line">//swift</span><br><span class="line">shoppingList.insert(<span class="string">"Maple Syrup"</span>, at: 0)</span><br><span class="line">shoppingList.append(<span class="string">"Flour"</span>)</span><br><span class="line">//OC</span><br><span class="line">[shoppingList addObject:@<span class="string">"Flour"</span>];</span><br><span class="line">[shoppingList addObject:@<span class="string">"Flour"</span> atIndex:0];</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//æ·»åŠ æ•°ç»„</span><br><span class="line">//swift</span><br><span class="line">shoppingList += [<span class="string">"Chocolate Spread"</span>, <span class="string">"Cheese"</span>, <span class="string">"Butter"</span>];</span><br><span class="line">//OC</span><br><span class="line">[shoppingList addObjectFromArray:[<span class="string">"Chocolate Spread"</span>, <span class="string">"Cheese"</span>, <span class="string">"Butter"</span>]];</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//ä¿®æ”¹æ•°ç»„</span><br><span class="line">//swift</span><br><span class="line">shoppingList[0] = <span class="string">"Six eggs"</span></span><br><span class="line">shoppingList[4...6] = [<span class="string">"Bananas"</span>, <span class="string">"Apples"</span>]</span><br><span class="line">//OC</span><br><span class="line">shoppingList[0] = @<span class="string">"Six eggs"</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//ç§»é™¤å…ƒç´ </span><br><span class="line">//swift</span><br><span class="line">shoppingList.remove(at:0);</span><br><span class="line">//OC</span><br><span class="line">[shoppingList removeObjectAtIndex:0];</span><br></pre></td></tr></table></figure>
<h5 id="æ•°ç»„éå†"><a href="#æ•°ç»„éå†" class="headerlink" title="æ•°ç»„éå†"></a>æ•°ç»„éå†</h5><h6 id="å¦‚æœæˆ‘ä»¬åŒæ—¶éœ€è¦æ¯ä¸ªæ•°æ®é¡¹çš„å€¼å’Œç´¢å¼•å€¼ï¼Œå¯ä»¥ä½¿ç”¨-enumerated-æ–¹æ³•æ¥è¿›è¡Œæ•°ç»„éå†ã€‚enumerated-è¿”å›ä¸€ä¸ªç”±æ¯ä¸€ä¸ªæ•°æ®é¡¹ç´¢å¼•å€¼å’Œæ•°æ®å€¼ç»„æˆçš„å…ƒç»„ã€‚æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªå…ƒç»„åˆ†è§£æˆä¸´æ—¶å¸¸é‡æˆ–è€…å˜é‡æ¥è¿›è¡Œéå†ï¼š"><a href="#å¦‚æœæˆ‘ä»¬åŒæ—¶éœ€è¦æ¯ä¸ªæ•°æ®é¡¹çš„å€¼å’Œç´¢å¼•å€¼ï¼Œå¯ä»¥ä½¿ç”¨-enumerated-æ–¹æ³•æ¥è¿›è¡Œæ•°ç»„éå†ã€‚enumerated-è¿”å›ä¸€ä¸ªç”±æ¯ä¸€ä¸ªæ•°æ®é¡¹ç´¢å¼•å€¼å’Œæ•°æ®å€¼ç»„æˆçš„å…ƒç»„ã€‚æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªå…ƒç»„åˆ†è§£æˆä¸´æ—¶å¸¸é‡æˆ–è€…å˜é‡æ¥è¿›è¡Œéå†ï¼š" class="headerlink" title="å¦‚æœæˆ‘ä»¬åŒæ—¶éœ€è¦æ¯ä¸ªæ•°æ®é¡¹çš„å€¼å’Œç´¢å¼•å€¼ï¼Œå¯ä»¥ä½¿ç”¨ enumerated() æ–¹æ³•æ¥è¿›è¡Œæ•°ç»„éå†ã€‚enumerated() è¿”å›ä¸€ä¸ªç”±æ¯ä¸€ä¸ªæ•°æ®é¡¹ç´¢å¼•å€¼å’Œæ•°æ®å€¼ç»„æˆçš„å…ƒç»„ã€‚æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªå…ƒç»„åˆ†è§£æˆä¸´æ—¶å¸¸é‡æˆ–è€…å˜é‡æ¥è¿›è¡Œéå†ï¼š"></a>å¦‚æœæˆ‘ä»¬åŒæ—¶éœ€è¦æ¯ä¸ªæ•°æ®é¡¹çš„å€¼å’Œç´¢å¼•å€¼ï¼Œå¯ä»¥ä½¿ç”¨ enumerated() æ–¹æ³•æ¥è¿›è¡Œæ•°ç»„éå†ã€‚enumerated() è¿”å›ä¸€ä¸ªç”±æ¯ä¸€ä¸ªæ•°æ®é¡¹ç´¢å¼•å€¼å’Œæ•°æ®å€¼ç»„æˆçš„å…ƒç»„ã€‚æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªå…ƒç»„åˆ†è§£æˆä¸´æ—¶å¸¸é‡æˆ–è€…å˜é‡æ¥è¿›è¡Œéå†ï¼š</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (index, value) <span class="keyword">in</span> shoppingList.<span class="function"><span class="title">enumerated</span></span>() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Item \(String(index + 1)): \(value)"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é›†åˆ-Sets"><a href="#é›†åˆ-Sets" class="headerlink" title="é›†åˆ(Sets)"></a>é›†åˆ(Sets)</h3><h6 id="Q-é›†åˆå’Œæ•°ç»„çš„åŒºåˆ«ï¼Ÿ"><a href="#Q-é›†åˆå’Œæ•°ç»„çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="Q:é›†åˆå’Œæ•°ç»„çš„åŒºåˆ«ï¼Ÿ"></a>Q:é›†åˆå’Œæ•°ç»„çš„åŒºåˆ«ï¼Ÿ</h6><h5 id="é›†åˆï¼ˆSetï¼‰ç”¨æ¥å­˜å‚¨ç›¸åŒç±»å‹å¹¶ä¸”æ²¡æœ‰ç¡®å®šé¡ºåºçš„å€¼ã€‚å½“é›†åˆå…ƒç´ é¡ºåºä¸é‡è¦æ—¶æˆ–è€…å¸Œæœ›ç¡®ä¿æ¯ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡æ—¶å¯ä»¥ä½¿ç”¨é›†åˆè€Œä¸æ˜¯æ•°ç»„ã€‚"><a href="#é›†åˆï¼ˆSetï¼‰ç”¨æ¥å­˜å‚¨ç›¸åŒç±»å‹å¹¶ä¸”æ²¡æœ‰ç¡®å®šé¡ºåºçš„å€¼ã€‚å½“é›†åˆå…ƒç´ é¡ºåºä¸é‡è¦æ—¶æˆ–è€…å¸Œæœ›ç¡®ä¿æ¯ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡æ—¶å¯ä»¥ä½¿ç”¨é›†åˆè€Œä¸æ˜¯æ•°ç»„ã€‚" class="headerlink" title="é›†åˆï¼ˆSetï¼‰ç”¨æ¥å­˜å‚¨ç›¸åŒç±»å‹å¹¶ä¸”æ²¡æœ‰ç¡®å®šé¡ºåºçš„å€¼ã€‚å½“é›†åˆå…ƒç´ é¡ºåºä¸é‡è¦æ—¶æˆ–è€…å¸Œæœ›ç¡®ä¿æ¯ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡æ—¶å¯ä»¥ä½¿ç”¨é›†åˆè€Œä¸æ˜¯æ•°ç»„ã€‚"></a>é›†åˆï¼ˆSetï¼‰ç”¨æ¥å­˜å‚¨ç›¸åŒç±»å‹å¹¶ä¸”æ²¡æœ‰ç¡®å®šé¡ºåºçš„å€¼ã€‚å½“é›†åˆå…ƒç´ é¡ºåºä¸é‡è¦æ—¶æˆ–è€…å¸Œæœ›ç¡®ä¿æ¯ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡æ—¶å¯ä»¥ä½¿ç”¨é›†åˆè€Œä¸æ˜¯æ•°ç»„ã€‚</h5><h5 id="å­˜å‚¨åœ¨é›†åˆä¸­çš„ç±»å‹ï¼Œå¿…é¡»æ˜¯å¯å“ˆå¸ŒåŒ–çš„ã€‚éµå¾ªåè®®Hashableã€‚"><a href="#å­˜å‚¨åœ¨é›†åˆä¸­çš„ç±»å‹ï¼Œå¿…é¡»æ˜¯å¯å“ˆå¸ŒåŒ–çš„ã€‚éµå¾ªåè®®Hashableã€‚" class="headerlink" title="å­˜å‚¨åœ¨é›†åˆä¸­çš„ç±»å‹ï¼Œå¿…é¡»æ˜¯å¯å“ˆå¸ŒåŒ–çš„ã€‚éµå¾ªåè®®Hashableã€‚"></a>å­˜å‚¨åœ¨é›†åˆä¸­çš„ç±»å‹ï¼Œå¿…é¡»æ˜¯å¯å“ˆå¸ŒåŒ–çš„ã€‚éµå¾ªåè®®Hashableã€‚</h5><h5 id="é›†åˆæ“ä½œ"><a href="#é›†åˆæ“ä½œ" class="headerlink" title="é›†åˆæ“ä½œ"></a>é›†åˆæ“ä½œ</h5><p><img src="/2019/05/21/Swiftå­¦ä¹ ç¬”è®°-ä¸€/set_operation.png" alt></p>
<blockquote>
<p>ä½¿ç”¨ intersection(<em>:) æ–¹æ³•æ ¹æ®ä¸¤ä¸ªé›†åˆä¸­éƒ½åŒ…å«çš„å€¼åˆ›å»ºçš„ä¸€ä¸ªæ–°çš„é›†åˆã€‚<br>ä½¿ç”¨ symmetricDifference(</em>:) æ–¹æ³•æ ¹æ®åœ¨ä¸€ä¸ªé›†åˆä¸­ä½†ä¸åœ¨ä¸¤ä¸ªé›†åˆä¸­çš„å€¼åˆ›å»ºä¸€ä¸ªæ–°çš„é›†åˆã€‚<br>ä½¿ç”¨ union(<em>:) æ–¹æ³•æ ¹æ®ä¸¤ä¸ªé›†åˆçš„å€¼åˆ›å»ºä¸€ä¸ªæ–°çš„é›†åˆã€‚<br>ä½¿ç”¨ subtracting(</em>:) æ–¹æ³•æ ¹æ®ä¸åœ¨è¯¥é›†åˆä¸­çš„å€¼åˆ›å»ºä¸€ä¸ªæ–°çš„é›†åˆã€‚</p>
</blockquote>
<h5 id="é›†åˆæˆå‘˜å…³ç³»å’Œç›¸ç­‰"><a href="#é›†åˆæˆå‘˜å…³ç³»å’Œç›¸ç­‰" class="headerlink" title="é›†åˆæˆå‘˜å…³ç³»å’Œç›¸ç­‰"></a>é›†åˆæˆå‘˜å…³ç³»å’Œç›¸ç­‰</h5><p>ç•¥</p>
<h3 id="å­—å…¸"><a href="#å­—å…¸" class="headerlink" title="å­—å…¸"></a>å­—å…¸</h3><h5 id="Swift-çš„å­—å…¸ä½¿ç”¨-Dictionary-lt-Key-Value-gt-å®šä¹‰ï¼Œå…¶ä¸­-Key-æ˜¯å­—å…¸ä¸­é”®çš„æ•°æ®ç±»å‹ï¼ŒValue-æ˜¯å­—å…¸ä¸­å¯¹åº”äºè¿™äº›é”®æ‰€å­˜å‚¨å€¼çš„æ•°æ®ç±»å‹ã€‚"><a href="#Swift-çš„å­—å…¸ä½¿ç”¨-Dictionary-lt-Key-Value-gt-å®šä¹‰ï¼Œå…¶ä¸­-Key-æ˜¯å­—å…¸ä¸­é”®çš„æ•°æ®ç±»å‹ï¼ŒValue-æ˜¯å­—å…¸ä¸­å¯¹åº”äºè¿™äº›é”®æ‰€å­˜å‚¨å€¼çš„æ•°æ®ç±»å‹ã€‚" class="headerlink" title="Swift çš„å­—å…¸ä½¿ç”¨ Dictionary&lt;Key, Value&gt; å®šä¹‰ï¼Œå…¶ä¸­ Key æ˜¯å­—å…¸ä¸­é”®çš„æ•°æ®ç±»å‹ï¼ŒValue æ˜¯å­—å…¸ä¸­å¯¹åº”äºè¿™äº›é”®æ‰€å­˜å‚¨å€¼çš„æ•°æ®ç±»å‹ã€‚"></a>Swift çš„å­—å…¸ä½¿ç”¨ Dictionary&lt;Key, Value&gt; å®šä¹‰ï¼Œå…¶ä¸­ Key æ˜¯å­—å…¸ä¸­é”®çš„æ•°æ®ç±»å‹ï¼ŒValue æ˜¯å­—å…¸ä¸­å¯¹åº”äºè¿™äº›é”®æ‰€å­˜å‚¨å€¼çš„æ•°æ®ç±»å‹ã€‚</h5><blockquote>
<p>ä¸€ä¸ªå­—å…¸çš„ Key ç±»å‹å¿…é¡»éµå¾ª Hashable åè®®ï¼Œå°±åƒ Set çš„å€¼ç±»å‹ã€‚</p>
<p>Objective-Cä¸­NSDictionaryçš„keyå¿…é¡»æ˜¯å­—ç¬¦ä¸²ã€‚<br>Objective-Cä¸­NSDictionaryå¯¹å­˜å‚¨çš„Valueç±»å‹ä¸€è‡´æ€§æ²¡æœ‰è¦æ±‚ã€‚ä½†åªèƒ½å­˜å‚¨å¯¹è±¡ã€‚</p>
</blockquote>
<h5 id="å­—å…¸åˆ›å»º"><a href="#å­—å…¸åˆ›å»º" class="headerlink" title="å­—å…¸åˆ›å»º"></a>å­—å…¸åˆ›å»º</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//swift</span><br><span class="line">var namesOfIntegers = [Int: String]()</span><br><span class="line">// namesOfIntegers æ˜¯ä¸€ä¸ªç©ºçš„ [Int: String] å­—å…¸</span><br><span class="line">//OC</span><br><span class="line">NSDictionary  *namesOfIntegers = [NSDictionary dictionary];</span><br></pre></td></tr></table></figure>
<h5 id="è®¿é—®-amp-ä¿®æ”¹å­—å…¸"><a href="#è®¿é—®-amp-ä¿®æ”¹å­—å…¸" class="headerlink" title="è®¿é—®&amp;ä¿®æ”¹å­—å…¸"></a>è®¿é—®&amp;ä¿®æ”¹å­—å…¸</h5><h6 id="åŸºæœ¬ä¸€è‡´"><a href="#åŸºæœ¬ä¸€è‡´" class="headerlink" title="åŸºæœ¬ä¸€è‡´"></a>åŸºæœ¬ä¸€è‡´</h6><h5 id="å­—å…¸éå†"><a href="#å­—å…¸éå†" class="headerlink" title="å­—å…¸éå†"></a>å­—å…¸éå†</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//swift</span><br><span class="line"><span class="keyword">for</span> (key, value) <span class="keyword">in</span> namesOfIntegers &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\(key): \(value)"</span>)</span><br><span class="line">&#125;</span><br><span class="line">//OC</span><br><span class="line"><span class="keyword">for</span> (key <span class="keyword">in</span> namesOfIntegers.allKeys) &#123;</span><br><span class="line">	//key is NSString object</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (value <span class="keyword">in</span> namesOfIntegers.allValues) &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ§åˆ¶æµ"><a href="#æ§åˆ¶æµ" class="headerlink" title="æ§åˆ¶æµ"></a>æ§åˆ¶æµ</h3>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jackthenoob.github.io/2019/05/21/iOSå†…å­˜ç®¡ç†-AutoreleasePool/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="å‚æ¨å°æ¢³é›¨">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lyddwn">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/21/iOSå†…å­˜ç®¡ç†-AutoreleasePool/" itemprop="url">iOSå†…å­˜ç®¡ç†-AutoreleasePool</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-21T11:15:26+08:00">
                2019-05-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="å¾…ç¼–å†™"><a href="#å¾…ç¼–å†™" class="headerlink" title="å¾…ç¼–å†™"></a>å¾…ç¼–å†™</h3>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jackthenoob.github.io/2019/05/21/Lighter-your-ViewController-æ‰“é€ è½»é‡åŒ–ViewController/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="å‚æ¨å°æ¢³é›¨">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lyddwn">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/21/Lighter-your-ViewController-æ‰“é€ è½»é‡åŒ–ViewController/" itemprop="url">Lighter your ViewController-æ‰“é€ è½»é‡åŒ–ViewController</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-21T10:18:23+08:00">
                2019-05-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><h5 id="éšç€ä¸šåŠ¡çš„ä¸æ–­è¿­ä»£ï¼Œä¸€äº›è¾ƒå¤§çš„ä¸šåŠ¡æ¨¡å—çš„ViewControllerå˜å¾—æä¸ºè‡ƒè‚¿ï¼Œè¶Šæ¥è¶Šéš¾ä»¥ç»´æŠ¤ã€‚ä¸ºViewControllerç˜¦èº«å˜æˆçš„è¶Šæ¥è¶Šè¿«åˆ‡ã€‚"><a href="#éšç€ä¸šåŠ¡çš„ä¸æ–­è¿­ä»£ï¼Œä¸€äº›è¾ƒå¤§çš„ä¸šåŠ¡æ¨¡å—çš„ViewControllerå˜å¾—æä¸ºè‡ƒè‚¿ï¼Œè¶Šæ¥è¶Šéš¾ä»¥ç»´æŠ¤ã€‚ä¸ºViewControllerç˜¦èº«å˜æˆçš„è¶Šæ¥è¶Šè¿«åˆ‡ã€‚" class="headerlink" title="éšç€ä¸šåŠ¡çš„ä¸æ–­è¿­ä»£ï¼Œä¸€äº›è¾ƒå¤§çš„ä¸šåŠ¡æ¨¡å—çš„ViewControllerå˜å¾—æä¸ºè‡ƒè‚¿ï¼Œè¶Šæ¥è¶Šéš¾ä»¥ç»´æŠ¤ã€‚ä¸ºViewControllerç˜¦èº«å˜æˆçš„è¶Šæ¥è¶Šè¿«åˆ‡ã€‚"></a>éšç€ä¸šåŠ¡çš„ä¸æ–­è¿­ä»£ï¼Œä¸€äº›è¾ƒå¤§çš„ä¸šåŠ¡æ¨¡å—çš„ViewControllerå˜å¾—æä¸ºè‡ƒè‚¿ï¼Œè¶Šæ¥è¶Šéš¾ä»¥ç»´æŠ¤ã€‚ä¸ºViewControllerç˜¦èº«å˜æˆçš„è¶Šæ¥è¶Šè¿«åˆ‡ã€‚</h5><h5 id="æä¾›ä¸€äº›æ€è·¯ä¾›å¤§å®¶å‚è€ƒã€‚"><a href="#æä¾›ä¸€äº›æ€è·¯ä¾›å¤§å®¶å‚è€ƒã€‚" class="headerlink" title="æä¾›ä¸€äº›æ€è·¯ä¾›å¤§å®¶å‚è€ƒã€‚"></a>æä¾›ä¸€äº›æ€è·¯ä¾›å¤§å®¶å‚è€ƒã€‚</h5><h2 id="1-Separate-out-UITableViewDataSource-and-UITableViewDelegate"><a href="#1-Separate-out-UITableViewDataSource-and-UITableViewDelegate" class="headerlink" title="1.Separate out UITableViewDataSource and UITableViewDelegate"></a>1.Separate out UITableViewDataSource and UITableViewDelegate</h2><h5 id="å‰¥ç¦»DataSourceå’Œå…¶ä»–Protocols"><a href="#å‰¥ç¦»DataSourceå’Œå…¶ä»–Protocols" class="headerlink" title="å‰¥ç¦»DataSourceå’Œå…¶ä»–Protocols"></a>å‰¥ç¦»DataSourceå’Œå…¶ä»–Protocols</h5><h5 id="è¿™ä¸ªæ–¹æ³•æœ€æ—©è§äºobjc-ioä¸Šã€‚å°†UITableViewDatasourceç›¸å…³çš„ä»£ç ä»ViewControllerä¸­æŠ½å–å¹¶å°è£…åˆ°å…¶ä»–ç±»ä¸­ã€‚ä¹Ÿç›¸å¯¹æé«˜é‡ç”¨æ€§ã€‚"><a href="#è¿™ä¸ªæ–¹æ³•æœ€æ—©è§äºobjc-ioä¸Šã€‚å°†UITableViewDatasourceç›¸å…³çš„ä»£ç ä»ViewControllerä¸­æŠ½å–å¹¶å°è£…åˆ°å…¶ä»–ç±»ä¸­ã€‚ä¹Ÿç›¸å¯¹æé«˜é‡ç”¨æ€§ã€‚" class="headerlink" title="è¿™ä¸ªæ–¹æ³•æœ€æ—©è§äºobjc.ioä¸Šã€‚å°†UITableViewDatasourceç›¸å…³çš„ä»£ç ä»ViewControllerä¸­æŠ½å–å¹¶å°è£…åˆ°å…¶ä»–ç±»ä¸­ã€‚ä¹Ÿç›¸å¯¹æé«˜é‡ç”¨æ€§ã€‚"></a>è¿™ä¸ªæ–¹æ³•æœ€æ—©è§äºobjc.ioä¸Šã€‚å°†UITableViewDatasourceç›¸å…³çš„ä»£ç ä»ViewControllerä¸­æŠ½å–å¹¶å°è£…åˆ°å…¶ä»–ç±»ä¸­ã€‚ä¹Ÿç›¸å¯¹æé«˜é‡ç”¨æ€§ã€‚</h5><h5 id="ç„¶åæˆ‘åœ¨ä¸€ä¸ªè¾ƒå¤§çš„ä¸šåŠ¡ä¸­å°è¯•ä½¿ç”¨äº†ã€‚æ„Ÿè§‰æ•ˆæœä¸€èˆ¬ã€‚"><a href="#ç„¶åæˆ‘åœ¨ä¸€ä¸ªè¾ƒå¤§çš„ä¸šåŠ¡ä¸­å°è¯•ä½¿ç”¨äº†ã€‚æ„Ÿè§‰æ•ˆæœä¸€èˆ¬ã€‚" class="headerlink" title="ç„¶åæˆ‘åœ¨ä¸€ä¸ªè¾ƒå¤§çš„ä¸šåŠ¡ä¸­å°è¯•ä½¿ç”¨äº†ã€‚æ„Ÿè§‰æ•ˆæœä¸€èˆ¬ã€‚"></a>ç„¶åæˆ‘åœ¨ä¸€ä¸ªè¾ƒå¤§çš„ä¸šåŠ¡ä¸­å°è¯•ä½¿ç”¨äº†ã€‚æ„Ÿè§‰æ•ˆæœä¸€èˆ¬ã€‚</h5><h5 id="ç¤ºä¾‹å·¥ç¨‹ä¸­ï¼Œæœ‰ä¸€ä¸ªç±»PhotosViewControllerï¼Œé‡Œé¢åŸæœ¬æœ‰å¦‚ä¸‹3ä¸ªæ–¹æ³•ï¼š"><a href="#ç¤ºä¾‹å·¥ç¨‹ä¸­ï¼Œæœ‰ä¸€ä¸ªç±»PhotosViewControllerï¼Œé‡Œé¢åŸæœ¬æœ‰å¦‚ä¸‹3ä¸ªæ–¹æ³•ï¼š" class="headerlink" title="ç¤ºä¾‹å·¥ç¨‹ä¸­ï¼Œæœ‰ä¸€ä¸ªç±»PhotosViewControllerï¼Œé‡Œé¢åŸæœ¬æœ‰å¦‚ä¸‹3ä¸ªæ–¹æ³•ï¼š"></a>ç¤ºä¾‹å·¥ç¨‹ä¸­ï¼Œæœ‰ä¸€ä¸ªç±»PhotosViewControllerï¼Œé‡Œé¢åŸæœ¬æœ‰å¦‚ä¸‹3ä¸ªæ–¹æ³•ï¼š</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pragma mark Pragma </span></span><br><span class="line">  </span><br><span class="line">- (Photo*)photoAtIndexPath:(NSIndexPath*)indexPath &#123; </span><br><span class="line">	<span class="built_in">return</span> photos[(NSUInteger)indexPath.row]; </span><br><span class="line">&#125; </span><br><span class="line">  </span><br><span class="line">- (NSInteger)tableView:(UITableView*)tableView </span><br><span class="line">numberOfRowsInSection:(NSInteger)section &#123; </span><br><span class="line">	<span class="built_in">return</span> photos.count; </span><br><span class="line">&#125; </span><br><span class="line">  </span><br><span class="line">- (UITableViewCell*)tableView:(UITableView*)tableView </span><br><span class="line">cellForRowAtIndexPath:(NSIndexPath*)indexPath &#123; </span><br><span class="line">	PhotoCell* cell = [tableView dequeueReusableCellWithIdentifier:PhotoCellIdentifier forIndexPath:indexPath]; </span><br><span class="line">	Photo* photo = [self photoAtIndexPath:indexPath]; </span><br><span class="line">	cell.label.text = photo.name; </span><br><span class="line">	<span class="built_in">return</span> cell; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼Œè¿™é‡Œé€šè¿‡ä¸€ä¸ªblockæ¥é…ç½®UITableViewCellï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨delegateå¯¹UITableViewCellè¿›è¡Œé…ç½®ï¼Œè¿™ä¸»è¦å–å†³äºå¼€å‘è€…ã€‚"><a href="#å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼Œè¿™é‡Œé€šè¿‡ä¸€ä¸ªblockæ¥é…ç½®UITableViewCellï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨delegateå¯¹UITableViewCellè¿›è¡Œé…ç½®ï¼Œè¿™ä¸»è¦å–å†³äºå¼€å‘è€…ã€‚" class="headerlink" title="å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼Œè¿™é‡Œé€šè¿‡ä¸€ä¸ªblockæ¥é…ç½®UITableViewCellï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨delegateå¯¹UITableViewCellè¿›è¡Œé…ç½®ï¼Œè¿™ä¸»è¦å–å†³äºå¼€å‘è€…ã€‚"></a>å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼Œè¿™é‡Œé€šè¿‡ä¸€ä¸ªblockæ¥é…ç½®UITableViewCellï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨delegateå¯¹UITableViewCellè¿›è¡Œé…ç½®ï¼Œè¿™ä¸»è¦å–å†³äºå¼€å‘è€…ã€‚</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">@implementation ArrayDataSource </span><br><span class="line">  </span><br><span class="line">- (id)itemAtIndexPath:(NSIndexPath*)indexPath &#123; </span><br><span class="line">	<span class="built_in">return</span> items[(NSUInteger)indexPath.row]; </span><br><span class="line">&#125; </span><br><span class="line">  </span><br><span class="line">- (NSInteger)tableView:(UITableView*)tableView </span><br><span class="line">numberOfRowsInSection:(NSInteger)section &#123; </span><br><span class="line">	<span class="built_in">return</span> items.count; </span><br><span class="line">&#125; </span><br><span class="line">  </span><br><span class="line">- (UITableViewCell*)tableView:(UITableView*)tableView </span><br><span class="line">cellForRowAtIndexPath:(NSIndexPath*)indexPath &#123; </span><br><span class="line">	id cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier forIndexPath:indexPath]; </span><br><span class="line">	id item = [self itemAtIndexPath:indexPath]; </span><br><span class="line">	configureCellBlock(cell,item); </span><br><span class="line">	<span class="built_in">return</span> cell; </span><br><span class="line">&#125; </span><br><span class="line">  </span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<h5 id="å¯ä»¥æŠŠViewControllerä¸­çš„é‚£3ä¸ªæ–¹æ³•ç§»é™¤æ‰ï¼Œå¹¶åˆ›å»ºè‡ªå®šä¹‰ç±»çš„ä¸€ä¸ªç¤ºä¾‹å¯¹è±¡ï¼Œç„¶åå°†å…¶è®¾ç½®ä¸ºtable-viewçš„data-sourceï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºã€‚"><a href="#å¯ä»¥æŠŠViewControllerä¸­çš„é‚£3ä¸ªæ–¹æ³•ç§»é™¤æ‰ï¼Œå¹¶åˆ›å»ºè‡ªå®šä¹‰ç±»çš„ä¸€ä¸ªç¤ºä¾‹å¯¹è±¡ï¼Œç„¶åå°†å…¶è®¾ç½®ä¸ºtable-viewçš„data-sourceï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºã€‚" class="headerlink" title="å¯ä»¥æŠŠViewControllerä¸­çš„é‚£3ä¸ªæ–¹æ³•ç§»é™¤æ‰ï¼Œå¹¶åˆ›å»ºè‡ªå®šä¹‰ç±»çš„ä¸€ä¸ªç¤ºä¾‹å¯¹è±¡ï¼Œç„¶åå°†å…¶è®¾ç½®ä¸ºtable viewçš„data sourceï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºã€‚"></a>å¯ä»¥æŠŠViewControllerä¸­çš„é‚£3ä¸ªæ–¹æ³•ç§»é™¤æ‰ï¼Œå¹¶åˆ›å»ºè‡ªå®šä¹‰ç±»çš„ä¸€ä¸ªç¤ºä¾‹å¯¹è±¡ï¼Œç„¶åå°†å…¶è®¾ç½®ä¸ºtable viewçš„data sourceï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºã€‚</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">&#123;</span><br><span class="line">	void (^configureCell)(PhotoCell*, Photo*) = ^(PhotoCell* cell, Photo* photo) &#123; </span><br><span class="line">		cell.label.text = photo.name; </span><br><span class="line">	&#125;; </span><br><span class="line">	photosArrayDataSource = [[ArrayDataSource alloc] initWithItems:photos </span><br><span class="line">	cellIdentifier:PhotoCellIdentifier </span><br><span class="line">	configureCellBlock:configureCell]; </span><br><span class="line">	self.tableView.dataSource = photosArrayDataSource; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-Category"><a href="#2-Category" class="headerlink" title="2.Category"></a>2.Category</h2><h5 id="å¤§ä½“æ€è·¯ï¼šæ ¹æ®å½“å‰ä¸šåŠ¡ï¼Œå°†ä¸šåŠ¡æ‹†åˆ†ä¸ºå¤šä¸ªå°æ¨¡å—ã€‚åˆ›å»ºå¤šä¸ªCategoryï¼Œæ¯ä¸ªCategoryå¤„ç†è‡ªå·±ä¸šåŠ¡æ¨¡å—é€»è¾‘ã€‚"><a href="#å¤§ä½“æ€è·¯ï¼šæ ¹æ®å½“å‰ä¸šåŠ¡ï¼Œå°†ä¸šåŠ¡æ‹†åˆ†ä¸ºå¤šä¸ªå°æ¨¡å—ã€‚åˆ›å»ºå¤šä¸ªCategoryï¼Œæ¯ä¸ªCategoryå¤„ç†è‡ªå·±ä¸šåŠ¡æ¨¡å—é€»è¾‘ã€‚" class="headerlink" title="å¤§ä½“æ€è·¯ï¼šæ ¹æ®å½“å‰ä¸šåŠ¡ï¼Œå°†ä¸šåŠ¡æ‹†åˆ†ä¸ºå¤šä¸ªå°æ¨¡å—ã€‚åˆ›å»ºå¤šä¸ªCategoryï¼Œæ¯ä¸ªCategoryå¤„ç†è‡ªå·±ä¸šåŠ¡æ¨¡å—é€»è¾‘ã€‚"></a>å¤§ä½“æ€è·¯ï¼šæ ¹æ®å½“å‰ä¸šåŠ¡ï¼Œå°†ä¸šåŠ¡æ‹†åˆ†ä¸ºå¤šä¸ªå°æ¨¡å—ã€‚åˆ›å»ºå¤šä¸ªCategoryï¼Œæ¯ä¸ªCategoryå¤„ç†è‡ªå·±ä¸šåŠ¡æ¨¡å—é€»è¾‘ã€‚</h5><h5 id="ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š"><a href="#ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š" class="headerlink" title="ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š"></a>ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">OrderViewController.h</span><br><span class="line">OrderViewController.m</span><br><span class="line">OrderViewController+NetRequest.h</span><br><span class="line">OrderViewController+NetRequest.m</span><br><span class="line">OrderViewController+DataReport.h</span><br><span class="line">OrderViewController+DataReport.m</span><br><span class="line">OrderViewController+Address.h</span><br><span class="line">OrderViewController+Address.m</span><br><span class="line">OrderViewController+Shipping.h</span><br><span class="line">OrderViewController+Shipping.m</span><br><span class="line">OrderViewController+Invoice.h</span><br><span class="line">OrderViewController+Invoice.m</span><br><span class="line">OrderViewController+Wallet.h</span><br><span class="line">OrderViewController+Wallet.m</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h5 id="ä¸Šé¢ç›®å½•ç»“æ„æ˜¯ç”µå•†çš„è®¢å•æäº¤é¡µé¢ï¼Œä¸»ä½“åŠŸèƒ½å¯ä»¥åˆ†ä¸ºè®¢å•åœ°å€ã€é…é€ä¿¡æ¯ã€å‘ç¥¨ã€é’±åŒ…ç­‰ä¸šåŠ¡åœºæ™¯ï¼Œå†å°†ç½‘ç»œè¯·æ±‚ã€æ•°æ®ä¸ŠæŠ¥ç­‰åŠŸèƒ½æŠ½ç¦»åˆ°ç›¸åº”Categoryï¼Œå®ç°ä»£ç åˆ†ç¦»ã€‚å‡å°‘ä¸»ViewControllerå¤§å°ã€‚"><a href="#ä¸Šé¢ç›®å½•ç»“æ„æ˜¯ç”µå•†çš„è®¢å•æäº¤é¡µé¢ï¼Œä¸»ä½“åŠŸèƒ½å¯ä»¥åˆ†ä¸ºè®¢å•åœ°å€ã€é…é€ä¿¡æ¯ã€å‘ç¥¨ã€é’±åŒ…ç­‰ä¸šåŠ¡åœºæ™¯ï¼Œå†å°†ç½‘ç»œè¯·æ±‚ã€æ•°æ®ä¸ŠæŠ¥ç­‰åŠŸèƒ½æŠ½ç¦»åˆ°ç›¸åº”Categoryï¼Œå®ç°ä»£ç åˆ†ç¦»ã€‚å‡å°‘ä¸»ViewControllerå¤§å°ã€‚" class="headerlink" title="ä¸Šé¢ç›®å½•ç»“æ„æ˜¯ç”µå•†çš„è®¢å•æäº¤é¡µé¢ï¼Œä¸»ä½“åŠŸèƒ½å¯ä»¥åˆ†ä¸ºè®¢å•åœ°å€ã€é…é€ä¿¡æ¯ã€å‘ç¥¨ã€é’±åŒ…ç­‰ä¸šåŠ¡åœºæ™¯ï¼Œå†å°†ç½‘ç»œè¯·æ±‚ã€æ•°æ®ä¸ŠæŠ¥ç­‰åŠŸèƒ½æŠ½ç¦»åˆ°ç›¸åº”Categoryï¼Œå®ç°ä»£ç åˆ†ç¦»ã€‚å‡å°‘ä¸»ViewControllerå¤§å°ã€‚"></a>ä¸Šé¢ç›®å½•ç»“æ„æ˜¯ç”µå•†çš„è®¢å•æäº¤é¡µé¢ï¼Œä¸»ä½“åŠŸèƒ½å¯ä»¥åˆ†ä¸ºè®¢å•åœ°å€ã€é…é€ä¿¡æ¯ã€å‘ç¥¨ã€é’±åŒ…ç­‰ä¸šåŠ¡åœºæ™¯ï¼Œå†å°†ç½‘ç»œè¯·æ±‚ã€æ•°æ®ä¸ŠæŠ¥ç­‰åŠŸèƒ½æŠ½ç¦»åˆ°ç›¸åº”Categoryï¼Œå®ç°ä»£ç åˆ†ç¦»ã€‚å‡å°‘ä¸»ViewControllerå¤§å°ã€‚</h5><h5 id="å…¶å®è¿˜æ˜¯æ¯”è¾ƒç®€å•æœ‰æ•ˆçš„æ–¹æ³•ã€‚å¦‚æœè¦è¯´å¼Šç«¯ï¼Œé‚£æœ€å¤šå¯èƒ½ç¨å¾®æ‹–æ…¢AppåŠ è½½é€Ÿåº¦å§ã€‚"><a href="#å…¶å®è¿˜æ˜¯æ¯”è¾ƒç®€å•æœ‰æ•ˆçš„æ–¹æ³•ã€‚å¦‚æœè¦è¯´å¼Šç«¯ï¼Œé‚£æœ€å¤šå¯èƒ½ç¨å¾®æ‹–æ…¢AppåŠ è½½é€Ÿåº¦å§ã€‚" class="headerlink" title="å…¶å®è¿˜æ˜¯æ¯”è¾ƒç®€å•æœ‰æ•ˆçš„æ–¹æ³•ã€‚å¦‚æœè¦è¯´å¼Šç«¯ï¼Œé‚£æœ€å¤šå¯èƒ½ç¨å¾®æ‹–æ…¢AppåŠ è½½é€Ÿåº¦å§ã€‚"></a>å…¶å®è¿˜æ˜¯æ¯”è¾ƒç®€å•æœ‰æ•ˆçš„æ–¹æ³•ã€‚å¦‚æœè¦è¯´å¼Šç«¯ï¼Œé‚£æœ€å¤šå¯èƒ½ç¨å¾®æ‹–æ…¢AppåŠ è½½é€Ÿåº¦å§ã€‚</h5><h2 id="3-æ¨¡å—åŒ–è°ƒç”¨"><a href="#3-æ¨¡å—åŒ–è°ƒç”¨" class="headerlink" title="3.æ¨¡å—åŒ–è°ƒç”¨"></a>3.æ¨¡å—åŒ–è°ƒç”¨</h2><h5 id="å°†ä¸€äº›ä¸šåŠ¡é€»è¾‘å¤„ç†å°è£…åˆ°å…¶ä»–ç±»ä¸­ï¼Œç”±ViewControllerå»è°ƒç”¨è¿™äº›ç±»ã€‚å³ï¼šä¸è¦åœ¨ViewControllerä¸­åšä¸€äº›å¤æ‚çš„é€»è¾‘å¤„ç†ï¼Œç”±å…¶ä»–ç±»ä»£ç†å¤„ç†"><a href="#å°†ä¸€äº›ä¸šåŠ¡é€»è¾‘å¤„ç†å°è£…åˆ°å…¶ä»–ç±»ä¸­ï¼Œç”±ViewControllerå»è°ƒç”¨è¿™äº›ç±»ã€‚å³ï¼šä¸è¦åœ¨ViewControllerä¸­åšä¸€äº›å¤æ‚çš„é€»è¾‘å¤„ç†ï¼Œç”±å…¶ä»–ç±»ä»£ç†å¤„ç†" class="headerlink" title="å°†ä¸€äº›ä¸šåŠ¡é€»è¾‘å¤„ç†å°è£…åˆ°å…¶ä»–ç±»ä¸­ï¼Œç”±ViewControllerå»è°ƒç”¨è¿™äº›ç±»ã€‚å³ï¼šä¸è¦åœ¨ViewControllerä¸­åšä¸€äº›å¤æ‚çš„é€»è¾‘å¤„ç†ï¼Œç”±å…¶ä»–ç±»ä»£ç†å¤„ç†"></a>å°†ä¸€äº›ä¸šåŠ¡é€»è¾‘å¤„ç†å°è£…åˆ°å…¶ä»–ç±»ä¸­ï¼Œç”±ViewControllerå»è°ƒç”¨è¿™äº›ç±»ã€‚å³ï¼šä¸è¦åœ¨ViewControllerä¸­åšä¸€äº›å¤æ‚çš„é€»è¾‘å¤„ç†ï¼Œç”±å…¶ä»–ç±»ä»£ç†å¤„ç†</h5><h4 id="æ¯”å¦‚ï¼š"><a href="#æ¯”å¦‚ï¼š" class="headerlink" title="æ¯”å¦‚ï¼š"></a>æ¯”å¦‚ï¼š</h4><ul>
<li>ä¸šåŠ¡Modelè‡ªå·±é€»è¾‘è‡ªå·±å¤„ç†ã€‚VCåªè´Ÿè´£è°ƒç”¨ã€‚</li>
<li>ç½‘ç»œè¯·æ±‚ã€æ•°æ®å¤„ç†æœåŠ¡åˆ›å»ºç›¸åº”Managerç±»å¤„ç†ã€‚</li>
<li>å¤æ‚çš„Viewç»“æ„é€šè¿‡æ·»åŠ å­ViewControllerå®ç°ã€‚</li>
<li>ä½¿ç”¨KVOã€‚æ¯”å¦‚ä½ åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ï¼Œæ•°æ®éœ€è¦é€šè¿‡ç½‘ç»œè¯·æ±‚åˆ·æ–°[webservice fetchNewData],é€šè¿‡KVOå¯ä»¥å®ç°å¤šä¸ªç½‘ç»œè¯·æ±‚çš„è‡ªåŠ¨åˆ·æ–°ã€‚</li>
</ul>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><h5 id="è¿™äº›åªæ˜¯å¯ä¾›å¤§å®¶å‚è€ƒçš„æ–¹æ³•ï¼Œç›®çš„æ˜¯ä¸ºäº†ç¼–å†™æ–¹ä¾¿ç»´æŠ¤çš„ã€å¯è¯»æ€§é«˜çš„ä»£ç ã€‚"><a href="#è¿™äº›åªæ˜¯å¯ä¾›å¤§å®¶å‚è€ƒçš„æ–¹æ³•ï¼Œç›®çš„æ˜¯ä¸ºäº†ç¼–å†™æ–¹ä¾¿ç»´æŠ¤çš„ã€å¯è¯»æ€§é«˜çš„ä»£ç ã€‚" class="headerlink" title="è¿™äº›åªæ˜¯å¯ä¾›å¤§å®¶å‚è€ƒçš„æ–¹æ³•ï¼Œç›®çš„æ˜¯ä¸ºäº†ç¼–å†™æ–¹ä¾¿ç»´æŠ¤çš„ã€å¯è¯»æ€§é«˜çš„ä»£ç ã€‚"></a>è¿™äº›åªæ˜¯å¯ä¾›å¤§å®¶å‚è€ƒçš„æ–¹æ³•ï¼Œç›®çš„æ˜¯ä¸ºäº†ç¼–å†™æ–¹ä¾¿ç»´æŠ¤çš„ã€å¯è¯»æ€§é«˜çš„ä»£ç ã€‚</h5><h5 id="å†™äº2015-01-19"><a href="#å†™äº2015-01-19" class="headerlink" title="å†™äº2015-01-19"></a>å†™äº2015-01-19</h5>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jackthenoob.github.io/2019/05/20/iOSå†…å­˜ç®¡ç†-ARC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="å‚æ¨å°æ¢³é›¨">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lyddwn">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/20/iOSå†…å­˜ç®¡ç†-ARC/" itemprop="url">iOSå†…å­˜ç®¡ç†-ARC</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-20T18:25:19+08:00">
                2019-05-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="ä»€ä¹ˆæ˜¯ARC"><a href="#ä»€ä¹ˆæ˜¯ARC" class="headerlink" title="ä»€ä¹ˆæ˜¯ARC"></a>ä»€ä¹ˆæ˜¯ARC</h2><h5 id="ARCï¼ˆAutomatic-Reference-Countingï¼‰æ˜¯åœ¨iOS5-0æ¨å‡ºçš„æ–°åŠŸèƒ½ï¼Œæ˜¯æ–°LLVM-3-0ç¼–è¯‘å™¨çš„ç‰¹æ€§ã€‚ç®€å•åœ°è¯´ï¼Œå°±æ˜¯ä»£ç ä¸­è‡ªåŠ¨åŠ å…¥äº†retain-releaseï¼ŒåŸå…ˆéœ€è¦æ‰‹åŠ¨æ·»åŠ çš„ç”¨æ¥å¤„ç†å†…å­˜ç®¡ç†çš„å¼•ç”¨è®¡æ•°çš„ä»£ç å¯ä»¥è‡ªåŠ¨åœ°ç”±ç¼–è¯‘å™¨å®Œæˆäº†ã€‚"><a href="#ARCï¼ˆAutomatic-Reference-Countingï¼‰æ˜¯åœ¨iOS5-0æ¨å‡ºçš„æ–°åŠŸèƒ½ï¼Œæ˜¯æ–°LLVM-3-0ç¼–è¯‘å™¨çš„ç‰¹æ€§ã€‚ç®€å•åœ°è¯´ï¼Œå°±æ˜¯ä»£ç ä¸­è‡ªåŠ¨åŠ å…¥äº†retain-releaseï¼ŒåŸå…ˆéœ€è¦æ‰‹åŠ¨æ·»åŠ çš„ç”¨æ¥å¤„ç†å†…å­˜ç®¡ç†çš„å¼•ç”¨è®¡æ•°çš„ä»£ç å¯ä»¥è‡ªåŠ¨åœ°ç”±ç¼–è¯‘å™¨å®Œæˆäº†ã€‚" class="headerlink" title="ARCï¼ˆAutomatic Reference Countingï¼‰æ˜¯åœ¨iOS5.0æ¨å‡ºçš„æ–°åŠŸèƒ½ï¼Œæ˜¯æ–°LLVM 3.0ç¼–è¯‘å™¨çš„ç‰¹æ€§ã€‚ç®€å•åœ°è¯´ï¼Œå°±æ˜¯ä»£ç ä¸­è‡ªåŠ¨åŠ å…¥äº†retain/releaseï¼ŒåŸå…ˆéœ€è¦æ‰‹åŠ¨æ·»åŠ çš„ç”¨æ¥å¤„ç†å†…å­˜ç®¡ç†çš„å¼•ç”¨è®¡æ•°çš„ä»£ç å¯ä»¥è‡ªåŠ¨åœ°ç”±ç¼–è¯‘å™¨å®Œæˆäº†ã€‚"></a>ARCï¼ˆAutomatic Reference Countingï¼‰æ˜¯åœ¨iOS5.0æ¨å‡ºçš„æ–°åŠŸèƒ½ï¼Œæ˜¯æ–°LLVM 3.0ç¼–è¯‘å™¨çš„ç‰¹æ€§ã€‚ç®€å•åœ°è¯´ï¼Œå°±æ˜¯ä»£ç ä¸­è‡ªåŠ¨åŠ å…¥äº†retain/releaseï¼ŒåŸå…ˆéœ€è¦æ‰‹åŠ¨æ·»åŠ çš„ç”¨æ¥å¤„ç†å†…å­˜ç®¡ç†çš„å¼•ç”¨è®¡æ•°çš„ä»£ç å¯ä»¥è‡ªåŠ¨åœ°ç”±ç¼–è¯‘å™¨å®Œæˆäº†ã€‚</h5><h5 id="ARCæ˜¯ç¼–è¯‘å™¨ç‰¹æ€§ï¼Œè€Œä¸æ˜¯iOSè¿è¡Œæ—¶ç‰¹æ€§ï¼ˆé™¤äº†weakæŒ‡é’ˆç³»ç»Ÿ-å®ƒä¼šåœ¨æ‰€æŒ‡å‘çš„å†…å­˜é‡Šæ”¾çš„æ—¶å€™è‡ªåŠ¨å°†è‡ªèº«ç½®ä¸ºnilï¼Œåé¢æ–‡ç« ä¼šä¸“é—¨è¯´ä¸‹ï¼‰ï¼Œå®ƒä¹Ÿä¸æ˜¯å…¶å®ƒè¯­è¨€ä¸­çš„åƒåœ¾æ”¶é›†å™¨ã€‚å› æ­¤ARCå’Œæ‰‹åŠ¨å†…å­˜ç®¡ç†æ€§èƒ½æ˜¯ä¸€æ ·çš„ï¼Œæœ‰äº›æ—¶å€™è¿˜èƒ½æ›´åŠ å¿«é€Ÿï¼Œå› ä¸ºç¼–è¯‘å™¨è¿˜å¯ä»¥æ‰§è¡ŒæŸäº›ä¼˜åŒ–ã€‚"><a href="#ARCæ˜¯ç¼–è¯‘å™¨ç‰¹æ€§ï¼Œè€Œä¸æ˜¯iOSè¿è¡Œæ—¶ç‰¹æ€§ï¼ˆé™¤äº†weakæŒ‡é’ˆç³»ç»Ÿ-å®ƒä¼šåœ¨æ‰€æŒ‡å‘çš„å†…å­˜é‡Šæ”¾çš„æ—¶å€™è‡ªåŠ¨å°†è‡ªèº«ç½®ä¸ºnilï¼Œåé¢æ–‡ç« ä¼šä¸“é—¨è¯´ä¸‹ï¼‰ï¼Œå®ƒä¹Ÿä¸æ˜¯å…¶å®ƒè¯­è¨€ä¸­çš„åƒåœ¾æ”¶é›†å™¨ã€‚å› æ­¤ARCå’Œæ‰‹åŠ¨å†…å­˜ç®¡ç†æ€§èƒ½æ˜¯ä¸€æ ·çš„ï¼Œæœ‰äº›æ—¶å€™è¿˜èƒ½æ›´åŠ å¿«é€Ÿï¼Œå› ä¸ºç¼–è¯‘å™¨è¿˜å¯ä»¥æ‰§è¡ŒæŸäº›ä¼˜åŒ–ã€‚" class="headerlink" title="ARCæ˜¯ç¼–è¯‘å™¨ç‰¹æ€§ï¼Œè€Œä¸æ˜¯iOSè¿è¡Œæ—¶ç‰¹æ€§ï¼ˆé™¤äº†weakæŒ‡é’ˆç³»ç»Ÿ,å®ƒä¼šåœ¨æ‰€æŒ‡å‘çš„å†…å­˜é‡Šæ”¾çš„æ—¶å€™è‡ªåŠ¨å°†è‡ªèº«ç½®ä¸ºnilï¼Œåé¢æ–‡ç« ä¼šä¸“é—¨è¯´ä¸‹ï¼‰ï¼Œå®ƒä¹Ÿä¸æ˜¯å…¶å®ƒè¯­è¨€ä¸­çš„åƒåœ¾æ”¶é›†å™¨ã€‚å› æ­¤ARCå’Œæ‰‹åŠ¨å†…å­˜ç®¡ç†æ€§èƒ½æ˜¯ä¸€æ ·çš„ï¼Œæœ‰äº›æ—¶å€™è¿˜èƒ½æ›´åŠ å¿«é€Ÿï¼Œå› ä¸ºç¼–è¯‘å™¨è¿˜å¯ä»¥æ‰§è¡ŒæŸäº›ä¼˜åŒ–ã€‚"></a>ARCæ˜¯ç¼–è¯‘å™¨ç‰¹æ€§ï¼Œè€Œä¸æ˜¯iOSè¿è¡Œæ—¶ç‰¹æ€§ï¼ˆé™¤äº†weakæŒ‡é’ˆç³»ç»Ÿ,å®ƒä¼šåœ¨æ‰€æŒ‡å‘çš„å†…å­˜é‡Šæ”¾çš„æ—¶å€™è‡ªåŠ¨å°†è‡ªèº«ç½®ä¸ºnilï¼Œåé¢æ–‡ç« ä¼šä¸“é—¨è¯´ä¸‹ï¼‰ï¼Œå®ƒä¹Ÿä¸æ˜¯å…¶å®ƒè¯­è¨€ä¸­çš„åƒåœ¾æ”¶é›†å™¨ã€‚å› æ­¤ARCå’Œæ‰‹åŠ¨å†…å­˜ç®¡ç†æ€§èƒ½æ˜¯ä¸€æ ·çš„ï¼Œæœ‰äº›æ—¶å€™è¿˜èƒ½æ›´åŠ å¿«é€Ÿï¼Œå› ä¸ºç¼–è¯‘å™¨è¿˜å¯ä»¥æ‰§è¡ŒæŸäº›ä¼˜åŒ–ã€‚</h5><h2 id="ARCä½¿ç”¨è§„åˆ™"><a href="#ARCä½¿ç”¨è§„åˆ™" class="headerlink" title="ARCä½¿ç”¨è§„åˆ™"></a>ARCä½¿ç”¨è§„åˆ™</h2><h5 id="ARCä¸‹ï¼ŒæŒ‡é’ˆä¿æŒå¯¹è±¡çš„ç”Ÿå‘½ã€‚åªæœ‰è¿˜æœ‰ä¸€ä¸ªå˜é‡ï¼ˆstrongï¼‰æŒ‡å‘å¯¹è±¡ï¼Œå¯¹è±¡å°±ä¼šä¿æŒåœ¨å†…å­˜ä¸­ã€‚"><a href="#ARCä¸‹ï¼ŒæŒ‡é’ˆä¿æŒå¯¹è±¡çš„ç”Ÿå‘½ã€‚åªæœ‰è¿˜æœ‰ä¸€ä¸ªå˜é‡ï¼ˆstrongï¼‰æŒ‡å‘å¯¹è±¡ï¼Œå¯¹è±¡å°±ä¼šä¿æŒåœ¨å†…å­˜ä¸­ã€‚" class="headerlink" title="ARCä¸‹ï¼ŒæŒ‡é’ˆä¿æŒå¯¹è±¡çš„ç”Ÿå‘½ã€‚åªæœ‰è¿˜æœ‰ä¸€ä¸ªå˜é‡ï¼ˆstrongï¼‰æŒ‡å‘å¯¹è±¡ï¼Œå¯¹è±¡å°±ä¼šä¿æŒåœ¨å†…å­˜ä¸­ã€‚"></a>ARCä¸‹ï¼ŒæŒ‡é’ˆä¿æŒå¯¹è±¡çš„ç”Ÿå‘½ã€‚åªæœ‰è¿˜æœ‰ä¸€ä¸ªå˜é‡ï¼ˆstrongï¼‰æŒ‡å‘å¯¹è±¡ï¼Œå¯¹è±¡å°±ä¼šä¿æŒåœ¨å†…å­˜ä¸­ã€‚</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NSString *firstName = self.textField.text;</span><br></pre></td></tr></table></figure>
<p><img src="/2019/05/20/iOSå†…å­˜ç®¡ç†-ARC/a001.png" alt></p>
<h5 id="ä¸Šå›¾ä¸­ï¼ŒfirstNameç°åœ¨æŒ‡å‘NSStringå¯¹è±¡ï¼Œè¿™æ—¶è¿™ä¸ªå¯¹è±¡ï¼ˆtextFieldçš„å†…å®¹å­—ç¬¦ä¸²ï¼‰å°†è¢«holdä½ã€‚æ¯”å¦‚ç”¨å­—ç¬¦ä¸²-â€œRayâ€ä½œä¸ºä¾‹å­ï¼ˆå­—ç¬¦ä¸²çš„retainCountè§„åˆ™å’Œæ™®é€šçš„å¯¹è±¡ä¸ä¸€æ ·ï¼Œè¿™è¾¹å°±æŠŠå®ƒå½“ä½œä¸€ä¸ªæ™®é€šçš„å¯¹è±¡æ¥çœ‹å§â€¦ï¼‰ï¼Œè¿™ä¸ªæ—¶å€™firstNameæŒæœ‰äº†-â€Rayâ€ã€‚retainCount-ï¼-1ã€‚"><a href="#ä¸Šå›¾ä¸­ï¼ŒfirstNameç°åœ¨æŒ‡å‘NSStringå¯¹è±¡ï¼Œè¿™æ—¶è¿™ä¸ªå¯¹è±¡ï¼ˆtextFieldçš„å†…å®¹å­—ç¬¦ä¸²ï¼‰å°†è¢«holdä½ã€‚æ¯”å¦‚ç”¨å­—ç¬¦ä¸²-â€œRayâ€ä½œä¸ºä¾‹å­ï¼ˆå­—ç¬¦ä¸²çš„retainCountè§„åˆ™å’Œæ™®é€šçš„å¯¹è±¡ä¸ä¸€æ ·ï¼Œè¿™è¾¹å°±æŠŠå®ƒå½“ä½œä¸€ä¸ªæ™®é€šçš„å¯¹è±¡æ¥çœ‹å§â€¦ï¼‰ï¼Œè¿™ä¸ªæ—¶å€™firstNameæŒæœ‰äº†-â€Rayâ€ã€‚retainCount-ï¼-1ã€‚" class="headerlink" title="ä¸Šå›¾ä¸­ï¼ŒfirstNameç°åœ¨æŒ‡å‘NSStringå¯¹è±¡ï¼Œè¿™æ—¶è¿™ä¸ªå¯¹è±¡ï¼ˆtextFieldçš„å†…å®¹å­—ç¬¦ä¸²ï¼‰å°†è¢«holdä½ã€‚æ¯”å¦‚ç”¨å­—ç¬¦ä¸²@â€œRayâ€ä½œä¸ºä¾‹å­ï¼ˆå­—ç¬¦ä¸²çš„retainCountè§„åˆ™å’Œæ™®é€šçš„å¯¹è±¡ä¸ä¸€æ ·ï¼Œè¿™è¾¹å°±æŠŠå®ƒå½“ä½œä¸€ä¸ªæ™®é€šçš„å¯¹è±¡æ¥çœ‹å§â€¦ï¼‰ï¼Œè¿™ä¸ªæ—¶å€™firstNameæŒæœ‰äº†@â€Rayâ€ã€‚retainCount ï¼ 1ã€‚"></a>ä¸Šå›¾ä¸­ï¼ŒfirstNameç°åœ¨æŒ‡å‘NSStringå¯¹è±¡ï¼Œè¿™æ—¶è¿™ä¸ªå¯¹è±¡ï¼ˆtextFieldçš„å†…å®¹å­—ç¬¦ä¸²ï¼‰å°†è¢«holdä½ã€‚æ¯”å¦‚ç”¨å­—ç¬¦ä¸²@â€œRayâ€ä½œä¸ºä¾‹å­ï¼ˆå­—ç¬¦ä¸²çš„retainCountè§„åˆ™å’Œæ™®é€šçš„å¯¹è±¡ä¸ä¸€æ ·ï¼Œè¿™è¾¹å°±æŠŠå®ƒå½“ä½œä¸€ä¸ªæ™®é€šçš„å¯¹è±¡æ¥çœ‹å§â€¦ï¼‰ï¼Œè¿™ä¸ªæ—¶å€™firstNameæŒæœ‰äº†@â€Rayâ€ã€‚retainCount ï¼ 1ã€‚</h5><p><img src="/2019/05/20/iOSå†…å­˜ç®¡ç†-ARC/a002.png" alt></p>
<h5 id="ä¸€ä¸ªå¯¹è±¡å¯ä»¥æœ‰å¤šä¸ªæ‹¥æœ‰è€…-å¦‚ä¸Šå›¾ï¼šretainCount-2ã€‚"><a href="#ä¸€ä¸ªå¯¹è±¡å¯ä»¥æœ‰å¤šä¸ªæ‹¥æœ‰è€…-å¦‚ä¸Šå›¾ï¼šretainCount-2ã€‚" class="headerlink" title="ä¸€ä¸ªå¯¹è±¡å¯ä»¥æœ‰å¤šä¸ªæ‹¥æœ‰è€…,å¦‚ä¸Šå›¾ï¼šretainCount=2ã€‚"></a>ä¸€ä¸ªå¯¹è±¡å¯ä»¥æœ‰å¤šä¸ªæ‹¥æœ‰è€…,å¦‚ä¸Šå›¾ï¼šretainCount=2ã€‚</h5><h5 id="å½“ç”¨æˆ·ä¿®æ”¹äº†æ–‡æœ¬æ¡†çš„textåï¼Œæ­¤æ—¶textå±æ€§ä¼šæŒ‡å‘æ–°çš„å¯¹è±¡ã€‚åŸæ¥çš„å¯¹è±¡ä»æœ‰firstNameæŒ‡å‘"><a href="#å½“ç”¨æˆ·ä¿®æ”¹äº†æ–‡æœ¬æ¡†çš„textåï¼Œæ­¤æ—¶textå±æ€§ä¼šæŒ‡å‘æ–°çš„å¯¹è±¡ã€‚åŸæ¥çš„å¯¹è±¡ä»æœ‰firstNameæŒ‡å‘" class="headerlink" title="å½“ç”¨æˆ·ä¿®æ”¹äº†æ–‡æœ¬æ¡†çš„textåï¼Œæ­¤æ—¶textå±æ€§ä¼šæŒ‡å‘æ–°çš„å¯¹è±¡ã€‚åŸæ¥çš„å¯¹è±¡ä»æœ‰firstNameæŒ‡å‘"></a>å½“ç”¨æˆ·ä¿®æ”¹äº†æ–‡æœ¬æ¡†çš„textåï¼Œæ­¤æ—¶textå±æ€§ä¼šæŒ‡å‘æ–°çš„å¯¹è±¡ã€‚åŸæ¥çš„å¯¹è±¡ä»æœ‰firstNameæŒ‡å‘</h5><p><img src="/2019/05/20/iOSå†…å­˜ç®¡ç†-ARC/a003.png" alt></p>
<h5 id="è€Œå½“firstNameæŒ‡å‘å¦å¤–ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œæˆ–è€…è¶…å‡ºä½œç”¨åŸŸèŒƒå›´æ—¶ï¼Œ-â€œRayâ€è¿™ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ä¸åœ¨æœ‰ä»»ä½•æ‰€æœ‰è€…ï¼ŒretainCount-ï¼-0ï¼Œå°†ä¼šè¢«é‡Šæ”¾ã€‚"><a href="#è€Œå½“firstNameæŒ‡å‘å¦å¤–ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œæˆ–è€…è¶…å‡ºä½œç”¨åŸŸèŒƒå›´æ—¶ï¼Œ-â€œRayâ€è¿™ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ä¸åœ¨æœ‰ä»»ä½•æ‰€æœ‰è€…ï¼ŒretainCount-ï¼-0ï¼Œå°†ä¼šè¢«é‡Šæ”¾ã€‚" class="headerlink" title="è€Œå½“firstNameæŒ‡å‘å¦å¤–ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œæˆ–è€…è¶…å‡ºä½œç”¨åŸŸèŒƒå›´æ—¶ï¼Œ@â€œRayâ€è¿™ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ä¸åœ¨æœ‰ä»»ä½•æ‰€æœ‰è€…ï¼ŒretainCount ï¼ 0ï¼Œå°†ä¼šè¢«é‡Šæ”¾ã€‚"></a>è€Œå½“firstNameæŒ‡å‘å¦å¤–ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œæˆ–è€…è¶…å‡ºä½œç”¨åŸŸèŒƒå›´æ—¶ï¼Œ@â€œRayâ€è¿™ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ä¸åœ¨æœ‰ä»»ä½•æ‰€æœ‰è€…ï¼ŒretainCount ï¼ 0ï¼Œå°†ä¼šè¢«é‡Šæ”¾ã€‚</h5><p><img src="/2019/05/20/iOSå†…å­˜ç®¡ç†-ARC/a004.png" alt></p>
<h5 id="WARNING-ä¸Šé¢æˆ‘ä»¬æ‰€è¯´çš„firstNameã€textè¿™äº›æŒ‡é’ˆéƒ½æ˜¯â€œStrongâ€ï¼Œèƒ½å¤Ÿä¿æŒå¯¹è±¡çš„ç”Ÿå‘½ã€‚é»˜è®¤çš„å®ä¾‹ã€æœ¬åœ°å˜é‡éƒ½æ˜¯Strongç±»å‹ã€‚"><a href="#WARNING-ä¸Šé¢æˆ‘ä»¬æ‰€è¯´çš„firstNameã€textè¿™äº›æŒ‡é’ˆéƒ½æ˜¯â€œStrongâ€ï¼Œèƒ½å¤Ÿä¿æŒå¯¹è±¡çš„ç”Ÿå‘½ã€‚é»˜è®¤çš„å®ä¾‹ã€æœ¬åœ°å˜é‡éƒ½æ˜¯Strongç±»å‹ã€‚" class="headerlink" title="WARNING:ä¸Šé¢æˆ‘ä»¬æ‰€è¯´çš„firstNameã€textè¿™äº›æŒ‡é’ˆéƒ½æ˜¯â€œStrongâ€ï¼Œèƒ½å¤Ÿä¿æŒå¯¹è±¡çš„ç”Ÿå‘½ã€‚é»˜è®¤çš„å®ä¾‹ã€æœ¬åœ°å˜é‡éƒ½æ˜¯Strongç±»å‹ã€‚"></a>WARNING:ä¸Šé¢æˆ‘ä»¬æ‰€è¯´çš„firstNameã€textè¿™äº›æŒ‡é’ˆéƒ½æ˜¯â€œStrongâ€ï¼Œèƒ½å¤Ÿä¿æŒå¯¹è±¡çš„ç”Ÿå‘½ã€‚é»˜è®¤çš„å®ä¾‹ã€æœ¬åœ°å˜é‡éƒ½æ˜¯Strongç±»å‹ã€‚</h5><h5 id="è¿™è¾¹å†æä¸‹åˆšåˆšæˆ‘ä»¬è¯´åˆ°çš„ARCçš„ä¸€ä¸ªåŸºæœ¬è§„åˆ™ã€‚"><a href="#è¿™è¾¹å†æä¸‹åˆšåˆšæˆ‘ä»¬è¯´åˆ°çš„ARCçš„ä¸€ä¸ªåŸºæœ¬è§„åˆ™ã€‚" class="headerlink" title="è¿™è¾¹å†æä¸‹åˆšåˆšæˆ‘ä»¬è¯´åˆ°çš„ARCçš„ä¸€ä¸ªåŸºæœ¬è§„åˆ™ã€‚"></a>è¿™è¾¹å†æä¸‹åˆšåˆšæˆ‘ä»¬è¯´åˆ°çš„ARCçš„ä¸€ä¸ªåŸºæœ¬è§„åˆ™ã€‚</h5><font color="#e4393c" size="3">åªè¦æŸä¸ªå¯¹è±¡è¢«ä»»ä¸€strongæŒ‡é’ˆæŒ‡å‘ï¼Œé‚£ä¹ˆå®ƒå°†ä¸ä¼šè¢«é”€æ¯ã€‚å¦‚æœå¯¹è±¡æ²¡æœ‰è¢«ä»»ä½•strongæŒ‡é’ˆæŒ‡å‘ï¼Œé‚£ä¹ˆå°±å°†è¢«é”€æ¯ã€‚</font>

<h4 id="weakæŒ‡é’ˆ"><a href="#weakæŒ‡é’ˆ" class="headerlink" title="weakæŒ‡é’ˆ"></a>weakæŒ‡é’ˆ</h4><h5 id="weakå˜é‡ä»ç„¶æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œä½†ä¸æ˜¯å¯¹è±¡çš„æ‹¥æœ‰è€…ï¼š"><a href="#weakå˜é‡ä»ç„¶æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œä½†ä¸æ˜¯å¯¹è±¡çš„æ‹¥æœ‰è€…ï¼š" class="headerlink" title="weakå˜é‡ä»ç„¶æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œä½†ä¸æ˜¯å¯¹è±¡çš„æ‹¥æœ‰è€…ï¼š"></a>weakå˜é‡ä»ç„¶æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œä½†ä¸æ˜¯å¯¹è±¡çš„æ‹¥æœ‰è€…ï¼š</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__weak NSString *weakName = self.textField.text;</span><br></pre></td></tr></table></figure>
<p><img src="/2019/05/20/iOSå†…å­˜ç®¡ç†-ARC/a005.png" alt></p>
<h5 id="å½“self-textField-textæŒ‡å‘å…¶ä»–å¯¹è±¡ï¼Œ-æ­¤æ—¶weakNameä¼šè‡ªåŠ¨å˜æˆnilï¼Œç§°ä¸ºâ€œzeroingâ€-weak-pointerï¼š"><a href="#å½“self-textField-textæŒ‡å‘å…¶ä»–å¯¹è±¡ï¼Œ-æ­¤æ—¶weakNameä¼šè‡ªåŠ¨å˜æˆnilï¼Œç§°ä¸ºâ€œzeroingâ€-weak-pointerï¼š" class="headerlink" title="å½“self.textField.textæŒ‡å‘å…¶ä»–å¯¹è±¡ï¼Œ æ­¤æ—¶weakNameä¼šè‡ªåŠ¨å˜æˆnilï¼Œç§°ä¸ºâ€œzeroingâ€ weak pointerï¼š"></a>å½“self.textField.textæŒ‡å‘å…¶ä»–å¯¹è±¡ï¼Œ æ­¤æ—¶weakNameä¼šè‡ªåŠ¨å˜æˆnilï¼Œç§°ä¸ºâ€œzeroingâ€ weak pointerï¼š</h5><p><img src="/2019/05/20/iOSå†…å­˜ç®¡ç†-ARC/a006.png" alt></p>
<h5 id="å®ƒè§£å†³äº†MRCä¸‹assignæŒ‡é’ˆæŒ‡å‘å·²ç»é‡Šæ”¾çš„å¯¹è±¡ï¼ˆæˆ‘ä»¬å¸¸è¯´çš„é‡æŒ‡é’ˆï¼‰ï¼Œå¯¹å®ƒå‘é€æ¶ˆæ¯Crashçš„é—®é¢˜ã€‚"><a href="#å®ƒè§£å†³äº†MRCä¸‹assignæŒ‡é’ˆæŒ‡å‘å·²ç»é‡Šæ”¾çš„å¯¹è±¡ï¼ˆæˆ‘ä»¬å¸¸è¯´çš„é‡æŒ‡é’ˆï¼‰ï¼Œå¯¹å®ƒå‘é€æ¶ˆæ¯Crashçš„é—®é¢˜ã€‚" class="headerlink" title="å®ƒè§£å†³äº†MRCä¸‹assignæŒ‡é’ˆæŒ‡å‘å·²ç»é‡Šæ”¾çš„å¯¹è±¡ï¼ˆæˆ‘ä»¬å¸¸è¯´çš„é‡æŒ‡é’ˆï¼‰ï¼Œå¯¹å®ƒå‘é€æ¶ˆæ¯Crashçš„é—®é¢˜ã€‚"></a>å®ƒè§£å†³äº†MRCä¸‹assignæŒ‡é’ˆæŒ‡å‘å·²ç»é‡Šæ”¾çš„å¯¹è±¡ï¼ˆæˆ‘ä»¬å¸¸è¯´çš„é‡æŒ‡é’ˆï¼‰ï¼Œå¯¹å®ƒå‘é€æ¶ˆæ¯Crashçš„é—®é¢˜ã€‚</h5><p><img src="/2019/05/20/iOSå†…å­˜ç®¡ç†-ARC/a007.png" alt></p>
<hr>
<h5 id="ARCå¯ä»¥èŠ‚çœä»£ç ï¼ˆMRCä¸‹å±æ€§èµ‹å€¼ï¼‰ï¼Œæˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒä»€ä¹ˆæ—¶å€™retainã€releaseã€‚ä½†æ˜¯ä¸æ„å‘³ç€æˆ‘ä»¬ä¸éœ€è¦è€ƒè™‘å†…å­˜ç®¡ç†"><a href="#ARCå¯ä»¥èŠ‚çœä»£ç ï¼ˆMRCä¸‹å±æ€§èµ‹å€¼ï¼‰ï¼Œæˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒä»€ä¹ˆæ—¶å€™retainã€releaseã€‚ä½†æ˜¯ä¸æ„å‘³ç€æˆ‘ä»¬ä¸éœ€è¦è€ƒè™‘å†…å­˜ç®¡ç†" class="headerlink" title="ARCå¯ä»¥èŠ‚çœä»£ç ï¼ˆMRCä¸‹å±æ€§èµ‹å€¼ï¼‰ï¼Œæˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒä»€ä¹ˆæ—¶å€™retainã€releaseã€‚ä½†æ˜¯ä¸æ„å‘³ç€æˆ‘ä»¬ä¸éœ€è¦è€ƒè™‘å†…å­˜ç®¡ç†"></a>ARCå¯ä»¥èŠ‚çœä»£ç ï¼ˆMRCä¸‹å±æ€§èµ‹å€¼ï¼‰ï¼Œæˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒä»€ä¹ˆæ—¶å€™retainã€releaseã€‚ä½†æ˜¯ä¸æ„å‘³ç€æˆ‘ä»¬ä¸éœ€è¦è€ƒè™‘å†…å­˜ç®¡ç†</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">id obj = [array objectAtIndex:0];</span><br><span class="line">[array removeObjectAtIndex:0];</span><br><span class="line">NSLog(@<span class="string">"%@"</span>, obj);</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç åœ¨MRCä¸‹æ˜¯é”™è¯¯çš„ã€‚ä»Arrayä¸­ç§»é™¤ä¸€ä¸ªå¯¹è±¡ä¼šä½¿å¯¹è±¡ä¸å¯ç”¨ï¼Œå¯¹è±¡ä¸å±äºArrayæ—¶ä¼šç«‹å³è¢«é‡Šæ”¾ã€‚éšåNSLog()æ‰“å°è¯¥å¯¹è±¡å°±ä¼šå¯¼è‡´åº”ç”¨å´©æºƒã€‚ </p>
<p>è€Œåœ¨ARCä¸­è¿™æ®µä»£ç æ˜¯å®Œå…¨åˆæ³•çš„ã€‚å› ä¸ºobjå˜é‡æ˜¯ä¸€ä¸ªstrongæŒ‡é’ˆï¼Œå®ƒæˆä¸ºäº†å¯¹è±¡çš„æ‹¥æœ‰è€…ï¼Œä»Arrayä¸­ç§»é™¤è¯¥å¯¹è±¡ä¹Ÿä¸ä¼šå¯¼è‡´å¯¹è±¡è¢«é‡Šæ”¾ã€‚ </p>
<h5 id="å†…å­˜ç®¡ç†å…¶ä»–æ³¨æ„ç‚¹ï¼š"><a href="#å†…å­˜ç®¡ç†å…¶ä»–æ³¨æ„ç‚¹ï¼š" class="headerlink" title="å†…å­˜ç®¡ç†å…¶ä»–æ³¨æ„ç‚¹ï¼š"></a>å†…å­˜ç®¡ç†å…¶ä»–æ³¨æ„ç‚¹ï¼š</h5><ul>
<li>é€šçŸ¥ã€KVOéœ€è¦é‡Šæ”¾ã€‚ï¼ˆå¯åœ¨deallocä¸­ï¼‰</li>
<li>NSTimerï¼ˆrep=trueï¼‰ä¼šå¼ºå¼•ç”¨ä¼ å…¥çš„targetã€‚</li>
<li>Block</li>
</ul>
<h5 id="ARCé™åˆ¶ï¼š-ç”¨äºNSObjectå¯¹è±¡ã€‚"><a href="#ARCé™åˆ¶ï¼š-ç”¨äºNSObjectå¯¹è±¡ã€‚" class="headerlink" title="ARCé™åˆ¶ï¼š ç”¨äºNSObjectå¯¹è±¡ã€‚"></a>ARCé™åˆ¶ï¼š ç”¨äºNSObjectå¯¹è±¡ã€‚</h5><h5 id="å¦‚æœåº”ç”¨ä½¿ç”¨äº†Core-Foundationæˆ–malloc-free-ï¼Œæ­¤æ—¶éœ€è¦ä½ æ¥ç®¡ç†å†…å­˜ï¼ˆè¿™ä¸ªæˆ‘ä»¬ä¸‹é¢å†è¯´ï¼‰"><a href="#å¦‚æœåº”ç”¨ä½¿ç”¨äº†Core-Foundationæˆ–malloc-free-ï¼Œæ­¤æ—¶éœ€è¦ä½ æ¥ç®¡ç†å†…å­˜ï¼ˆè¿™ä¸ªæˆ‘ä»¬ä¸‹é¢å†è¯´ï¼‰" class="headerlink" title="å¦‚æœåº”ç”¨ä½¿ç”¨äº†Core Foundationæˆ–malloc()/free()ï¼Œæ­¤æ—¶éœ€è¦ä½ æ¥ç®¡ç†å†…å­˜ï¼ˆè¿™ä¸ªæˆ‘ä»¬ä¸‹é¢å†è¯´ï¼‰"></a>å¦‚æœåº”ç”¨ä½¿ç”¨äº†Core Foundationæˆ–malloc()/free()ï¼Œæ­¤æ—¶éœ€è¦ä½ æ¥ç®¡ç†å†…å­˜ï¼ˆè¿™ä¸ªæˆ‘ä»¬ä¸‹é¢å†è¯´ï¼‰</h5><hr>
<h2 id="Xcodeçš„ARCè‡ªåŠ¨è¿ç§»"><a href="#Xcodeçš„ARCè‡ªåŠ¨è¿ç§»" class="headerlink" title="Xcodeçš„ARCè‡ªåŠ¨è¿ç§»"></a>Xcodeçš„ARCè‡ªåŠ¨è¿ç§»</h2><h5 id="è¦å¯ç”¨ä¸€ä¸ªé¡¹ç›®çš„ARCï¼Œä½ æœ‰ä»¥ä¸‹å‡ ç§é€‰æ‹©ï¼š"><a href="#è¦å¯ç”¨ä¸€ä¸ªé¡¹ç›®çš„ARCï¼Œä½ æœ‰ä»¥ä¸‹å‡ ç§é€‰æ‹©ï¼š" class="headerlink" title="è¦å¯ç”¨ä¸€ä¸ªé¡¹ç›®çš„ARCï¼Œä½ æœ‰ä»¥ä¸‹å‡ ç§é€‰æ‹©ï¼š"></a>è¦å¯ç”¨ä¸€ä¸ªé¡¹ç›®çš„ARCï¼Œä½ æœ‰ä»¥ä¸‹å‡ ç§é€‰æ‹©ï¼š</h5><ul>
<li>Xcodeå¸¦äº†ä¸€ä¸ªè‡ªåŠ¨è½¬æ¢å·¥å…·ï¼Œå¯ä»¥è¿ç§»æºä»£ç è‡³ARC</li>
<li>ä½ å¯ä»¥æ‰‹åŠ¨è½¬æ¢æºæ–‡ä»¶</li>
<li>ä½ å¯ä»¥åœ¨Xcodeä¸­ç¦ç”¨æŸäº›æ–‡ä»¶ä½¿ç”¨ARCï¼Œè¿™ç‚¹å¯¹äºç¬¬ä¸‰æ–¹åº“éå¸¸æœ‰ç”¨ã€‚</li>
</ul>
<h5 id="è¿™è¾¹è¯´ä¸‹æµ‹è¯•æå‡ºçš„éœ€è¦å°†IBOutletæ”¹ä¸ºStrongçš„äº‹æƒ…ã€‚"><a href="#è¿™è¾¹è¯´ä¸‹æµ‹è¯•æå‡ºçš„éœ€è¦å°†IBOutletæ”¹ä¸ºStrongçš„äº‹æƒ…ã€‚" class="headerlink" title="è¿™è¾¹è¯´ä¸‹æµ‹è¯•æå‡ºçš„éœ€è¦å°†IBOutletæ”¹ä¸ºStrongçš„äº‹æƒ…ã€‚"></a>è¿™è¾¹è¯´ä¸‹æµ‹è¯•æå‡ºçš„éœ€è¦å°†IBOutletæ”¹ä¸ºStrongçš„äº‹æƒ…ã€‚</h5><h5 id="åœ¨ARCä¸­ï¼Œæ‰€æœ‰outletå±æ€§éƒ½æ¨èä½¿ç”¨weakï¼Œè¿™äº›viewå¯¹è±¡å·²ç»å±äºView-Controllerçš„view-hierarchyï¼Œä¸éœ€è¦å†æ¬¡å®šä¹‰ä¸ºstrongï¼ˆARCä¸­æ•ˆæœç­‰åŒäºretainï¼‰ã€‚å”¯ä¸€åº”è¯¥ä½¿ç”¨strongçš„outletæ˜¯Fileâ€™s-Ownerï¼Œè¿æ¥åˆ°nibçš„é¡¶å±‚å¯¹è±¡ã€‚"><a href="#åœ¨ARCä¸­ï¼Œæ‰€æœ‰outletå±æ€§éƒ½æ¨èä½¿ç”¨weakï¼Œè¿™äº›viewå¯¹è±¡å·²ç»å±äºView-Controllerçš„view-hierarchyï¼Œä¸éœ€è¦å†æ¬¡å®šä¹‰ä¸ºstrongï¼ˆARCä¸­æ•ˆæœç­‰åŒäºretainï¼‰ã€‚å”¯ä¸€åº”è¯¥ä½¿ç”¨strongçš„outletæ˜¯Fileâ€™s-Ownerï¼Œè¿æ¥åˆ°nibçš„é¡¶å±‚å¯¹è±¡ã€‚" class="headerlink" title="åœ¨ARCä¸­ï¼Œæ‰€æœ‰outletå±æ€§éƒ½æ¨èä½¿ç”¨weakï¼Œè¿™äº›viewå¯¹è±¡å·²ç»å±äºView Controllerçš„view hierarchyï¼Œä¸éœ€è¦å†æ¬¡å®šä¹‰ä¸ºstrongï¼ˆARCä¸­æ•ˆæœç­‰åŒäºretainï¼‰ã€‚å”¯ä¸€åº”è¯¥ä½¿ç”¨strongçš„outletæ˜¯Fileâ€™s Ownerï¼Œè¿æ¥åˆ°nibçš„é¡¶å±‚å¯¹è±¡ã€‚"></a>åœ¨ARCä¸­ï¼Œæ‰€æœ‰<em>outlet</em>å±æ€§éƒ½æ¨èä½¿ç”¨weakï¼Œè¿™äº›viewå¯¹è±¡å·²ç»å±äºView Controllerçš„view hierarchyï¼Œä¸éœ€è¦å†æ¬¡å®šä¹‰ä¸ºstrongï¼ˆARCä¸­æ•ˆæœç­‰åŒäºretainï¼‰ã€‚å”¯ä¸€åº”è¯¥ä½¿ç”¨strongçš„outletæ˜¯Fileâ€™s Ownerï¼Œè¿æ¥åˆ°nibçš„é¡¶å±‚å¯¹è±¡ã€‚</h5><hr>
<h2 id="ARCä¸­deallocä¸autorelease"><a href="#ARCä¸­deallocä¸autorelease" class="headerlink" title="ARCä¸­deallocä¸autorelease"></a>ARCä¸­deallocä¸autorelease</h2><h3 id="dealloc"><a href="#dealloc" class="headerlink" title="dealloc"></a>dealloc</h3><h5 id="åœ¨ARCä¸‹æˆ‘ä»¬ä¸€èˆ¬ä¸éœ€è¦å†™deallocå‡½æ•°ã€‚å› ä¸ºæˆ‘ä»¬ä¸éœ€è¦è°ƒç”¨-super-dealloc-ä¹Ÿä¸éœ€è¦releaseå±æ€§ã€‚è€ŒStrongå±æ€§å‡ºäº†ä½œç”¨åŸŸï¼ˆè¿™ä¸ªclassï¼‰ä¼šè¢«ç½®ä¸ºnilï¼Œå¯¹è±¡ç›¸åº”çš„ä¼šè¢«é‡Šæ”¾é”€æ¯ã€‚ï¼ˆå†…å­˜ä»åˆ›å»ºåˆ°å¦‚ä½•é”€æ¯ä¸‹é¢æ–‡ç« ä¼šå†™åˆ°ï¼‰"><a href="#åœ¨ARCä¸‹æˆ‘ä»¬ä¸€èˆ¬ä¸éœ€è¦å†™deallocå‡½æ•°ã€‚å› ä¸ºæˆ‘ä»¬ä¸éœ€è¦è°ƒç”¨-super-dealloc-ä¹Ÿä¸éœ€è¦releaseå±æ€§ã€‚è€ŒStrongå±æ€§å‡ºäº†ä½œç”¨åŸŸï¼ˆè¿™ä¸ªclassï¼‰ä¼šè¢«ç½®ä¸ºnilï¼Œå¯¹è±¡ç›¸åº”çš„ä¼šè¢«é‡Šæ”¾é”€æ¯ã€‚ï¼ˆå†…å­˜ä»åˆ›å»ºåˆ°å¦‚ä½•é”€æ¯ä¸‹é¢æ–‡ç« ä¼šå†™åˆ°ï¼‰" class="headerlink" title="åœ¨ARCä¸‹æˆ‘ä»¬ä¸€èˆ¬ä¸éœ€è¦å†™deallocå‡½æ•°ã€‚å› ä¸ºæˆ‘ä»¬ä¸éœ€è¦è°ƒç”¨[super dealloc],ä¹Ÿä¸éœ€è¦releaseå±æ€§ã€‚è€ŒStrongå±æ€§å‡ºäº†ä½œç”¨åŸŸï¼ˆè¿™ä¸ªclassï¼‰ä¼šè¢«ç½®ä¸ºnilï¼Œå¯¹è±¡ç›¸åº”çš„ä¼šè¢«é‡Šæ”¾é”€æ¯ã€‚ï¼ˆå†…å­˜ä»åˆ›å»ºåˆ°å¦‚ä½•é”€æ¯ä¸‹é¢æ–‡ç« ä¼šå†™åˆ°ï¼‰"></a>åœ¨ARCä¸‹æˆ‘ä»¬ä¸€èˆ¬ä¸éœ€è¦å†™deallocå‡½æ•°ã€‚å› ä¸ºæˆ‘ä»¬ä¸éœ€è¦è°ƒç”¨[super dealloc],ä¹Ÿä¸éœ€è¦releaseå±æ€§ã€‚è€ŒStrongå±æ€§å‡ºäº†ä½œç”¨åŸŸï¼ˆè¿™ä¸ªclassï¼‰ä¼šè¢«ç½®ä¸ºnilï¼Œå¯¹è±¡ç›¸åº”çš„ä¼šè¢«é‡Šæ”¾é”€æ¯ã€‚ï¼ˆå†…å­˜ä»åˆ›å»ºåˆ°å¦‚ä½•é”€æ¯ä¸‹é¢æ–‡ç« ä¼šå†™åˆ°ï¼‰</h5><h5 id="è€Œdeallocå‡½æ•°è¿˜æ˜¯ä¼šè¢«è°ƒç”¨æ‰§è¡Œçš„ï¼Œåœ¨è¿™ä¸ªå‡½æ•°é‡Œé¢ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™éœ€è¦é‡Šæ”¾CoreFoundationå¯¹è±¡ã€remove-observerã€remove-KVOä»¥åŠä¸€äº›å…¶ä»–èµ„æºï¼ˆ-AudioServicesDisposeSystemSoundID-soundID-ï¼‰"><a href="#è€Œdeallocå‡½æ•°è¿˜æ˜¯ä¼šè¢«è°ƒç”¨æ‰§è¡Œçš„ï¼Œåœ¨è¿™ä¸ªå‡½æ•°é‡Œé¢ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™éœ€è¦é‡Šæ”¾CoreFoundationå¯¹è±¡ã€remove-observerã€remove-KVOä»¥åŠä¸€äº›å…¶ä»–èµ„æºï¼ˆ-AudioServicesDisposeSystemSoundID-soundID-ï¼‰" class="headerlink" title="è€Œdeallocå‡½æ•°è¿˜æ˜¯ä¼šè¢«è°ƒç”¨æ‰§è¡Œçš„ï¼Œåœ¨è¿™ä¸ªå‡½æ•°é‡Œé¢ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™éœ€è¦é‡Šæ”¾CoreFoundationå¯¹è±¡ã€remove observerã€remove KVOä»¥åŠä¸€äº›å…¶ä»–èµ„æºï¼ˆ AudioServicesDisposeSystemSoundID(soundID); ï¼‰"></a>è€Œdeallocå‡½æ•°è¿˜æ˜¯ä¼šè¢«è°ƒç”¨æ‰§è¡Œçš„ï¼Œåœ¨è¿™ä¸ªå‡½æ•°é‡Œé¢ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™éœ€è¦é‡Šæ”¾CoreFoundationå¯¹è±¡ã€remove observerã€remove KVOä»¥åŠä¸€äº›å…¶ä»–èµ„æºï¼ˆ AudioServicesDisposeSystemSoundID(soundID); ï¼‰</h5><h5 id="è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼šä¸è¦åœ¨deallocå‡½æ•°ä¸­é‡Šæ”¾Timerã€‚NSTimerä¼šä¿æŒä¸€ä»½targetå¼ºå¼•ç”¨ï¼Œå¯¼è‡´è¿™ä¸ªClassæ°¸è¿œä¸ä¼šè¢«é‡Šæ”¾ã€‚æ‰€ä»¥éœ€è¦åœ¨å¯¹è±¡Classé”€æ¯å‰åšå¤„ç†"><a href="#è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼šä¸è¦åœ¨deallocå‡½æ•°ä¸­é‡Šæ”¾Timerã€‚NSTimerä¼šä¿æŒä¸€ä»½targetå¼ºå¼•ç”¨ï¼Œå¯¼è‡´è¿™ä¸ªClassæ°¸è¿œä¸ä¼šè¢«é‡Šæ”¾ã€‚æ‰€ä»¥éœ€è¦åœ¨å¯¹è±¡Classé”€æ¯å‰åšå¤„ç†" class="headerlink" title="è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼šä¸è¦åœ¨deallocå‡½æ•°ä¸­é‡Šæ”¾Timerã€‚NSTimerä¼šä¿æŒä¸€ä»½targetå¼ºå¼•ç”¨ï¼Œå¯¼è‡´è¿™ä¸ªClassæ°¸è¿œä¸ä¼šè¢«é‡Šæ”¾ã€‚æ‰€ä»¥éœ€è¦åœ¨å¯¹è±¡Classé”€æ¯å‰åšå¤„ç†"></a>è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼šä¸è¦åœ¨deallocå‡½æ•°ä¸­é‡Šæ”¾Timerã€‚NSTimerä¼šä¿æŒä¸€ä»½targetå¼ºå¼•ç”¨ï¼Œå¯¼è‡´è¿™ä¸ªClassæ°¸è¿œä¸ä¼šè¢«é‡Šæ”¾ã€‚æ‰€ä»¥éœ€è¦åœ¨å¯¹è±¡Classé”€æ¯å‰åšå¤„ç†</h5><h5 id="åœ¨Githubä¸Šæœ‰ä¸ªå¼€æºé¡¹ç›®MSWeakTimerã€‚"><a href="#åœ¨Githubä¸Šæœ‰ä¸ªå¼€æºé¡¹ç›®MSWeakTimerã€‚" class="headerlink" title="åœ¨Githubä¸Šæœ‰ä¸ªå¼€æºé¡¹ç›®MSWeakTimerã€‚"></a>åœ¨Githubä¸Šæœ‰ä¸ªå¼€æºé¡¹ç›®<a href="https://github.com/mindsnacks/MSWeakTimer" target="_blank" rel="noopener">MSWeakTimer</a>ã€‚</h5><h3 id="autoreleasepool"><a href="#autoreleasepool" class="headerlink" title="autoreleasepool"></a>autoreleasepool</h3><h5 id="ARCä»ç„¶ä¿ç•™äº†AutoreleasePoolï¼Œä½†æ˜¯é‡‡ç”¨äº†æ–°çš„Blockè¯­æ³•ï¼Œäºæ˜¯æˆ‘ä»¬çš„mainå‡½æ•°ä¼šå¦‚ä¸‹ä¿®æ”¹ï¼š"><a href="#ARCä»ç„¶ä¿ç•™äº†AutoreleasePoolï¼Œä½†æ˜¯é‡‡ç”¨äº†æ–°çš„Blockè¯­æ³•ï¼Œäºæ˜¯æˆ‘ä»¬çš„mainå‡½æ•°ä¼šå¦‚ä¸‹ä¿®æ”¹ï¼š" class="headerlink" title="ARCä»ç„¶ä¿ç•™äº†AutoreleasePoolï¼Œä½†æ˜¯é‡‡ç”¨äº†æ–°çš„Blockè¯­æ³•ï¼Œäºæ˜¯æˆ‘ä»¬çš„mainå‡½æ•°ä¼šå¦‚ä¸‹ä¿®æ”¹ï¼š"></a>ARCä»ç„¶ä¿ç•™äº†AutoreleasePoolï¼Œä½†æ˜¯é‡‡ç”¨äº†æ–°çš„Blockè¯­æ³•ï¼Œäºæ˜¯æˆ‘ä»¬çš„mainå‡½æ•°ä¼šå¦‚ä¸‹ä¿®æ”¹ï¼š</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NSAutoreleasePool* pool = [[NSAutoreleasePool alloc] init];</span><br><span class="line">int retVal = UIApplicationMain(argc, argv, nil,</span><br><span class="line">NSStringFromClass([AppDelegate class]));</span><br><span class="line">[pool release];</span><br><span class="line"><span class="built_in">return</span> retVal;</span><br></pre></td></tr></table></figure>
<h5 id="ä¿®æ”¹ä¸ºï¼š"><a href="#ä¿®æ”¹ä¸ºï¼š" class="headerlink" title="ä¿®æ”¹ä¸ºï¼š"></a>ä¿®æ”¹ä¸ºï¼š</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@autoreleasepool &#123;</span><br><span class="line">	int retVal = UIApplicationMain(argc, argv, nil,</span><br><span class="line">	NSStringFromClass([AppDelegate class]));</span><br><span class="line">	<span class="built_in">return</span> retVal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Core-Foundationçš„å†…å­˜ç®¡ç†-Toll-Free-Bridge"><a href="#Core-Foundationçš„å†…å­˜ç®¡ç†-Toll-Free-Bridge" class="headerlink" title="Core Foundationçš„å†…å­˜ç®¡ç†-Toll-Free Bridge"></a>Core Foundationçš„å†…å­˜ç®¡ç†-Toll-Free Bridge</h2><h5 id="åœ¨ARCä¸‹ï¼Œobjective-cå¯¹è±¡ä¸Core-Foundationå¯¹è±¡ç›¸äº’è½¬æ¢æ—¶ï¼Œéœ€è¦ç”¨åˆ°briage-castã€‚"><a href="#åœ¨ARCä¸‹ï¼Œobjective-cå¯¹è±¡ä¸Core-Foundationå¯¹è±¡ç›¸äº’è½¬æ¢æ—¶ï¼Œéœ€è¦ç”¨åˆ°briage-castã€‚" class="headerlink" title="åœ¨ARCä¸‹ï¼Œobjective-cå¯¹è±¡ä¸Core Foundationå¯¹è±¡ç›¸äº’è½¬æ¢æ—¶ï¼Œéœ€è¦ç”¨åˆ°briage castã€‚"></a>åœ¨ARCä¸‹ï¼Œobjective-cå¯¹è±¡ä¸Core Foundationå¯¹è±¡ç›¸äº’è½¬æ¢æ—¶ï¼Œéœ€è¦ç”¨åˆ°briage castã€‚</h5><h5 id="ä¸¾ä¸ªæ —å­ï¼šNSStringå’ŒCFStringRefå°±å¯ä»¥åŒç­‰å¯¹å¾…ï¼Œåœ¨ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥äº’æ¢ä½¿ç”¨ï¼ŒèƒŒåçš„è®¾è®¡å°±æ˜¯toll-free-bridgingã€‚"><a href="#ä¸¾ä¸ªæ —å­ï¼šNSStringå’ŒCFStringRefå°±å¯ä»¥åŒç­‰å¯¹å¾…ï¼Œåœ¨ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥äº’æ¢ä½¿ç”¨ï¼ŒèƒŒåçš„è®¾è®¡å°±æ˜¯toll-free-bridgingã€‚" class="headerlink" title="ä¸¾ä¸ªæ —å­ï¼šNSStringå’ŒCFStringRefå°±å¯ä»¥åŒç­‰å¯¹å¾…ï¼Œåœ¨ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥äº’æ¢ä½¿ç”¨ï¼ŒèƒŒåçš„è®¾è®¡å°±æ˜¯toll-free bridgingã€‚"></a>ä¸¾ä¸ªæ —å­ï¼šNSStringå’ŒCFStringRefå°±å¯ä»¥åŒç­‰å¯¹å¾…ï¼Œåœ¨ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥äº’æ¢ä½¿ç”¨ï¼ŒèƒŒåçš„è®¾è®¡å°±æ˜¯toll-free bridgingã€‚</h5><p>åœ¨ARCä¹‹å‰ï¼Œæˆ‘ä»¬æ—¶è¿™ä¹ˆå¤„ç†çš„ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CFStringRef s1 = (CFStringRef) [[NSString alloc] initWithFormat:@<span class="string">"Hello, %@!"</span>, name];</span><br></pre></td></tr></table></figure></p>
<h5 id="å½“ç„¶ï¼Œallocåˆ†é…äº†NSStringå¯¹è±¡ï¼Œä½ éœ€è¦åœ¨ä½¿ç”¨å®Œä¹‹åè¿›è¡Œé‡Šæ”¾ï¼Œæ³¨æ„æ˜¯é‡Šæ”¾è½¬æ¢åçš„CFStringRefå¯¹è±¡ï¼š"><a href="#å½“ç„¶ï¼Œallocåˆ†é…äº†NSStringå¯¹è±¡ï¼Œä½ éœ€è¦åœ¨ä½¿ç”¨å®Œä¹‹åè¿›è¡Œé‡Šæ”¾ï¼Œæ³¨æ„æ˜¯é‡Šæ”¾è½¬æ¢åçš„CFStringRefå¯¹è±¡ï¼š" class="headerlink" title="å½“ç„¶ï¼Œallocåˆ†é…äº†NSStringå¯¹è±¡ï¼Œä½ éœ€è¦åœ¨ä½¿ç”¨å®Œä¹‹åè¿›è¡Œé‡Šæ”¾ï¼Œæ³¨æ„æ˜¯é‡Šæ”¾è½¬æ¢åçš„CFStringRefå¯¹è±¡ï¼š"></a>å½“ç„¶ï¼Œallocåˆ†é…äº†NSStringå¯¹è±¡ï¼Œä½ éœ€è¦åœ¨ä½¿ç”¨å®Œä¹‹åè¿›è¡Œé‡Šæ”¾ï¼Œæ³¨æ„æ˜¯é‡Šæ”¾è½¬æ¢åçš„CFStringRefå¯¹è±¡ï¼š</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CFRelease(s1);</span><br></pre></td></tr></table></figure>
<h5 id="åè¿‡æ¥ï¼Œä»Core-Foundationåˆ°Objective-Cçš„æ–¹å‘ä¹Ÿç±»ä¼¼ï¼š"><a href="#åè¿‡æ¥ï¼Œä»Core-Foundationåˆ°Objective-Cçš„æ–¹å‘ä¹Ÿç±»ä¼¼ï¼š" class="headerlink" title="åè¿‡æ¥ï¼Œä»Core Foundationåˆ°Objective-Cçš„æ–¹å‘ä¹Ÿç±»ä¼¼ï¼š"></a>åè¿‡æ¥ï¼Œä»Core Foundationåˆ°Objective-Cçš„æ–¹å‘ä¹Ÿç±»ä¼¼ï¼š</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CFStringRef s2 = CFStringCreateWithCString(kCFAllocatorDefault, bytes, kCFStringEncodingMacRoman);</span><br><span class="line">NSString *s3 = (NSString *)s2;</span><br><span class="line">// release the object when you<span class="string">'re done</span></span><br><span class="line"><span class="string">[s3 release];</span></span><br></pre></td></tr></table></figure>
<h5 id="åœ¨ARCä¸‹ï¼Œæƒ…å†µå˜å¾—ä¸ä¸€æ ·ï¼ä»¥ä¸‹ä»£ç åœ¨æ‰‹åŠ¨å†…å­˜ç®¡ç†ä¸­æ˜¯å®Œå…¨åˆæ³•çš„ï¼Œä½†åœ¨ARCä¸­å´å­˜åœ¨é—®é¢˜ï¼š"><a href="#åœ¨ARCä¸‹ï¼Œæƒ…å†µå˜å¾—ä¸ä¸€æ ·ï¼ä»¥ä¸‹ä»£ç åœ¨æ‰‹åŠ¨å†…å­˜ç®¡ç†ä¸­æ˜¯å®Œå…¨åˆæ³•çš„ï¼Œä½†åœ¨ARCä¸­å´å­˜åœ¨é—®é¢˜ï¼š" class="headerlink" title="åœ¨ARCä¸‹ï¼Œæƒ…å†µå˜å¾—ä¸ä¸€æ ·ï¼ä»¥ä¸‹ä»£ç åœ¨æ‰‹åŠ¨å†…å­˜ç®¡ç†ä¸­æ˜¯å®Œå…¨åˆæ³•çš„ï¼Œä½†åœ¨ARCä¸­å´å­˜åœ¨é—®é¢˜ï¼š"></a>åœ¨ARCä¸‹ï¼Œæƒ…å†µå˜å¾—ä¸ä¸€æ ·ï¼ä»¥ä¸‹ä»£ç åœ¨æ‰‹åŠ¨å†…å­˜ç®¡ç†ä¸­æ˜¯å®Œå…¨åˆæ³•çš„ï¼Œä½†åœ¨ARCä¸­å´å­˜åœ¨é—®é¢˜ï¼š</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (NSString *)escape:(NSString *)text</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">return</span> [(NSString *)CFURLCreateStringByAddingPercentEscapes(</span><br><span class="line">							NULL,</span><br><span class="line">							(CFStringRef)text,</span><br><span class="line">							NULL,</span><br><span class="line">							(CFStringRef)@<span class="string">"!*'();:@&amp;=+$,/?%#[]"</span>, // è¿™é‡Œä¸éœ€è¦bridging castsï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œä¸éœ€è¦é‡Šæ”¾ï¼</span><br><span class="line"> 							CFStringConvertNSStringEncodingToEncoding(NSUTF8StringEncoding)) autorelease];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<font color="#e4393c" size="4">åœ¨ARCä¸‹ç¼–è¯‘å™¨å¿…é¡»çŸ¥é“ç”±è°æ¥è´Ÿè´£é‡Šæ”¾è½¬æ¢åçš„å¯¹è±¡</font>

<h5 id="å¦‚æœä½ æŠŠä¸€ä¸ªNSObjectå½“ä½œCore-Foundationå¯¹è±¡æ¥ä½¿ç”¨ï¼Œåˆ™ARCå°†ä¸å†è´Ÿè´£é‡Šæ”¾è¯¥å¯¹è±¡ã€‚ä½†ä½ å¿…é¡»æ˜ç¡®åœ°å‘Šè¯‰ARCä½ çš„è¿™ä¸ªæ„å›¾ï¼Œç¼–è¯‘å™¨æ²¡åŠæ³•è‡ªå·±åšä¸»ã€‚"><a href="#å¦‚æœä½ æŠŠä¸€ä¸ªNSObjectå½“ä½œCore-Foundationå¯¹è±¡æ¥ä½¿ç”¨ï¼Œåˆ™ARCå°†ä¸å†è´Ÿè´£é‡Šæ”¾è¯¥å¯¹è±¡ã€‚ä½†ä½ å¿…é¡»æ˜ç¡®åœ°å‘Šè¯‰ARCä½ çš„è¿™ä¸ªæ„å›¾ï¼Œç¼–è¯‘å™¨æ²¡åŠæ³•è‡ªå·±åšä¸»ã€‚" class="headerlink" title="å¦‚æœä½ æŠŠä¸€ä¸ªNSObjectå½“ä½œCore Foundationå¯¹è±¡æ¥ä½¿ç”¨ï¼Œåˆ™ARCå°†ä¸å†è´Ÿè´£é‡Šæ”¾è¯¥å¯¹è±¡ã€‚ä½†ä½ å¿…é¡»æ˜ç¡®åœ°å‘Šè¯‰ARCä½ çš„è¿™ä¸ªæ„å›¾ï¼Œç¼–è¯‘å™¨æ²¡åŠæ³•è‡ªå·±åšä¸»ã€‚"></a>å¦‚æœä½ æŠŠä¸€ä¸ªNSObjectå½“ä½œCore Foundationå¯¹è±¡æ¥ä½¿ç”¨ï¼Œåˆ™ARCå°†ä¸å†è´Ÿè´£é‡Šæ”¾è¯¥å¯¹è±¡ã€‚ä½†ä½ å¿…é¡»æ˜ç¡®åœ°å‘Šè¯‰ARCä½ çš„è¿™ä¸ªæ„å›¾ï¼Œç¼–è¯‘å™¨æ²¡åŠæ³•è‡ªå·±åšä¸»ã€‚</h5><h5 id="åŒæ ·å¦‚æœä½ åˆ›å»ºä¸€ä¸ªCore-Foundationå¯¹è±¡å¹¶æŠŠå®ƒè½¬æ¢ä¸ºNSObjectå¯¹è±¡ï¼Œä½ ä¹Ÿå¿…é¡»å‘Šè¯‰ARCå æ®å¯¹è±¡çš„æ‰€æœ‰æƒï¼Œå¹¶åœ¨é€‚å½“çš„æ—¶å€™é‡Šæ”¾è¯¥å¯¹è±¡ã€‚è¿™å°±æ˜¯æ‰€è°“çš„bridging-castsã€‚"><a href="#åŒæ ·å¦‚æœä½ åˆ›å»ºä¸€ä¸ªCore-Foundationå¯¹è±¡å¹¶æŠŠå®ƒè½¬æ¢ä¸ºNSObjectå¯¹è±¡ï¼Œä½ ä¹Ÿå¿…é¡»å‘Šè¯‰ARCå æ®å¯¹è±¡çš„æ‰€æœ‰æƒï¼Œå¹¶åœ¨é€‚å½“çš„æ—¶å€™é‡Šæ”¾è¯¥å¯¹è±¡ã€‚è¿™å°±æ˜¯æ‰€è°“çš„bridging-castsã€‚" class="headerlink" title="åŒæ ·å¦‚æœä½ åˆ›å»ºä¸€ä¸ªCore Foundationå¯¹è±¡å¹¶æŠŠå®ƒè½¬æ¢ä¸ºNSObjectå¯¹è±¡ï¼Œä½ ä¹Ÿå¿…é¡»å‘Šè¯‰ARCå æ®å¯¹è±¡çš„æ‰€æœ‰æƒï¼Œå¹¶åœ¨é€‚å½“çš„æ—¶å€™é‡Šæ”¾è¯¥å¯¹è±¡ã€‚è¿™å°±æ˜¯æ‰€è°“çš„bridging castsã€‚"></a>åŒæ ·å¦‚æœä½ åˆ›å»ºä¸€ä¸ªCore Foundationå¯¹è±¡å¹¶æŠŠå®ƒè½¬æ¢ä¸ºNSObjectå¯¹è±¡ï¼Œä½ ä¹Ÿå¿…é¡»å‘Šè¯‰ARCå æ®å¯¹è±¡çš„æ‰€æœ‰æƒï¼Œå¹¶åœ¨é€‚å½“çš„æ—¶å€™é‡Šæ”¾è¯¥å¯¹è±¡ã€‚è¿™å°±æ˜¯æ‰€è°“çš„bridging castsã€‚</h5><h5 id="ä¸Šé¢ä»£ç ä¸­ï¼ŒCFURLCreateStringByAddingPercentEscapes-å‡½æ•°çš„å‚æ•°éœ€è¦ä¸¤ä¸ªCFStringRefå¯¹è±¡ï¼Œå…¶ä¸­å¸¸é‡NSStringå¯ä»¥ç›´æ¥è½¬æ¢ï¼Œå› ä¸ºä¸éœ€è¦è¿›è¡Œå¯¹è±¡é‡Šæ”¾ï¼›ä½†æ˜¯-text-å‚æ•°ä¸ä¸€æ ·ï¼Œå®ƒæ˜¯ä¼ é€’è¿›æ¥çš„ä¸€ä¸ªNSStringå¯¹è±¡ã€‚è€Œå‡½æ•°å‚æ•°å’Œå±€éƒ¨å˜é‡ä¸€æ ·ï¼Œéƒ½æ˜¯strongæŒ‡é’ˆï¼Œè¿™ç§å¯¹è±¡åœ¨å‡½æ•°å…¥å£å¤„ä¼šè¢«retainï¼Œå¹¶ä¸”å¯¹è±¡ä¼šæŒç»­å­˜åœ¨ç›´åˆ°æŒ‡é’ˆè¢«é”€æ¯ï¼ˆè¿™é‡Œä¹Ÿå°±æ˜¯å‡½æ•°è¿”å›æ—¶ï¼‰ã€‚"><a href="#ä¸Šé¢ä»£ç ä¸­ï¼ŒCFURLCreateStringByAddingPercentEscapes-å‡½æ•°çš„å‚æ•°éœ€è¦ä¸¤ä¸ªCFStringRefå¯¹è±¡ï¼Œå…¶ä¸­å¸¸é‡NSStringå¯ä»¥ç›´æ¥è½¬æ¢ï¼Œå› ä¸ºä¸éœ€è¦è¿›è¡Œå¯¹è±¡é‡Šæ”¾ï¼›ä½†æ˜¯-text-å‚æ•°ä¸ä¸€æ ·ï¼Œå®ƒæ˜¯ä¼ é€’è¿›æ¥çš„ä¸€ä¸ªNSStringå¯¹è±¡ã€‚è€Œå‡½æ•°å‚æ•°å’Œå±€éƒ¨å˜é‡ä¸€æ ·ï¼Œéƒ½æ˜¯strongæŒ‡é’ˆï¼Œè¿™ç§å¯¹è±¡åœ¨å‡½æ•°å…¥å£å¤„ä¼šè¢«retainï¼Œå¹¶ä¸”å¯¹è±¡ä¼šæŒç»­å­˜åœ¨ç›´åˆ°æŒ‡é’ˆè¢«é”€æ¯ï¼ˆè¿™é‡Œä¹Ÿå°±æ˜¯å‡½æ•°è¿”å›æ—¶ï¼‰ã€‚" class="headerlink" title="ä¸Šé¢ä»£ç ä¸­ï¼ŒCFURLCreateStringByAddingPercentEscapes()å‡½æ•°çš„å‚æ•°éœ€è¦ä¸¤ä¸ªCFStringRefå¯¹è±¡ï¼Œå…¶ä¸­å¸¸é‡NSStringå¯ä»¥ç›´æ¥è½¬æ¢ï¼Œå› ä¸ºä¸éœ€è¦è¿›è¡Œå¯¹è±¡é‡Šæ”¾ï¼›ä½†æ˜¯ text å‚æ•°ä¸ä¸€æ ·ï¼Œå®ƒæ˜¯ä¼ é€’è¿›æ¥çš„ä¸€ä¸ªNSStringå¯¹è±¡ã€‚è€Œå‡½æ•°å‚æ•°å’Œå±€éƒ¨å˜é‡ä¸€æ ·ï¼Œéƒ½æ˜¯strongæŒ‡é’ˆï¼Œè¿™ç§å¯¹è±¡åœ¨å‡½æ•°å…¥å£å¤„ä¼šè¢«retainï¼Œå¹¶ä¸”å¯¹è±¡ä¼šæŒç»­å­˜åœ¨ç›´åˆ°æŒ‡é’ˆè¢«é”€æ¯ï¼ˆè¿™é‡Œä¹Ÿå°±æ˜¯å‡½æ•°è¿”å›æ—¶ï¼‰ã€‚"></a>ä¸Šé¢ä»£ç ä¸­ï¼ŒCFURLCreateStringByAddingPercentEscapes()å‡½æ•°çš„å‚æ•°éœ€è¦ä¸¤ä¸ªCFStringRefå¯¹è±¡ï¼Œå…¶ä¸­å¸¸é‡NSStringå¯ä»¥ç›´æ¥è½¬æ¢ï¼Œå› ä¸ºä¸éœ€è¦è¿›è¡Œå¯¹è±¡é‡Šæ”¾ï¼›ä½†æ˜¯ text å‚æ•°ä¸ä¸€æ ·ï¼Œå®ƒæ˜¯ä¼ é€’è¿›æ¥çš„ä¸€ä¸ªNSStringå¯¹è±¡ã€‚è€Œå‡½æ•°å‚æ•°å’Œå±€éƒ¨å˜é‡ä¸€æ ·ï¼Œéƒ½æ˜¯strongæŒ‡é’ˆï¼Œè¿™ç§å¯¹è±¡åœ¨å‡½æ•°å…¥å£å¤„ä¼šè¢«retainï¼Œå¹¶ä¸”å¯¹è±¡ä¼šæŒç»­å­˜åœ¨ç›´åˆ°æŒ‡é’ˆè¢«é”€æ¯ï¼ˆè¿™é‡Œä¹Ÿå°±æ˜¯å‡½æ•°è¿”å›æ—¶ï¼‰ã€‚</h5><h5 id="å¯¹äºtextå‚æ•°ï¼Œæˆ‘ä»¬å¸Œæœ›ARCä¿æŒè¿™ä¸ªå˜é‡çš„æ‰€æœ‰æƒï¼ŒåŒæ—¶åˆå¸Œæœ›ä¸´æ—¶å°†å®ƒå½“ä½œCFStringRefå¯¹è±¡æ¥ä½¿ç”¨ã€‚è¿™ç§æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨-bridgeè¯´æ˜ç¬¦ï¼Œå®ƒå‘Šè¯‰ARCä¸è¦æ›´æ”¹å¯¹è±¡çš„æ‰€æœ‰æƒï¼ŒæŒ‰æ™®é€šè§„åˆ™é‡Šæ”¾è¯¥å¯¹è±¡å³å¯ã€‚"><a href="#å¯¹äºtextå‚æ•°ï¼Œæˆ‘ä»¬å¸Œæœ›ARCä¿æŒè¿™ä¸ªå˜é‡çš„æ‰€æœ‰æƒï¼ŒåŒæ—¶åˆå¸Œæœ›ä¸´æ—¶å°†å®ƒå½“ä½œCFStringRefå¯¹è±¡æ¥ä½¿ç”¨ã€‚è¿™ç§æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨-bridgeè¯´æ˜ç¬¦ï¼Œå®ƒå‘Šè¯‰ARCä¸è¦æ›´æ”¹å¯¹è±¡çš„æ‰€æœ‰æƒï¼ŒæŒ‰æ™®é€šè§„åˆ™é‡Šæ”¾è¯¥å¯¹è±¡å³å¯ã€‚" class="headerlink" title="å¯¹äºtextå‚æ•°ï¼Œæˆ‘ä»¬å¸Œæœ›ARCä¿æŒè¿™ä¸ªå˜é‡çš„æ‰€æœ‰æƒï¼ŒåŒæ—¶åˆå¸Œæœ›ä¸´æ—¶å°†å®ƒå½“ä½œCFStringRefå¯¹è±¡æ¥ä½¿ç”¨ã€‚è¿™ç§æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨__bridgeè¯´æ˜ç¬¦ï¼Œå®ƒå‘Šè¯‰ARCä¸è¦æ›´æ”¹å¯¹è±¡çš„æ‰€æœ‰æƒï¼ŒæŒ‰æ™®é€šè§„åˆ™é‡Šæ”¾è¯¥å¯¹è±¡å³å¯ã€‚"></a>å¯¹äºtextå‚æ•°ï¼Œæˆ‘ä»¬å¸Œæœ›ARCä¿æŒè¿™ä¸ªå˜é‡çš„æ‰€æœ‰æƒï¼ŒåŒæ—¶åˆå¸Œæœ›ä¸´æ—¶å°†å®ƒå½“ä½œCFStringRefå¯¹è±¡æ¥ä½¿ç”¨ã€‚è¿™ç§æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨__bridgeè¯´æ˜ç¬¦ï¼Œå®ƒå‘Šè¯‰ARCä¸è¦æ›´æ”¹å¯¹è±¡çš„æ‰€æœ‰æƒï¼ŒæŒ‰æ™®é€šè§„åˆ™é‡Šæ”¾è¯¥å¯¹è±¡å³å¯ã€‚</h5><h5 id="å¤šæ•°æƒ…å†µä¸‹ï¼ŒObjective-Cå¯¹è±¡å’ŒCore-Foundationå¯¹è±¡ä¹‹é—´äº’ç›¸è½¬æ¢æ—¶ï¼Œæˆ‘ä»¬éƒ½åº”è¯¥ä½¿ç”¨-bridgeã€‚"><a href="#å¤šæ•°æƒ…å†µä¸‹ï¼ŒObjective-Cå¯¹è±¡å’ŒCore-Foundationå¯¹è±¡ä¹‹é—´äº’ç›¸è½¬æ¢æ—¶ï¼Œæˆ‘ä»¬éƒ½åº”è¯¥ä½¿ç”¨-bridgeã€‚" class="headerlink" title="å¤šæ•°æƒ…å†µä¸‹ï¼ŒObjective-Cå¯¹è±¡å’ŒCore Foundationå¯¹è±¡ä¹‹é—´äº’ç›¸è½¬æ¢æ—¶ï¼Œæˆ‘ä»¬éƒ½åº”è¯¥ä½¿ç”¨__bridgeã€‚"></a>å¤šæ•°æƒ…å†µä¸‹ï¼ŒObjective-Cå¯¹è±¡å’ŒCore Foundationå¯¹è±¡ä¹‹é—´äº’ç›¸è½¬æ¢æ—¶ï¼Œæˆ‘ä»¬éƒ½åº”è¯¥ä½¿ç”¨__bridgeã€‚</h5><h4 id="ä½†æ˜¯-å®ƒleiæ¥äº†"><a href="#ä½†æ˜¯-å®ƒleiæ¥äº†" class="headerlink" title="ä½†æ˜¯~å®ƒleiæ¥äº†"></a>ä½†æ˜¯~å®ƒleiæ¥äº†</h4><h5 id="ä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬ç¡®å®éœ€è¦ç»™äºˆARCæŸä¸ªå¯¹è±¡çš„æ‰€æœ‰æƒï¼Œæˆ–è€…è§£é™¤ARCå¯¹æŸä¸ªå¯¹è±¡çš„æ‰€æœ‰æƒã€‚è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨å¦å¤–ä¸¤ç§bridging-castsï¼š"><a href="#ä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬ç¡®å®éœ€è¦ç»™äºˆARCæŸä¸ªå¯¹è±¡çš„æ‰€æœ‰æƒï¼Œæˆ–è€…è§£é™¤ARCå¯¹æŸä¸ªå¯¹è±¡çš„æ‰€æœ‰æƒã€‚è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨å¦å¤–ä¸¤ç§bridging-castsï¼š" class="headerlink" title="ä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬ç¡®å®éœ€è¦ç»™äºˆARCæŸä¸ªå¯¹è±¡çš„æ‰€æœ‰æƒï¼Œæˆ–è€…è§£é™¤ARCå¯¹æŸä¸ªå¯¹è±¡çš„æ‰€æœ‰æƒã€‚è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨å¦å¤–ä¸¤ç§bridging castsï¼š"></a>ä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬ç¡®å®éœ€è¦ç»™äºˆARCæŸä¸ªå¯¹è±¡çš„æ‰€æœ‰æƒï¼Œæˆ–è€…è§£é™¤ARCå¯¹æŸä¸ªå¯¹è±¡çš„æ‰€æœ‰æƒã€‚è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨å¦å¤–ä¸¤ç§bridging castsï¼š</h5><ul>
<li>__bridge_transferï¼šç»™äºˆARCæ‰€æœ‰æƒ</li>
<li>__bridge_retainedï¼šè§£é™¤ARCæ‰€æœ‰æƒ</li>
</ul>
<h5 id="å› ä¸º-CFURLCreateStringByAddingPercentEscapes-å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„CFStringRefå¯¹è±¡-è€Œæˆ‘ä»¬è¦çš„æ˜¯NSStringå¯¹è±¡ï¼Œå› æ­¤æˆ‘ä»¬è¦å¼ºåˆ¶è½¬æ¢ã€‚"><a href="#å› ä¸º-CFURLCreateStringByAddingPercentEscapes-å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„CFStringRefå¯¹è±¡-è€Œæˆ‘ä»¬è¦çš„æ˜¯NSStringå¯¹è±¡ï¼Œå› æ­¤æˆ‘ä»¬è¦å¼ºåˆ¶è½¬æ¢ã€‚" class="headerlink" title="å› ä¸º CFURLCreateStringByAddingPercentEscapes() å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„CFStringRefå¯¹è±¡,è€Œæˆ‘ä»¬è¦çš„æ˜¯NSStringå¯¹è±¡ï¼Œå› æ­¤æˆ‘ä»¬è¦å¼ºåˆ¶è½¬æ¢ã€‚"></a>å› ä¸º CFURLCreateStringByAddingPercentEscapes() å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„CFStringRefå¯¹è±¡,è€Œæˆ‘ä»¬è¦çš„æ˜¯NSStringå¯¹è±¡ï¼Œå› æ­¤æˆ‘ä»¬è¦å¼ºåˆ¶è½¬æ¢ã€‚</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CFStringRef result = CFURLCreateStringByAddingPercentEscapes(. . .);</span><br><span class="line">NSString *s = (NSString *)result;</span><br><span class="line"><span class="built_in">return</span> s;</span><br></pre></td></tr></table></figure>
<h5 id="å½“æˆ‘ä»¬ä¸éœ€è¦å¼ºåˆ¶è½¬æ¢ä¸ºNSObjectå¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨CFReleaseæ–¹æ³•å³å¯"><a href="#å½“æˆ‘ä»¬ä¸éœ€è¦å¼ºåˆ¶è½¬æ¢ä¸ºNSObjectå¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨CFReleaseæ–¹æ³•å³å¯" class="headerlink" title="å½“æˆ‘ä»¬ä¸éœ€è¦å¼ºåˆ¶è½¬æ¢ä¸ºNSObjectå¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨CFReleaseæ–¹æ³•å³å¯"></a>å½“æˆ‘ä»¬ä¸éœ€è¦å¼ºåˆ¶è½¬æ¢ä¸ºNSObjectå¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨CFReleaseæ–¹æ³•å³å¯</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// <span class="keyword">do</span> something with the result </span><br><span class="line">CGRelease(result)</span><br></pre></td></tr></table></figure>
<font color="#e4393c" size="4">ARCåªèƒ½ä½œä¸šäºObjective-cå¯¹è±¡ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº† æ—¢ç„¶æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªCore Foundationå¯¹è±¡ è°æ¥è´Ÿè´£é‡Šæ”¾å®ƒï¼Ÿ</font>

<h4 id="è¿™é‡Œéœ€è¦æˆ‘ä»¬ä½¿ç”¨-bridge-transfer"><a href="#è¿™é‡Œéœ€è¦æˆ‘ä»¬ä½¿ç”¨-bridge-transfer" class="headerlink" title="è¿™é‡Œéœ€è¦æˆ‘ä»¬ä½¿ç”¨  __bridge_transfer "></a>è¿™é‡Œéœ€è¦æˆ‘ä»¬ä½¿ç”¨ <font color="#e4393c" size="4"> __bridge_transfer </font></h4><h5 id="bridge-transfer-ä¼šå‘Šè¯‰ARCï¼šâ€Hiï¼ŒARCåŒå­¦ï¼Œå¥½ä¹…ä¸è§ã€‚æˆ‘è¿™é‡Œæœ‰ä¸ªè´§æ˜¯ä¸€ä¸ªCFStringRefå¯¹è±¡ï¼Œä½†æ˜¯æœ‰äººæŠŠå®ƒææˆäº†NSStringå¯¹è±¡äº†ï¼Œæˆ‘å¸Œæœ›ä½ æ¥ç®¡-é”€æ¯-å®ƒï¼Œæˆ‘è¿™é‡Œå°±æ’’æ‰‹ä¸ç®¡äº†-è°ƒç”¨CFRelease-â€ã€‚"><a href="#bridge-transfer-ä¼šå‘Šè¯‰ARCï¼šâ€Hiï¼ŒARCåŒå­¦ï¼Œå¥½ä¹…ä¸è§ã€‚æˆ‘è¿™é‡Œæœ‰ä¸ªè´§æ˜¯ä¸€ä¸ªCFStringRefå¯¹è±¡ï¼Œä½†æ˜¯æœ‰äººæŠŠå®ƒææˆäº†NSStringå¯¹è±¡äº†ï¼Œæˆ‘å¸Œæœ›ä½ æ¥ç®¡-é”€æ¯-å®ƒï¼Œæˆ‘è¿™é‡Œå°±æ’’æ‰‹ä¸ç®¡äº†-è°ƒç”¨CFRelease-â€ã€‚" class="headerlink" title=" __bridge_transfer ä¼šå‘Šè¯‰ARCï¼šâ€Hiï¼ŒARCåŒå­¦ï¼Œå¥½ä¹…ä¸è§ã€‚æˆ‘è¿™é‡Œæœ‰ä¸ªè´§æ˜¯ä¸€ä¸ªCFStringRefå¯¹è±¡ï¼Œä½†æ˜¯æœ‰äººæŠŠå®ƒææˆäº†NSStringå¯¹è±¡äº†ï¼Œæˆ‘å¸Œæœ›ä½ æ¥ç®¡(é”€æ¯)å®ƒï¼Œæˆ‘è¿™é‡Œå°±æ’’æ‰‹ä¸ç®¡äº†(è°ƒç”¨CFRelease())â€ã€‚"></a><font color="#e4393c" size="3"> __bridge_transfer </font>ä¼šå‘Šè¯‰ARCï¼šâ€Hiï¼ŒARCåŒå­¦ï¼Œå¥½ä¹…ä¸è§ã€‚æˆ‘è¿™é‡Œæœ‰ä¸ªè´§æ˜¯ä¸€ä¸ªCFStringRefå¯¹è±¡ï¼Œä½†æ˜¯æœ‰äººæŠŠå®ƒææˆäº†NSStringå¯¹è±¡äº†ï¼Œæˆ‘å¸Œæœ›ä½ æ¥ç®¡(é”€æ¯)å®ƒï¼Œæˆ‘è¿™é‡Œå°±æ’’æ‰‹ä¸ç®¡äº†(è°ƒç”¨CFRelease())â€ã€‚</h5><h5 id="å¦‚æœæˆ‘ä»¬ä½¿ç”¨-bridgeï¼Œå°±ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚ARCå¹¶ä¸çŸ¥é“è‡ªå·±åº”è¯¥åœ¨ä½¿ç”¨å®Œå¯¹è±¡ä¹‹åé‡Šæ”¾è¯¥å¯¹è±¡ï¼Œä¹Ÿæ²¡æœ‰äººè°ƒç”¨CFRelease-ã€‚ç»“æœè¿™ä¸ªå¯¹è±¡å°±ä¼šæ°¸è¿œä¿ç•™åœ¨å†…å­˜ä¸­ã€‚å› æ­¤é€‰æ‹©æ­£ç¡®çš„-bridge-è¯´æ˜ç¬¦æ˜¯è‡³å…³é‡è¦çš„ã€‚"><a href="#å¦‚æœæˆ‘ä»¬ä½¿ç”¨-bridgeï¼Œå°±ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚ARCå¹¶ä¸çŸ¥é“è‡ªå·±åº”è¯¥åœ¨ä½¿ç”¨å®Œå¯¹è±¡ä¹‹åé‡Šæ”¾è¯¥å¯¹è±¡ï¼Œä¹Ÿæ²¡æœ‰äººè°ƒç”¨CFRelease-ã€‚ç»“æœè¿™ä¸ªå¯¹è±¡å°±ä¼šæ°¸è¿œä¿ç•™åœ¨å†…å­˜ä¸­ã€‚å› æ­¤é€‰æ‹©æ­£ç¡®çš„-bridge-è¯´æ˜ç¬¦æ˜¯è‡³å…³é‡è¦çš„ã€‚" class="headerlink" title="å¦‚æœæˆ‘ä»¬ä½¿ç”¨ __bridgeï¼Œå°±ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚ARCå¹¶ä¸çŸ¥é“è‡ªå·±åº”è¯¥åœ¨ä½¿ç”¨å®Œå¯¹è±¡ä¹‹åé‡Šæ”¾è¯¥å¯¹è±¡ï¼Œä¹Ÿæ²¡æœ‰äººè°ƒç”¨CFRelease()ã€‚ç»“æœè¿™ä¸ªå¯¹è±¡å°±ä¼šæ°¸è¿œä¿ç•™åœ¨å†…å­˜ä¸­ã€‚å› æ­¤é€‰æ‹©æ­£ç¡®çš„ bridge è¯´æ˜ç¬¦æ˜¯è‡³å…³é‡è¦çš„ã€‚"></a>å¦‚æœæˆ‘ä»¬ä½¿ç”¨ __bridgeï¼Œå°±ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚ARCå¹¶ä¸çŸ¥é“è‡ªå·±åº”è¯¥åœ¨ä½¿ç”¨å®Œå¯¹è±¡ä¹‹åé‡Šæ”¾è¯¥å¯¹è±¡ï¼Œä¹Ÿæ²¡æœ‰äººè°ƒç”¨CFRelease()ã€‚ç»“æœè¿™ä¸ªå¯¹è±¡å°±ä¼šæ°¸è¿œä¿ç•™åœ¨å†…å­˜ä¸­ã€‚å› æ­¤é€‰æ‹©æ­£ç¡®çš„ bridge è¯´æ˜ç¬¦æ˜¯è‡³å…³é‡è¦çš„ã€‚</h5><h5 id="ä¸ºäº†ä»£ç æ›´åŠ å¯è¯»å’Œå®¹æ˜“ç†è§£ï¼ŒiOSè¿˜æä¾›äº†ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼šCFBridgingRelease-ã€‚å‡½æ•°æ‰€åšäº‹æƒ…å’Œ-bridge-transfer-å¼ºåˆ¶è½¬æ¢å®Œå…¨ä¸€æ ·ï¼Œä½†æ›´åŠ ç®€æ´å’Œæ¸…æ™°ã€‚CFBridgingRelease-å‡½æ•°å®šä¹‰ä¸ºå†…è”å‡½æ•°ï¼Œå› æ­¤ä¸ä¼šå¯¼è‡´é¢å¤–çš„å¼€é”€ã€‚å‡½æ•°ä¹‹æ‰€ä»¥å‘½åä¸ºCFBridgingRelease-ï¼Œæ˜¯å› ä¸ºä¸€èˆ¬ä½ ä¼šåœ¨éœ€è¦ä½¿ç”¨CFRelease-é‡Šæ”¾å¯¹è±¡çš„åœ°æ–¹ï¼Œè°ƒç”¨CFBridgingRelease-æ¥ä¼ é€’å¯¹è±¡çš„æ‰€æœ‰æƒã€‚"><a href="#ä¸ºäº†ä»£ç æ›´åŠ å¯è¯»å’Œå®¹æ˜“ç†è§£ï¼ŒiOSè¿˜æä¾›äº†ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼šCFBridgingRelease-ã€‚å‡½æ•°æ‰€åšäº‹æƒ…å’Œ-bridge-transfer-å¼ºåˆ¶è½¬æ¢å®Œå…¨ä¸€æ ·ï¼Œä½†æ›´åŠ ç®€æ´å’Œæ¸…æ™°ã€‚CFBridgingRelease-å‡½æ•°å®šä¹‰ä¸ºå†…è”å‡½æ•°ï¼Œå› æ­¤ä¸ä¼šå¯¼è‡´é¢å¤–çš„å¼€é”€ã€‚å‡½æ•°ä¹‹æ‰€ä»¥å‘½åä¸ºCFBridgingRelease-ï¼Œæ˜¯å› ä¸ºä¸€èˆ¬ä½ ä¼šåœ¨éœ€è¦ä½¿ç”¨CFRelease-é‡Šæ”¾å¯¹è±¡çš„åœ°æ–¹ï¼Œè°ƒç”¨CFBridgingRelease-æ¥ä¼ é€’å¯¹è±¡çš„æ‰€æœ‰æƒã€‚" class="headerlink" title="ä¸ºäº†ä»£ç æ›´åŠ å¯è¯»å’Œå®¹æ˜“ç†è§£ï¼ŒiOSè¿˜æä¾›äº†ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼šCFBridgingRelease()ã€‚å‡½æ•°æ‰€åšäº‹æƒ…å’Œ __bridge_transfer å¼ºåˆ¶è½¬æ¢å®Œå…¨ä¸€æ ·ï¼Œä½†æ›´åŠ ç®€æ´å’Œæ¸…æ™°ã€‚CFBridgingRelease() å‡½æ•°å®šä¹‰ä¸ºå†…è”å‡½æ•°ï¼Œå› æ­¤ä¸ä¼šå¯¼è‡´é¢å¤–çš„å¼€é”€ã€‚å‡½æ•°ä¹‹æ‰€ä»¥å‘½åä¸ºCFBridgingRelease()ï¼Œæ˜¯å› ä¸ºä¸€èˆ¬ä½ ä¼šåœ¨éœ€è¦ä½¿ç”¨CFRelease()é‡Šæ”¾å¯¹è±¡çš„åœ°æ–¹ï¼Œè°ƒç”¨CFBridgingRelease()æ¥ä¼ é€’å¯¹è±¡çš„æ‰€æœ‰æƒã€‚"></a>ä¸ºäº†ä»£ç æ›´åŠ å¯è¯»å’Œå®¹æ˜“ç†è§£ï¼ŒiOSè¿˜æä¾›äº†ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼šCFBridgingRelease()ã€‚å‡½æ•°æ‰€åšäº‹æƒ…å’Œ __bridge_transfer å¼ºåˆ¶è½¬æ¢å®Œå…¨ä¸€æ ·ï¼Œä½†æ›´åŠ ç®€æ´å’Œæ¸…æ™°ã€‚CFBridgingRelease() å‡½æ•°å®šä¹‰ä¸ºå†…è”å‡½æ•°ï¼Œå› æ­¤ä¸ä¼šå¯¼è‡´é¢å¤–çš„å¼€é”€ã€‚å‡½æ•°ä¹‹æ‰€ä»¥å‘½åä¸ºCFBridgingRelease()ï¼Œæ˜¯å› ä¸ºä¸€èˆ¬ä½ ä¼šåœ¨éœ€è¦ä½¿ç”¨CFRelease()é‡Šæ”¾å¯¹è±¡çš„åœ°æ–¹ï¼Œè°ƒç”¨CFBridgingRelease()æ¥ä¼ é€’å¯¹è±¡çš„æ‰€æœ‰æƒã€‚</h5><h4 id="æ¸…æ™°æ˜äº†"><a href="#æ¸…æ™°æ˜äº†" class="headerlink" title="æ¸…æ™°æ˜äº†"></a>æ¸…æ™°æ˜äº†</h4><h5 id="å› æ­¤æœ€åæˆ‘ä»¬çš„ä»£ç å¦‚ä¸‹ï¼š"><a href="#å› æ­¤æœ€åæˆ‘ä»¬çš„ä»£ç å¦‚ä¸‹ï¼š" class="headerlink" title="å› æ­¤æœ€åæˆ‘ä»¬çš„ä»£ç å¦‚ä¸‹ï¼š"></a>å› æ­¤æœ€åæˆ‘ä»¬çš„ä»£ç å¦‚ä¸‹ï¼š</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> - (NSString *)escape:(NSString *)text</span><br><span class="line">&#123;</span><br><span class="line">     <span class="built_in">return</span> CFBridgingRelease(CFURLCreateStringByAddingPercentEscapes(</span><br><span class="line">						NULL,</span><br><span class="line">						(__bridge CFStringRef)text,</span><br><span class="line">						NULL,</span><br><span class="line">						CFSTR(<span class="string">"!*'();:@&amp;=+$,/?%#[]"</span>),</span><br><span class="line">						CFStringConvertNSStringEncodingToEncoding(NSUTF8StringEncoding)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å¦ä¸€ä¸ªå¸¸è§çš„éœ€è¦CFBridgingReleaseçš„æƒ…å†µæ˜¯AddressBook-frameworkï¼š"><a href="#å¦ä¸€ä¸ªå¸¸è§çš„éœ€è¦CFBridgingReleaseçš„æƒ…å†µæ˜¯AddressBook-frameworkï¼š" class="headerlink" title="å¦ä¸€ä¸ªå¸¸è§çš„éœ€è¦CFBridgingReleaseçš„æƒ…å†µæ˜¯AddressBook frameworkï¼š"></a>å¦ä¸€ä¸ªå¸¸è§çš„éœ€è¦CFBridgingReleaseçš„æƒ…å†µæ˜¯AddressBook frameworkï¼š</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- (NSString *)firstName</span><br><span class="line">&#123;</span><br><span class="line">     <span class="built_in">return</span> CFBridgingRelease(ABRecordCopyCompositeName(...));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ€»ç»“-åªè¦ä½ è°ƒç”¨å‘½åä¸ºCreate-Copy-Retainçš„Core-Foundationå‡½æ•°ï¼Œä½ éƒ½éœ€è¦ä½¿ç”¨-CFBridgingRelease-å®‰å…¨åœ°å°†å€¼ä¼ é€’ç»™ARCã€‚"><a href="#æ€»ç»“-åªè¦ä½ è°ƒç”¨å‘½åä¸ºCreate-Copy-Retainçš„Core-Foundationå‡½æ•°ï¼Œä½ éƒ½éœ€è¦ä½¿ç”¨-CFBridgingRelease-å®‰å…¨åœ°å°†å€¼ä¼ é€’ç»™ARCã€‚" class="headerlink" title="æ€»ç»“:åªè¦ä½ è°ƒç”¨å‘½åä¸ºCreate, Copy, Retainçš„Core Foundationå‡½æ•°ï¼Œä½ éƒ½éœ€è¦ä½¿ç”¨ CFBridgingRelease() å®‰å…¨åœ°å°†å€¼ä¼ é€’ç»™ARCã€‚"></a>æ€»ç»“:åªè¦ä½ è°ƒç”¨å‘½åä¸ºCreate, Copy, Retainçš„Core Foundationå‡½æ•°ï¼Œä½ éƒ½éœ€è¦ä½¿ç”¨ CFBridgingRelease() å®‰å…¨åœ°å°†å€¼ä¼ é€’ç»™ARCã€‚</h3><h5 id="bridge-retained-åˆ™æ­£å¥½ç›¸åï¼Œå‡è®¾ä½ æœ‰ä¸€ä¸ªNSStringå¯¹è±¡ï¼Œå¹¶ä¸”è¦å°†å®ƒä¼ é€’ç»™æŸä¸ªCore-Foundation-APIï¼Œè¯¥å‡½æ•°å¸Œæœ›æ¥æ”¶è¿™ä¸ªstringå¯¹è±¡çš„æ‰€æœ‰æƒã€‚è¿™æ—¶å€™ä½ å°±ä¸å¸Œæœ›ARCä¹Ÿå»é‡Šæ”¾è¯¥å¯¹è±¡ï¼Œå¦åˆ™å°±ä¼šå¯¹åŒä¸€å¯¹è±¡é‡Šæ”¾ä¸¤æ¬¡ï¼Œè€Œä¸”å¿…å°†å¯¼è‡´åº”ç”¨å´©æºƒï¼æ¢å¥è¯è¯´ï¼Œä½¿ç”¨-bridge-retained-å°†å¯¹è±¡çš„æ‰€æœ‰æƒç»™äºˆ-Core-Foundationï¼Œè€ŒARCä¸å†è´Ÿè´£é‡Šæ”¾è¯¥å¯¹è±¡ã€‚"><a href="#bridge-retained-åˆ™æ­£å¥½ç›¸åï¼Œå‡è®¾ä½ æœ‰ä¸€ä¸ªNSStringå¯¹è±¡ï¼Œå¹¶ä¸”è¦å°†å®ƒä¼ é€’ç»™æŸä¸ªCore-Foundation-APIï¼Œè¯¥å‡½æ•°å¸Œæœ›æ¥æ”¶è¿™ä¸ªstringå¯¹è±¡çš„æ‰€æœ‰æƒã€‚è¿™æ—¶å€™ä½ å°±ä¸å¸Œæœ›ARCä¹Ÿå»é‡Šæ”¾è¯¥å¯¹è±¡ï¼Œå¦åˆ™å°±ä¼šå¯¹åŒä¸€å¯¹è±¡é‡Šæ”¾ä¸¤æ¬¡ï¼Œè€Œä¸”å¿…å°†å¯¼è‡´åº”ç”¨å´©æºƒï¼æ¢å¥è¯è¯´ï¼Œä½¿ç”¨-bridge-retained-å°†å¯¹è±¡çš„æ‰€æœ‰æƒç»™äºˆ-Core-Foundationï¼Œè€ŒARCä¸å†è´Ÿè´£é‡Šæ”¾è¯¥å¯¹è±¡ã€‚" class="headerlink" title=" bridge_retained  åˆ™æ­£å¥½ç›¸åï¼Œå‡è®¾ä½ æœ‰ä¸€ä¸ªNSStringå¯¹è±¡ï¼Œå¹¶ä¸”è¦å°†å®ƒä¼ é€’ç»™æŸä¸ªCore Foundation APIï¼Œè¯¥å‡½æ•°å¸Œæœ›æ¥æ”¶è¿™ä¸ªstringå¯¹è±¡çš„æ‰€æœ‰æƒã€‚è¿™æ—¶å€™ä½ å°±ä¸å¸Œæœ›ARCä¹Ÿå»é‡Šæ”¾è¯¥å¯¹è±¡ï¼Œå¦åˆ™å°±ä¼šå¯¹åŒä¸€å¯¹è±¡é‡Šæ”¾ä¸¤æ¬¡ï¼Œè€Œä¸”å¿…å°†å¯¼è‡´åº”ç”¨å´©æºƒï¼æ¢å¥è¯è¯´ï¼Œä½¿ç”¨ bridge_retained å°†å¯¹è±¡çš„æ‰€æœ‰æƒç»™äºˆ Core Foundationï¼Œè€ŒARCä¸å†è´Ÿè´£é‡Šæ”¾è¯¥å¯¹è±¡ã€‚"></a><font color="#e4393c" size="4"> <strong>bridge_retained </strong></font> åˆ™æ­£å¥½ç›¸åï¼Œå‡è®¾ä½ æœ‰ä¸€ä¸ªNSStringå¯¹è±¡ï¼Œå¹¶ä¸”è¦å°†å®ƒä¼ é€’ç»™æŸä¸ªCore Foundation APIï¼Œè¯¥å‡½æ•°å¸Œæœ›æ¥æ”¶è¿™ä¸ªstringå¯¹è±¡çš„æ‰€æœ‰æƒã€‚è¿™æ—¶å€™ä½ å°±ä¸å¸Œæœ›ARCä¹Ÿå»é‡Šæ”¾è¯¥å¯¹è±¡ï¼Œå¦åˆ™å°±ä¼šå¯¹åŒä¸€å¯¹è±¡é‡Šæ”¾ä¸¤æ¬¡ï¼Œè€Œä¸”å¿…å°†å¯¼è‡´åº”ç”¨å´©æºƒï¼æ¢å¥è¯è¯´ï¼Œä½¿ç”¨ bridge_retained å°†å¯¹è±¡çš„æ‰€æœ‰æƒç»™äºˆ Core Foundationï¼Œè€ŒARCä¸å†è´Ÿè´£é‡Šæ”¾è¯¥å¯¹è±¡ã€‚</h5><h5 id="å¦‚ä¸‹é¢ä¾‹å­æ‰€ç¤ºï¼š"><a href="#å¦‚ä¸‹é¢ä¾‹å­æ‰€ç¤ºï¼š" class="headerlink" title="å¦‚ä¸‹é¢ä¾‹å­æ‰€ç¤ºï¼š"></a>å¦‚ä¸‹é¢ä¾‹å­æ‰€ç¤ºï¼š</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NSString *s1 = [[NSString alloc] initWithFormat:@<span class="string">"Hello, %@!"</span>, name];</span><br><span class="line">CFStringRef s2 = (__bridge_retained CFStringRef)s1;</span><br><span class="line">// <span class="keyword">do</span> something with s2</span><br><span class="line">// . . .</span><br><span class="line">CFRelease(s2);</span><br></pre></td></tr></table></figure>
<h5 id="ä¸€æ—¦-bridge-retained-CFStringRef-è½¬æ¢å®Œæˆï¼ŒARCå°±ä¸å†è´Ÿè´£é‡Šæ”¾è¯¥å¯¹è±¡ã€‚å¦‚æœä½ åœ¨è¿™é‡Œä½¿ç”¨-bridgeï¼Œåº”ç”¨å°±å¾ˆå¯èƒ½ä¼šå´©æºƒã€‚ARCå¯èƒ½åœ¨Core-Foundationæ­£åœ¨ä½¿ç”¨è¯¥å¯¹è±¡æ—¶ï¼Œé‡Šæ”¾æ‰å®ƒã€‚"><a href="#ä¸€æ—¦-bridge-retained-CFStringRef-è½¬æ¢å®Œæˆï¼ŒARCå°±ä¸å†è´Ÿè´£é‡Šæ”¾è¯¥å¯¹è±¡ã€‚å¦‚æœä½ åœ¨è¿™é‡Œä½¿ç”¨-bridgeï¼Œåº”ç”¨å°±å¾ˆå¯èƒ½ä¼šå´©æºƒã€‚ARCå¯èƒ½åœ¨Core-Foundationæ­£åœ¨ä½¿ç”¨è¯¥å¯¹è±¡æ—¶ï¼Œé‡Šæ”¾æ‰å®ƒã€‚" class="headerlink" title="ä¸€æ—¦ (bridge_retained CFStringRef) è½¬æ¢å®Œæˆï¼ŒARCå°±ä¸å†è´Ÿè´£é‡Šæ”¾è¯¥å¯¹è±¡ã€‚å¦‚æœä½ åœ¨è¿™é‡Œä½¿ç”¨ bridgeï¼Œåº”ç”¨å°±å¾ˆå¯èƒ½ä¼šå´©æºƒã€‚ARCå¯èƒ½åœ¨Core Foundationæ­£åœ¨ä½¿ç”¨è¯¥å¯¹è±¡æ—¶ï¼Œé‡Šæ”¾æ‰å®ƒã€‚"></a>ä¸€æ—¦ (<strong>bridge_retained CFStringRef) è½¬æ¢å®Œæˆï¼ŒARCå°±ä¸å†è´Ÿè´£é‡Šæ”¾è¯¥å¯¹è±¡ã€‚å¦‚æœä½ åœ¨è¿™é‡Œä½¿ç”¨ </strong>bridgeï¼Œåº”ç”¨å°±å¾ˆå¯èƒ½ä¼šå´©æºƒã€‚ARCå¯èƒ½åœ¨Core Foundationæ­£åœ¨ä½¿ç”¨è¯¥å¯¹è±¡æ—¶ï¼Œé‡Šæ”¾æ‰å®ƒã€‚</h5><h5 id="åŒæ ·-bridge-retained-ä¹Ÿæœ‰ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼šCFBridgingRetain-ã€‚ä»åå­—å°±å¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªå‡½æ•°ä¼šè®©Core-Foundationæ‰§è¡Œretainï¼Œå®é™…å¦‚ä¸‹ï¼š"><a href="#åŒæ ·-bridge-retained-ä¹Ÿæœ‰ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼šCFBridgingRetain-ã€‚ä»åå­—å°±å¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªå‡½æ•°ä¼šè®©Core-Foundationæ‰§è¡Œretainï¼Œå®é™…å¦‚ä¸‹ï¼š" class="headerlink" title="åŒæ · __bridge_retained  ä¹Ÿæœ‰ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼šCFBridgingRetain()ã€‚ä»åå­—å°±å¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªå‡½æ•°ä¼šè®©Core Foundationæ‰§è¡Œretainï¼Œå®é™…å¦‚ä¸‹ï¼š"></a>åŒæ ·<font color="#e4393c" size="4"> __bridge_retained </font> ä¹Ÿæœ‰ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼šCFBridgingRetain()ã€‚ä»åå­—å°±å¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªå‡½æ•°ä¼šè®©Core Foundationæ‰§è¡Œretainï¼Œå®é™…å¦‚ä¸‹ï¼š</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CFStringRef s2 = CFBridgingRetain(s1);</span><br><span class="line">// . . .</span><br><span class="line">CFRelease(s2);</span><br></pre></td></tr></table></figure>
<h5 id="ç°åœ¨ä½ åº”è¯¥æ˜ç™½äº†ï¼Œä¸Šé¢ä¾‹å­çš„CFRelease-æ˜¯å’ŒCFBridgingRetain-å¯¹åº”çš„ã€‚"><a href="#ç°åœ¨ä½ åº”è¯¥æ˜ç™½äº†ï¼Œä¸Šé¢ä¾‹å­çš„CFRelease-æ˜¯å’ŒCFBridgingRetain-å¯¹åº”çš„ã€‚" class="headerlink" title="ç°åœ¨ä½ åº”è¯¥æ˜ç™½äº†ï¼Œä¸Šé¢ä¾‹å­çš„CFRelease()æ˜¯å’ŒCFBridgingRetain()å¯¹åº”çš„ã€‚"></a>ç°åœ¨ä½ åº”è¯¥æ˜ç™½äº†ï¼Œä¸Šé¢ä¾‹å­çš„CFRelease()æ˜¯å’ŒCFBridgingRetain()å¯¹åº”çš„ã€‚</h5><h3 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h3><ul>
<li>ä½¿ç”¨<font color="#e4393c" size="4">  CFBridgingRelease()</font>ï¼Œä»Core Foundationä¼ é€’æ‰€æœ‰æƒç»™Objective-Cï¼›</li>
<li>ä½¿ç”¨<font color="#e4393c" size="4"> CFBridgingRetain() </font>ï¼Œä»Objective-Cä¼ é€’æ‰€æœ‰æƒç»™Core Foundationï¼›</li>
<li>ä½¿ç”¨__bridegï¼Œè¡¨ç¤ºä¸´æ—¶ä½¿ç”¨æŸç§ç±»å‹ï¼Œä¸æ”¹å˜å¯¹è±¡çš„æ‰€æœ‰æƒã€‚</li>
</ul>
<hr>
<h2 id="Delegateå’ŒWeak-Property"><a href="#Delegateå’ŒWeak-Property" class="headerlink" title="Delegateå’ŒWeak Property"></a>Delegateå’ŒWeak Property</h2><h5 id="ä½¿ç”¨Delegateæ¨¡å¼æ—¶ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šä½¿ç”¨weak-propertyæ¥å¼•ç”¨delegateï¼Œè¿™æ ·å¯ä»¥é¿å…æ‰€æœ‰æƒå›ç¯ã€‚"><a href="#ä½¿ç”¨Delegateæ¨¡å¼æ—¶ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šä½¿ç”¨weak-propertyæ¥å¼•ç”¨delegateï¼Œè¿™æ ·å¯ä»¥é¿å…æ‰€æœ‰æƒå›ç¯ã€‚" class="headerlink" title="ä½¿ç”¨Delegateæ¨¡å¼æ—¶ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šä½¿ç”¨weak propertyæ¥å¼•ç”¨delegateï¼Œè¿™æ ·å¯ä»¥é¿å…æ‰€æœ‰æƒå›ç¯ã€‚"></a>ä½¿ç”¨Delegateæ¨¡å¼æ—¶ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šä½¿ç”¨weak propertyæ¥å¼•ç”¨delegateï¼Œè¿™æ ·å¯ä»¥é¿å…æ‰€æœ‰æƒå›ç¯ã€‚</h5><p><img src="/2019/05/20/iOSå†…å­˜ç®¡ç†-ARC/a007.png" alt></p>
<h5 id="retainå¾ªç¯å¼•ç”¨çš„æ¦‚å¿µï¼Œä¸¤ä¸ªå¯¹è±¡äº’ç›¸retainæ—¶ï¼Œä¼šå¯¼è‡´ä¸¤ä¸ªå¯¹è±¡éƒ½æ— æ³•è¢«é‡Šæ”¾ï¼Œè¿™ä¹Ÿæ˜¯å†…å­˜æ³„æ¼çš„å¸¸è§åŸå› ä¹‹ä¸€ã€‚å› æ­¤éœ€è¦ä½ ä½¿ç”¨weakæŒ‡é’ˆæ¥é¿å…ã€‚"><a href="#retainå¾ªç¯å¼•ç”¨çš„æ¦‚å¿µï¼Œä¸¤ä¸ªå¯¹è±¡äº’ç›¸retainæ—¶ï¼Œä¼šå¯¼è‡´ä¸¤ä¸ªå¯¹è±¡éƒ½æ— æ³•è¢«é‡Šæ”¾ï¼Œè¿™ä¹Ÿæ˜¯å†…å­˜æ³„æ¼çš„å¸¸è§åŸå› ä¹‹ä¸€ã€‚å› æ­¤éœ€è¦ä½ ä½¿ç”¨weakæŒ‡é’ˆæ¥é¿å…ã€‚" class="headerlink" title="retainå¾ªç¯å¼•ç”¨çš„æ¦‚å¿µï¼Œä¸¤ä¸ªå¯¹è±¡äº’ç›¸retainæ—¶ï¼Œä¼šå¯¼è‡´ä¸¤ä¸ªå¯¹è±¡éƒ½æ— æ³•è¢«é‡Šæ”¾ï¼Œè¿™ä¹Ÿæ˜¯å†…å­˜æ³„æ¼çš„å¸¸è§åŸå› ä¹‹ä¸€ã€‚å› æ­¤éœ€è¦ä½ ä½¿ç”¨weakæŒ‡é’ˆæ¥é¿å…ã€‚"></a>retainå¾ªç¯å¼•ç”¨çš„æ¦‚å¿µï¼Œä¸¤ä¸ªå¯¹è±¡äº’ç›¸retainæ—¶ï¼Œä¼šå¯¼è‡´ä¸¤ä¸ªå¯¹è±¡éƒ½æ— æ³•è¢«é‡Šæ”¾ï¼Œè¿™ä¹Ÿæ˜¯å†…å­˜æ³„æ¼çš„å¸¸è§åŸå› ä¹‹ä¸€ã€‚å› æ­¤éœ€è¦ä½ ä½¿ç”¨weakæŒ‡é’ˆæ¥é¿å…ã€‚</h5><h5 id="è¿˜æœ‰Blockä½¿ç”¨ä¸å½“å¯¼è‡´çš„å¾ªç¯å¼•ç”¨ï¼Œä¸‹é¢ä¼šæåˆ°"><a href="#è¿˜æœ‰Blockä½¿ç”¨ä¸å½“å¯¼è‡´çš„å¾ªç¯å¼•ç”¨ï¼Œä¸‹é¢ä¼šæåˆ°" class="headerlink" title="è¿˜æœ‰Blockä½¿ç”¨ä¸å½“å¯¼è‡´çš„å¾ªç¯å¼•ç”¨ï¼Œä¸‹é¢ä¼šæåˆ°"></a>è¿˜æœ‰Blockä½¿ç”¨ä¸å½“å¯¼è‡´çš„å¾ªç¯å¼•ç”¨ï¼Œä¸‹é¢ä¼šæåˆ°</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DetailViewController *controller = [[DetailViewController alloc] initWithNibName:@<span class="string">"DetailViewController"</span> bundle:nil];</span><br><span class="line">controller.delegate = self;</span><br><span class="line">[self presentViewController:controller animated:YES completion:nil];</span><br></pre></td></tr></table></figure>
<h5 id="åœ¨ä¸Šé¢ä»£ç ä¸­ï¼ŒMainViewControlleråˆ›å»ºä¸€ä¸ªDetailViewControllerï¼Œå¹¶è°ƒç”¨presentViewControllerå°†viewå‘ˆç°å‡ºæ¥ï¼Œä»è€Œæ‹¥æœ‰äº†ä¸€ä¸ªstrongæŒ‡é’ˆæŒ‡å‘åˆ›å»ºçš„DetailViewControllerå¯¹è±¡ã€‚åè¿‡æ¥ï¼ŒDetailViewControllerä¹Ÿé€šè¿‡delegateæ‹¥æœ‰äº†ä¸€ä¸ªæŒ‡å‘MainViewControllerçš„weakæŒ‡é’ˆã€‚"><a href="#åœ¨ä¸Šé¢ä»£ç ä¸­ï¼ŒMainViewControlleråˆ›å»ºä¸€ä¸ªDetailViewControllerï¼Œå¹¶è°ƒç”¨presentViewControllerå°†viewå‘ˆç°å‡ºæ¥ï¼Œä»è€Œæ‹¥æœ‰äº†ä¸€ä¸ªstrongæŒ‡é’ˆæŒ‡å‘åˆ›å»ºçš„DetailViewControllerå¯¹è±¡ã€‚åè¿‡æ¥ï¼ŒDetailViewControllerä¹Ÿé€šè¿‡delegateæ‹¥æœ‰äº†ä¸€ä¸ªæŒ‡å‘MainViewControllerçš„weakæŒ‡é’ˆã€‚" class="headerlink" title="åœ¨ä¸Šé¢ä»£ç ä¸­ï¼ŒMainViewControlleråˆ›å»ºä¸€ä¸ªDetailViewControllerï¼Œå¹¶è°ƒç”¨presentViewControllerå°†viewå‘ˆç°å‡ºæ¥ï¼Œä»è€Œæ‹¥æœ‰äº†ä¸€ä¸ªstrongæŒ‡é’ˆæŒ‡å‘åˆ›å»ºçš„DetailViewControllerå¯¹è±¡ã€‚åè¿‡æ¥ï¼ŒDetailViewControllerä¹Ÿé€šè¿‡delegateæ‹¥æœ‰äº†ä¸€ä¸ªæŒ‡å‘MainViewControllerçš„weakæŒ‡é’ˆã€‚"></a>åœ¨ä¸Šé¢ä»£ç ä¸­ï¼ŒMainViewControlleråˆ›å»ºä¸€ä¸ªDetailViewControllerï¼Œå¹¶è°ƒç”¨presentViewControllerå°†viewå‘ˆç°å‡ºæ¥ï¼Œä»è€Œæ‹¥æœ‰äº†ä¸€ä¸ªstrongæŒ‡é’ˆæŒ‡å‘åˆ›å»ºçš„DetailViewControllerå¯¹è±¡ã€‚åè¿‡æ¥ï¼ŒDetailViewControllerä¹Ÿé€šè¿‡delegateæ‹¥æœ‰äº†ä¸€ä¸ªæŒ‡å‘MainViewControllerçš„weakæŒ‡é’ˆã€‚</h5><h5 id="å½“MainViewControllerè°ƒç”¨dismissViewControllerAnimated-æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨å¤±å»DetailViewControllerçš„strongå¼•ç”¨ï¼Œè¿™æ—¶å€™DetailViewControllerå¯¹è±¡å°±ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾ã€‚"><a href="#å½“MainViewControllerè°ƒç”¨dismissViewControllerAnimated-æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨å¤±å»DetailViewControllerçš„strongå¼•ç”¨ï¼Œè¿™æ—¶å€™DetailViewControllerå¯¹è±¡å°±ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾ã€‚" class="headerlink" title="å½“MainViewControllerè°ƒç”¨dismissViewControllerAnimated:æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨å¤±å»DetailViewControllerçš„strongå¼•ç”¨ï¼Œè¿™æ—¶å€™DetailViewControllerå¯¹è±¡å°±ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾ã€‚"></a>å½“MainViewControllerè°ƒç”¨dismissViewControllerAnimated:æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨å¤±å»DetailViewControllerçš„strongå¼•ç”¨ï¼Œè¿™æ—¶å€™DetailViewControllerå¯¹è±¡å°±ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾ã€‚</h5><h5 id="å¦‚æœè¿™ä¸¤ä¸ªæŒ‡é’ˆéƒ½æ˜¯strongç±»å‹ï¼Œå°±ä¼šå‡ºç°æ‰€æœ‰æƒå›ç¯ã€‚å¯¼è‡´å¯¹è±¡æ— æ³•åœ¨é€‚å½“çš„æ—¶å€™è¢«é‡Šæ”¾ã€‚"><a href="#å¦‚æœè¿™ä¸¤ä¸ªæŒ‡é’ˆéƒ½æ˜¯strongç±»å‹ï¼Œå°±ä¼šå‡ºç°æ‰€æœ‰æƒå›ç¯ã€‚å¯¼è‡´å¯¹è±¡æ— æ³•åœ¨é€‚å½“çš„æ—¶å€™è¢«é‡Šæ”¾ã€‚" class="headerlink" title="å¦‚æœè¿™ä¸¤ä¸ªæŒ‡é’ˆéƒ½æ˜¯strongç±»å‹ï¼Œå°±ä¼šå‡ºç°æ‰€æœ‰æƒå›ç¯ã€‚å¯¼è‡´å¯¹è±¡æ— æ³•åœ¨é€‚å½“çš„æ—¶å€™è¢«é‡Šæ”¾ã€‚"></a>å¦‚æœè¿™ä¸¤ä¸ªæŒ‡é’ˆéƒ½æ˜¯strongç±»å‹ï¼Œå°±ä¼šå‡ºç°æ‰€æœ‰æƒå›ç¯ã€‚å¯¼è‡´å¯¹è±¡æ— æ³•åœ¨é€‚å½“çš„æ—¶å€™è¢«é‡Šæ”¾ã€‚</h5><h4 id="unsafe-unretained"><a href="#unsafe-unretained" class="headerlink" title="unsafe_unretained"></a>unsafe_unretained</h4><h5 id="é™¤äº†strongå’Œweakï¼Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªunsafe-unretainedå…³é”®å­—ï¼Œä¸€èˆ¬ä½ ä¸ä¼šä½¿ç”¨åˆ°å®ƒã€‚å£°æ˜ä¸ºunsafe-unretainedçš„å˜é‡æˆ–propertyï¼Œç¼–è¯‘å™¨ä¸ä¼šä¸ºå…¶è‡ªåŠ¨æ·»åŠ retainå’Œreleaseã€‚unsafe-unretainedåªæ˜¯ä¸ºäº†å…¼å®¹iOS-4ï¼Œå› ä¸ºiOS-4æ²¡æœ‰weak-pointer-systemã€‚"><a href="#é™¤äº†strongå’Œweakï¼Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªunsafe-unretainedå…³é”®å­—ï¼Œä¸€èˆ¬ä½ ä¸ä¼šä½¿ç”¨åˆ°å®ƒã€‚å£°æ˜ä¸ºunsafe-unretainedçš„å˜é‡æˆ–propertyï¼Œç¼–è¯‘å™¨ä¸ä¼šä¸ºå…¶è‡ªåŠ¨æ·»åŠ retainå’Œreleaseã€‚unsafe-unretainedåªæ˜¯ä¸ºäº†å…¼å®¹iOS-4ï¼Œå› ä¸ºiOS-4æ²¡æœ‰weak-pointer-systemã€‚" class="headerlink" title="é™¤äº†strongå’Œweakï¼Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªunsafe_unretainedå…³é”®å­—ï¼Œä¸€èˆ¬ä½ ä¸ä¼šä½¿ç”¨åˆ°å®ƒã€‚å£°æ˜ä¸ºunsafe_unretainedçš„å˜é‡æˆ–propertyï¼Œç¼–è¯‘å™¨ä¸ä¼šä¸ºå…¶è‡ªåŠ¨æ·»åŠ retainå’Œreleaseã€‚unsafe_unretainedåªæ˜¯ä¸ºäº†å…¼å®¹iOS 4ï¼Œå› ä¸ºiOS 4æ²¡æœ‰weak pointer systemã€‚"></a>é™¤äº†strongå’Œweakï¼Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªunsafe_unretainedå…³é”®å­—ï¼Œä¸€èˆ¬ä½ ä¸ä¼šä½¿ç”¨åˆ°å®ƒã€‚å£°æ˜ä¸ºunsafe_unretainedçš„å˜é‡æˆ–propertyï¼Œç¼–è¯‘å™¨ä¸ä¼šä¸ºå…¶è‡ªåŠ¨æ·»åŠ retainå’Œreleaseã€‚unsafe_unretainedåªæ˜¯ä¸ºäº†å…¼å®¹iOS 4ï¼Œå› ä¸ºiOS 4æ²¡æœ‰weak pointer systemã€‚</h5><h5 id="è¿™é‡Œå¤§å®¶åšä¸ªäº†è§£å°±å¯ä»¥"><a href="#è¿™é‡Œå¤§å®¶åšä¸ªäº†è§£å°±å¯ä»¥" class="headerlink" title="è¿™é‡Œå¤§å®¶åšä¸ªäº†è§£å°±å¯ä»¥"></a>è¿™é‡Œå¤§å®¶åšä¸ªäº†è§£å°±å¯ä»¥</h5><hr>
<h2 id="ARCå’ŒBlock"><a href="#ARCå’ŒBlock" class="headerlink" title="ARCå’ŒBlock"></a>ARCå’ŒBlock</h2><h5 id="ç•¥"><a href="#ç•¥" class="headerlink" title="ç•¥"></a>ç•¥</h5><hr>
<h2 id="ARCå’ŒSingleton"><a href="#ARCå’ŒSingleton" class="headerlink" title="ARCå’ŒSingleton"></a>ARCå’ŒSingleton</h2><h4 id="MRC"><a href="#MRC" class="headerlink" title="MRC"></a>MRC</h4><h5 id="å¦‚æœä½ çš„åº”ç”¨ä½¿ç”¨äº†Singletonï¼Œä½ çš„å®ç°å¯èƒ½åŒ…å«ä»¥ä¸‹æ–¹æ³•ï¼š"><a href="#å¦‚æœä½ çš„åº”ç”¨ä½¿ç”¨äº†Singletonï¼Œä½ çš„å®ç°å¯èƒ½åŒ…å«ä»¥ä¸‹æ–¹æ³•ï¼š" class="headerlink" title="å¦‚æœä½ çš„åº”ç”¨ä½¿ç”¨äº†Singletonï¼Œä½ çš„å®ç°å¯èƒ½åŒ…å«ä»¥ä¸‹æ–¹æ³•ï¼š"></a>å¦‚æœä½ çš„åº”ç”¨ä½¿ç”¨äº†Singletonï¼Œä½ çš„å®ç°å¯èƒ½åŒ…å«ä»¥ä¸‹æ–¹æ³•ï¼š</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"> + (id)allocWithZone:(NSZone *)zone</span><br><span class="line">&#123;</span><br><span class="line">     <span class="built_in">return</span> [[self sharedInstance] retain];</span><br><span class="line">&#125;</span><br><span class="line">- (id)copyWithZone:(NSZone *)zone</span><br><span class="line">&#123;</span><br><span class="line">     <span class="built_in">return</span> self;</span><br><span class="line">&#125;</span><br><span class="line">- (id)retain</span><br><span class="line">&#123;</span><br><span class="line">     <span class="built_in">return</span> self;</span><br><span class="line">&#125;</span><br><span class="line">- (NSUInteger)retainCount</span><br><span class="line">&#123;</span><br><span class="line">     <span class="built_in">return</span> NSUIntegerMax;</span><br><span class="line">&#125;</span><br><span class="line">- (oneway void)release</span><br><span class="line">&#123;</span><br><span class="line">     // empty</span><br><span class="line">&#125;</span><br><span class="line">- (id)autorelease</span><br><span class="line">&#123; </span><br><span class="line">     <span class="built_in">return</span> self;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="è¿™æ˜¯å…¸å‹çš„singletonå®ç°æ¨¡å¼ï¼Œretainå’Œreleaseéƒ½è¦†ç›–æ‰ï¼Œä½¿å…¶ä¸èƒ½åˆ›å»ºå¤šä¸ªå®ä¾‹å¯¹è±¡ã€‚æ¯•ç«ŸSingletonå°±æ˜¯ä¸ºäº†åªåˆ›å»ºä¸€ä¸ªå…¨å±€å¯¹è±¡ã€‚"><a href="#è¿™æ˜¯å…¸å‹çš„singletonå®ç°æ¨¡å¼ï¼Œretainå’Œreleaseéƒ½è¦†ç›–æ‰ï¼Œä½¿å…¶ä¸èƒ½åˆ›å»ºå¤šä¸ªå®ä¾‹å¯¹è±¡ã€‚æ¯•ç«ŸSingletonå°±æ˜¯ä¸ºäº†åªåˆ›å»ºä¸€ä¸ªå…¨å±€å¯¹è±¡ã€‚" class="headerlink" title="è¿™æ˜¯å…¸å‹çš„singletonå®ç°æ¨¡å¼ï¼Œretainå’Œreleaseéƒ½è¦†ç›–æ‰ï¼Œä½¿å…¶ä¸èƒ½åˆ›å»ºå¤šä¸ªå®ä¾‹å¯¹è±¡ã€‚æ¯•ç«ŸSingletonå°±æ˜¯ä¸ºäº†åªåˆ›å»ºä¸€ä¸ªå…¨å±€å¯¹è±¡ã€‚"></a>è¿™æ˜¯å…¸å‹çš„singletonå®ç°æ¨¡å¼ï¼Œretainå’Œreleaseéƒ½è¦†ç›–æ‰ï¼Œä½¿å…¶ä¸èƒ½åˆ›å»ºå¤šä¸ªå®ä¾‹å¯¹è±¡ã€‚æ¯•ç«ŸSingletonå°±æ˜¯ä¸ºäº†åªåˆ›å»ºä¸€ä¸ªå…¨å±€å¯¹è±¡ã€‚</h5><h4 id="ARC"><a href="#ARC" class="headerlink" title="ARC"></a>ARC</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#import "AppManager.h"</span></span><br><span class="line"></span><br><span class="line">static AppManager   *_appManager = nil;</span><br><span class="line"></span><br><span class="line">@implementation AppManager</span><br><span class="line"></span><br><span class="line">+ (instancetype)sharedInstance &#123;</span><br><span class="line">    static dispatch_once_t  onceToken;</span><br><span class="line">    dispatch_once(&amp;onceToken, ^&#123;</span><br><span class="line">        _appManager = [[super allocWithZone:NULL] init];</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">return</span> _appManager;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">+ (instancetype)allocWithZone:(struct _NSZone *)zone &#123;</span><br><span class="line">    <span class="built_in">return</span> [self sharedInstance];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">+ (id)copyWithZone:(struct _NSZone *)zone OBJC_ARC_UNAVAILABLE;</span><br><span class="line">+ (id)mutableCopyWithZone:(struct _NSZone *)zone OBJC_ARC_UNAVAILABLE;</span><br></pre></td></tr></table></figure>
<h5 id="åœ¨ARCä¸­ï¼Œæ‰€æœ‰æŒ‡é’ˆå˜é‡é»˜è®¤éƒ½æ˜¯nilï¼Œåœ¨ARCä¹‹å‰ï¼Œåªæœ‰å®ä¾‹å˜é‡æ‰ä¼šé»˜è®¤ä¸ºnilã€‚å¦‚æœä½ ç¼–å†™ä¸‹é¢ä»£ç ï¼š"><a href="#åœ¨ARCä¸­ï¼Œæ‰€æœ‰æŒ‡é’ˆå˜é‡é»˜è®¤éƒ½æ˜¯nilï¼Œåœ¨ARCä¹‹å‰ï¼Œåªæœ‰å®ä¾‹å˜é‡æ‰ä¼šé»˜è®¤ä¸ºnilã€‚å¦‚æœä½ ç¼–å†™ä¸‹é¢ä»£ç ï¼š" class="headerlink" title="åœ¨ARCä¸­ï¼Œæ‰€æœ‰æŒ‡é’ˆå˜é‡é»˜è®¤éƒ½æ˜¯nilï¼Œåœ¨ARCä¹‹å‰ï¼Œåªæœ‰å®ä¾‹å˜é‡æ‰ä¼šé»˜è®¤ä¸ºnilã€‚å¦‚æœä½ ç¼–å†™ä¸‹é¢ä»£ç ï¼š"></a>åœ¨ARCä¸­ï¼Œæ‰€æœ‰æŒ‡é’ˆå˜é‡é»˜è®¤éƒ½æ˜¯nilï¼Œåœ¨ARCä¹‹å‰ï¼Œåªæœ‰å®ä¾‹å˜é‡æ‰ä¼šé»˜è®¤ä¸ºnilã€‚å¦‚æœä½ ç¼–å†™ä¸‹é¢ä»£ç ï¼š</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> - (void)myMethod</span><br><span class="line">&#123;</span><br><span class="line">	int someNumber;</span><br><span class="line">	NSLog(@<span class="string">"Number: %d"</span>, someNumber);</span><br><span class="line">	NSString *someString;</span><br><span class="line">	NSLog(@<span class="string">"String: %p"</span>, someString);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="ç¼–è¯‘å™¨ä¼šï¼šâ€Variable-is-uninitialized-when-used-hereâ€ï¼Œè€Œè¾“å‡ºåˆ™æ˜¯éšæœºæ•°å€¼ï¼š"><a href="#ç¼–è¯‘å™¨ä¼šï¼šâ€Variable-is-uninitialized-when-used-hereâ€ï¼Œè€Œè¾“å‡ºåˆ™æ˜¯éšæœºæ•°å€¼ï¼š" class="headerlink" title="ç¼–è¯‘å™¨ä¼šï¼šâ€Variable is uninitialized when used hereâ€ï¼Œè€Œè¾“å‡ºåˆ™æ˜¯éšæœºæ•°å€¼ï¼š"></a>ç¼–è¯‘å™¨ä¼šï¼šâ€Variable is uninitialized when used hereâ€ï¼Œè€Œè¾“å‡ºåˆ™æ˜¯éšæœºæ•°å€¼ï¼š</h5><h5 id="Woot-2186-207-Number-67"><a href="#Woot-2186-207-Number-67" class="headerlink" title="Woot[2186:207] Number: 67"></a>Woot[2186:207] Number: 67</h5><h5 id="Woot-2186-207-String-0x4babb5"><a href="#Woot-2186-207-String-0x4babb5" class="headerlink" title="Woot[2186:207] String: 0x4babb5"></a>Woot[2186:207] String: 0x4babb5</h5><h5 id="ä½†åœ¨ARCä¸­ï¼Œè¾“å‡ºåˆ™å¦‚ä¸‹ï¼š"><a href="#ä½†åœ¨ARCä¸­ï¼Œè¾“å‡ºåˆ™å¦‚ä¸‹ï¼š" class="headerlink" title="ä½†åœ¨ARCä¸­ï¼Œè¾“å‡ºåˆ™å¦‚ä¸‹ï¼š"></a>ä½†åœ¨ARCä¸­ï¼Œè¾“å‡ºåˆ™å¦‚ä¸‹ï¼š</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Artists[2227:207] Number: 10120117</span><br><span class="line">Artists[2227:207] String: 0x0</span><br></pre></td></tr></table></figure>
<h5 id="intä»ç„¶æ˜¯éšæœºå€¼ï¼ˆè¿™æ ·ä½¿ç”¨ç¼–è¯‘å™¨ä¹Ÿä¼šè­¦å‘Šï¼‰ï¼Œä½†someStringçš„åˆå§‹å€¼å·²ç»æ˜¯nilï¼Œè¿™æ ·çš„ä¼˜ç‚¹æ˜¯æŒ‡é’ˆæ°¸è¿œä¸ä¼šæŒ‡å‘éæ³•å¯¹è±¡ã€‚"><a href="#intä»ç„¶æ˜¯éšæœºå€¼ï¼ˆè¿™æ ·ä½¿ç”¨ç¼–è¯‘å™¨ä¹Ÿä¼šè­¦å‘Šï¼‰ï¼Œä½†someStringçš„åˆå§‹å€¼å·²ç»æ˜¯nilï¼Œè¿™æ ·çš„ä¼˜ç‚¹æ˜¯æŒ‡é’ˆæ°¸è¿œä¸ä¼šæŒ‡å‘éæ³•å¯¹è±¡ã€‚" class="headerlink" title="intä»ç„¶æ˜¯éšæœºå€¼ï¼ˆè¿™æ ·ä½¿ç”¨ç¼–è¯‘å™¨ä¹Ÿä¼šè­¦å‘Šï¼‰ï¼Œä½†someStringçš„åˆå§‹å€¼å·²ç»æ˜¯nilï¼Œè¿™æ ·çš„ä¼˜ç‚¹æ˜¯æŒ‡é’ˆæ°¸è¿œä¸ä¼šæŒ‡å‘éæ³•å¯¹è±¡ã€‚"></a>intä»ç„¶æ˜¯éšæœºå€¼ï¼ˆè¿™æ ·ä½¿ç”¨ç¼–è¯‘å™¨ä¹Ÿä¼šè­¦å‘Šï¼‰ï¼Œä½†someStringçš„åˆå§‹å€¼å·²ç»æ˜¯nilï¼Œè¿™æ ·çš„ä¼˜ç‚¹æ˜¯æŒ‡é’ˆæ°¸è¿œä¸ä¼šæŒ‡å‘éæ³•å¯¹è±¡ã€‚</h5><h5 id="autoreleaseå¯¹è±¡å¯èƒ½ä¼šæ¯”ä½ æƒ³è±¡ä¸­å­˜æ´»æ›´é•¿æ—¶é—´ï¼Œåœ¨iOSä¸­ï¼Œæ¯æ¬¡UIäº‹ä»¶ï¼ˆç‚¹å‡»æŒ‰é’®ç­‰ï¼‰éƒ½ä¼šæ¸…ç©ºä¸€æ¬¡-autorelease-poolï¼ˆå…·ä½“åº”è¯¥ä¸RunLoopç›¸å…³ï¼Œåé¢æ–‡ç« ä¼šè¯´åˆ°ï¼‰ï¼Œä½†æ˜¯å¦‚æœä½ çš„äº‹ä»¶å¤„ç†å™¨è¿›è¡Œäº†å¤§é‡æ“ä½œï¼Œä¾‹å¦‚å¾ªç¯åœ°åˆ›å»ºè®¸å¤šå¯¹è±¡ï¼Œæœ€å¥½æ˜¯ä½¿ç”¨ä½ è‡ªå·±çš„-autorelease-poolï¼Œé¿å…åº”ç”¨é¢ä¸´å†…å­˜ä¸è¶³ï¼š"><a href="#autoreleaseå¯¹è±¡å¯èƒ½ä¼šæ¯”ä½ æƒ³è±¡ä¸­å­˜æ´»æ›´é•¿æ—¶é—´ï¼Œåœ¨iOSä¸­ï¼Œæ¯æ¬¡UIäº‹ä»¶ï¼ˆç‚¹å‡»æŒ‰é’®ç­‰ï¼‰éƒ½ä¼šæ¸…ç©ºä¸€æ¬¡-autorelease-poolï¼ˆå…·ä½“åº”è¯¥ä¸RunLoopç›¸å…³ï¼Œåé¢æ–‡ç« ä¼šè¯´åˆ°ï¼‰ï¼Œä½†æ˜¯å¦‚æœä½ çš„äº‹ä»¶å¤„ç†å™¨è¿›è¡Œäº†å¤§é‡æ“ä½œï¼Œä¾‹å¦‚å¾ªç¯åœ°åˆ›å»ºè®¸å¤šå¯¹è±¡ï¼Œæœ€å¥½æ˜¯ä½¿ç”¨ä½ è‡ªå·±çš„-autorelease-poolï¼Œé¿å…åº”ç”¨é¢ä¸´å†…å­˜ä¸è¶³ï¼š" class="headerlink" title="autoreleaseå¯¹è±¡å¯èƒ½ä¼šæ¯”ä½ æƒ³è±¡ä¸­å­˜æ´»æ›´é•¿æ—¶é—´ï¼Œåœ¨iOSä¸­ï¼Œæ¯æ¬¡UIäº‹ä»¶ï¼ˆç‚¹å‡»æŒ‰é’®ç­‰ï¼‰éƒ½ä¼šæ¸…ç©ºä¸€æ¬¡ autorelease poolï¼ˆå…·ä½“åº”è¯¥ä¸RunLoopç›¸å…³ï¼Œåé¢æ–‡ç« ä¼šè¯´åˆ°ï¼‰ï¼Œä½†æ˜¯å¦‚æœä½ çš„äº‹ä»¶å¤„ç†å™¨è¿›è¡Œäº†å¤§é‡æ“ä½œï¼Œä¾‹å¦‚å¾ªç¯åœ°åˆ›å»ºè®¸å¤šå¯¹è±¡ï¼Œæœ€å¥½æ˜¯ä½¿ç”¨ä½ è‡ªå·±çš„ autorelease poolï¼Œé¿å…åº”ç”¨é¢ä¸´å†…å­˜ä¸è¶³ï¼š"></a>autoreleaseå¯¹è±¡å¯èƒ½ä¼šæ¯”ä½ æƒ³è±¡ä¸­å­˜æ´»æ›´é•¿æ—¶é—´ï¼Œåœ¨iOSä¸­ï¼Œæ¯æ¬¡UIäº‹ä»¶ï¼ˆç‚¹å‡»æŒ‰é’®ç­‰ï¼‰éƒ½ä¼šæ¸…ç©ºä¸€æ¬¡ autorelease poolï¼ˆå…·ä½“åº”è¯¥ä¸RunLoopç›¸å…³ï¼Œåé¢æ–‡ç« ä¼šè¯´åˆ°ï¼‰ï¼Œä½†æ˜¯å¦‚æœä½ çš„äº‹ä»¶å¤„ç†å™¨è¿›è¡Œäº†å¤§é‡æ“ä½œï¼Œä¾‹å¦‚å¾ªç¯åœ°åˆ›å»ºè®¸å¤šå¯¹è±¡ï¼Œæœ€å¥½æ˜¯ä½¿ç”¨ä½ è‡ªå·±çš„ autorelease poolï¼Œé¿å…åº”ç”¨é¢ä¸´å†…å­˜ä¸è¶³ï¼š</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (int i = 0; i &lt; 10000; i++)</span><br><span class="line">&#123;</span><br><span class="line">     @autoreleasepool</span><br><span class="line">     &#123;</span><br><span class="line">          NSString *s = [NSString stringWithFormat:. . .];</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><h5 id="æ­¤ç¯‡æ•´ç†äº2013å¹´ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œæ•¬è¯·æ–§æ­£ã€‚"><a href="#æ­¤ç¯‡æ•´ç†äº2013å¹´ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œæ•¬è¯·æ–§æ­£ã€‚" class="headerlink" title="æ­¤ç¯‡æ•´ç†äº2013å¹´ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œæ•¬è¯·æ–§æ­£ã€‚"></a>æ­¤ç¯‡æ•´ç†äº2013å¹´ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œæ•¬è¯·æ–§æ­£ã€‚</h5>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://jackthenoob.github.io/2019/05/20/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="å‚æ¨å°æ¢³é›¨">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lyddwn">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/20/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-20T11:22:35+08:00">
                2019-05-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æ¬¢è¿æ¥åˆ°æˆ‘çš„<a href="https://jackthenoob.github.io">æŠ€æœ¯åšå®¢</a>!<br>ä¸‹é¢å‡†å¤‡æŠŠä¹‹å‰å·¥ä½œä¸­çš„ç§¯ç´¯éƒ½æ…¢æ…¢è½¬åˆ°Githubä¸Šæ¥ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">å‚æ¨å°æ¢³é›¨</p>
              <p class="site-description motion-element" itemprop="description">None</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">å‚æ¨å°æ¢³é›¨</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
